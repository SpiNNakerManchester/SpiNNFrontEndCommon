
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>spinn_front_end_common.interface.interface_functions.router_provenance_gatherer &#8212; SpiNNFrontEndCommon 6.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/sphinxdoc.css" />
    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">SpiNNFrontEndCommon 6.0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Module code</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../interface_functions.html" accesskey="U">spinn_front_end_common.interface.interface_functions</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">spinn_front_end_common.interface.interface_functions.router_provenance_gatherer</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for spinn_front_end_common.interface.interface_functions.router_provenance_gatherer</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright (c) 2017-2019 The University of Manchester</span>
<span class="c1">#</span>
<span class="c1"># This program is free software: you can redistribute it and/or modify</span>
<span class="c1"># it under the terms of the GNU General Public License as published by</span>
<span class="c1"># the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1"># (at your option) any later version.</span>
<span class="c1">#</span>
<span class="c1"># This program is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1"># You should have received a copy of the GNU General Public License</span>
<span class="c1"># along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">spinn_utilities.progress_bar</span> <span class="kn">import</span> <span class="n">ProgressBar</span>
<span class="kn">from</span> <span class="nn">spinn_utilities.log</span> <span class="kn">import</span> <span class="n">FormatAdapter</span>
<span class="kn">from</span> <span class="nn">spinnman.exceptions</span> <span class="kn">import</span> <span class="n">SpinnmanException</span>
<span class="kn">from</span> <span class="nn">spinn_front_end_common.utilities.utility_objs</span> <span class="kn">import</span> <span class="n">ProvenanceDataItem</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">FormatAdapter</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">RouterProvenanceGatherer</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Gathers diagnostics from the routers.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">[</span>
        <span class="c1"># int for how many packets were sent</span>
        <span class="s1">&#39;_total_sent_packets&#39;</span><span class="p">,</span>

        <span class="c1"># how many new packets were received</span>
        <span class="s1">&#39;_total_new_packets&#39;</span><span class="p">,</span>

        <span class="c1"># how many dropped packets</span>
        <span class="s1">&#39;_total_dropped_packets&#39;</span><span class="p">,</span>

        <span class="c1"># total missed dropped packets</span>
        <span class="s1">&#39;_total_missed_dropped_packets&#39;</span><span class="p">,</span>

        <span class="c1"># total lost dropped packets</span>
        <span class="s1">&#39;_total_lost_dropped_packets&#39;</span><span class="p">,</span>

        <span class="c1"># machine</span>
        <span class="s1">&#39;_machine&#39;</span><span class="p">,</span>
        <span class="c1"># placements</span>
        <span class="s1">&#39;_placements&#39;</span><span class="p">,</span>
        <span class="c1"># transceiver</span>
        <span class="s1">&#39;_txrx&#39;</span><span class="p">,</span>
    <span class="p">]</span>

<div class="viewcode-block" id="RouterProvenanceGatherer.__call__"><a class="viewcode-back" href="../../../../spinn_front_end_common.interface.interface_functions.html#spinn_front_end_common.interface.interface_functions.RouterProvenanceGatherer.__call__">[docs]</a>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">transceiver</span><span class="p">,</span> <span class="n">machine</span><span class="p">,</span> <span class="n">router_tables</span><span class="p">,</span>
            <span class="n">provenance_data_objects</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">extra_monitor_vertices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">placements</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param ~spinnman.transceiver.Transceiver transceiver:</span>
<span class="sd">            the SpiNNMan interface object</span>
<span class="sd">        :param ~spinn_machine.Machine machine:</span>
<span class="sd">            the SpiNNaker machine</span>
<span class="sd">        :param router_tables: the router tables that have been generated</span>
<span class="sd">        :type router_tables:</span>
<span class="sd">            ~pacman.model.routing_tables.MulticastRoutingTables</span>
<span class="sd">        :param list(ProvenanceDataItem) provenance_data_objects:</span>
<span class="sd">            any existing provenance information to add to</span>
<span class="sd">        :param list(ExtraMonitorSupportMachineVertex) extra_monitor_vertices:</span>
<span class="sd">            vertices which represent the extra monitor code</span>
<span class="sd">        :param ~pacman.model.placements.Placements placements:</span>
<span class="sd">            the placements object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=too-many-arguments</span>
        <span class="c1"># pylint: disable=attribute-defined-outside-init</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_total_sent_packets</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_total_new_packets</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_total_dropped_packets</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_total_missed_dropped_packets</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_total_lost_dropped_packets</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_txrx</span> <span class="o">=</span> <span class="n">transceiver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_machine</span> <span class="o">=</span> <span class="n">machine</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_placements</span> <span class="o">=</span> <span class="n">placements</span>

        <span class="k">if</span> <span class="n">provenance_data_objects</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prov_items</span> <span class="o">=</span> <span class="n">provenance_data_objects</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">prov_items</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_add_router_provenance_data</span><span class="p">(</span>
            <span class="n">router_tables</span><span class="p">,</span> <span class="n">extra_monitor_vertices</span><span class="p">,</span> <span class="n">prov_items</span><span class="p">)</span>

        <span class="n">prov_items</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__summary_items</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">prov_items</span></div>

    <span class="k">def</span> <span class="nf">__summary_items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :rtype: iterable(ProvenanceDataItem)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="p">[</span><span class="s2">&quot;router_provenance&quot;</span><span class="p">,</span> <span class="s2">&quot;total_multi_cast_sent_packets&quot;</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_total_sent_packets</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="p">[</span><span class="s2">&quot;router_provenance&quot;</span><span class="p">,</span> <span class="s2">&quot;total_created_packets&quot;</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_total_new_packets</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="p">[</span><span class="s2">&quot;router_provenance&quot;</span><span class="p">,</span> <span class="s2">&quot;total_dropped_packets&quot;</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_total_dropped_packets</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="p">[</span><span class="s2">&quot;router_provenance&quot;</span><span class="p">,</span> <span class="s2">&quot;total_missed_dropped_packets&quot;</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_total_missed_dropped_packets</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="p">[</span><span class="s2">&quot;router_provenance&quot;</span><span class="p">,</span> <span class="s2">&quot;total_lost_dropped_packets&quot;</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_total_lost_dropped_packets</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_router_provenance_data</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">router_tables</span><span class="p">,</span> <span class="n">extra_monitor_vertices</span><span class="p">,</span> <span class="n">items</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Writes the provenance data of the router diagnostics</span>

<span class="sd">        :param ~.MulticastRoutingTables router_tables:</span>
<span class="sd">            the routing tables generated by PACMAN</span>
<span class="sd">        :param list(ExtraMonitorSupportMachineVertex) extra_monitor_vertices:</span>
<span class="sd">            list of extra monitor vertices</span>
<span class="sd">        :param list(ProvenanceDataItem) items:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">progress</span> <span class="o">=</span> <span class="n">ProgressBar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_machine</span><span class="o">.</span><span class="n">n_chips</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span>
                               <span class="s2">&quot;Getting Router Provenance&quot;</span><span class="p">)</span>

        <span class="n">seen_chips</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="c1"># get all extra monitor core data if it exists</span>
        <span class="n">reinjection_data</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">extra_monitor_vertices</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">monitor</span> <span class="o">=</span> <span class="n">extra_monitor_vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">reinjection_data</span> <span class="o">=</span> <span class="n">monitor</span><span class="o">.</span><span class="n">get_reinjection_status_for_vertices</span><span class="p">(</span>
                <span class="n">placements</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_placements</span><span class="p">,</span>
                <span class="n">extra_monitor_cores_for_data</span><span class="o">=</span><span class="n">extra_monitor_vertices</span><span class="p">,</span>
                <span class="n">transceiver</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_txrx</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">router_table</span> <span class="ow">in</span> <span class="n">progress</span><span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span>
                <span class="n">router_tables</span><span class="o">.</span><span class="n">routing_tables</span><span class="p">,</span>
                <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">table</span><span class="p">:</span> <span class="p">(</span><span class="n">table</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">y</span><span class="p">)),</span> <span class="kc">False</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_router_table_diagnostic</span><span class="p">(</span>
                <span class="n">router_table</span><span class="p">,</span> <span class="n">seen_chips</span><span class="p">,</span> <span class="n">items</span><span class="p">,</span> <span class="n">reinjection_data</span><span class="p">)</span>

        <span class="c1"># Get what info we can for chips where there are problems or no table</span>
        <span class="k">for</span> <span class="n">chip</span> <span class="ow">in</span> <span class="n">progress</span><span class="o">.</span><span class="n">over</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_machine</span><span class="o">.</span><span class="n">chips</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">c</span><span class="p">:</span> <span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">y</span><span class="p">))):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">chip</span><span class="o">.</span><span class="n">virtual</span> <span class="ow">and</span> <span class="p">(</span><span class="n">chip</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">chip</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_chips</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_add_unseen_router_chip_diagnostic</span><span class="p">(</span>
                    <span class="n">chip</span><span class="p">,</span> <span class="n">items</span><span class="p">,</span> <span class="n">reinjection_data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_router_table_diagnostic</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">seen_chips</span><span class="p">,</span> <span class="n">items</span><span class="p">,</span> <span class="n">reinjection_data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param ~.MulticastRoutingTable table:</span>
<span class="sd">        :param set(tuple(int,int)) seen_chips:</span>
<span class="sd">        :param list(ProvenanceDataItem) items:</span>
<span class="sd">        :param dict(tuple(int,int),ReInjectionStatus) reinjection_data:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=too-many-arguments, bare-except</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">x</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">y</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_machine</span><span class="o">.</span><span class="n">get_chip_at</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span><span class="o">.</span><span class="n">virtual</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">diagnostics</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_txrx</span><span class="o">.</span><span class="n">get_router_diagnostics</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">SpinnmanException</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Could not read routing diagnostics from </span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="n">seen_chips</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_status</span><span class="p">(</span><span class="n">reinjection_data</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="n">items</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__router_diagnostics</span><span class="p">(</span>
                <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">diagnostics</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">table</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__add_totals</span><span class="p">(</span><span class="n">diagnostics</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_unseen_router_chip_diagnostic</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">chip</span><span class="p">,</span> <span class="n">items</span><span class="p">,</span> <span class="n">reinjection_data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param ~.Chip chip:</span>
<span class="sd">        :param set(tuple(int,int)) seen_chips:</span>
<span class="sd">        :param list(ProvenanceDataItem) items:</span>
<span class="sd">        :param dict(tuple(int,int),ReInjectionStatus) reinjection_data:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=bare-except</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">diagnostics</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_txrx</span><span class="o">.</span><span class="n">get_router_diagnostics</span><span class="p">(</span><span class="n">chip</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">chip</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">SpinnmanException</span><span class="p">:</span>
            <span class="c1"># There could be issues with unused chips - don&#39;t worry!</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">diagnostics</span><span class="o">.</span><span class="n">n_dropped_multicast_packets</span> <span class="ow">or</span>
                <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_local_multicast_packets</span> <span class="ow">or</span>
                <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_external_multicast_packets</span><span class="p">):</span>
            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_status</span><span class="p">(</span><span class="n">reinjection_data</span><span class="p">,</span> <span class="n">chip</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">chip</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
            <span class="n">items</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__router_diagnostics</span><span class="p">(</span>
                <span class="n">chip</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">chip</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">diagnostics</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__add_totals</span><span class="p">(</span><span class="n">diagnostics</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__get_status</span><span class="p">(</span><span class="n">reinjection_data</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param dict(tuple(int,int),ReInjectionStatus) reinjection_data:</span>
<span class="sd">        :param int x:</span>
<span class="sd">        :param int y:</span>
<span class="sd">        :rtype: ReInjectionStatus or None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">reinjection_data</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="k">if</span> <span class="n">reinjection_data</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__add_totals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">diagnostics</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param ~.RouterDiagnostics diagnostics:</span>
<span class="sd">        :param ReInjectionStatus status:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_total_sent_packets</span> <span class="o">+=</span> <span class="p">(</span>
            <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_local_multicast_packets</span> <span class="o">+</span>
            <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_external_multicast_packets</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_total_new_packets</span> <span class="o">+=</span> <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_local_multicast_packets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_total_dropped_packets</span> <span class="o">+=</span> <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_dropped_multicast_packets</span>
        <span class="k">if</span> <span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_total_missed_dropped_packets</span> <span class="o">+=</span> <span class="p">(</span>
                <span class="n">status</span><span class="o">.</span><span class="n">n_missed_dropped_packets</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_total_lost_dropped_packets</span> <span class="o">+=</span> <span class="p">(</span>
                <span class="n">status</span><span class="o">.</span><span class="n">n_dropped_packet_overflows</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_total_lost_dropped_packets</span> <span class="o">+=</span> <span class="p">(</span>
                <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_dropped_multicast_packets</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__router_diagnostics</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">diagnostics</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="n">table</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Describes the router diagnostics for one router.</span>

<span class="sd">        :param int x: x coordinate of the router in question</span>
<span class="sd">        :param int y: y coordinate of the router in question</span>
<span class="sd">        :param ~.RouterDiagnostics diagnostics: the router diagnostics object</span>
<span class="sd">        :param ReInjectionStatus status:</span>
<span class="sd">            the data gained from the extra monitor re-injection subsystem</span>
<span class="sd">        :param bool expected:</span>
<span class="sd">        :param ~.AbstractMulticastRoutingTable table:</span>
<span class="sd">            the router table generated by the PACMAN tools</span>
<span class="sd">        :rtype: iterable(ProvenanceDataItem)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=too-many-arguments</span>
        <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;router_provenance&quot;</span><span class="p">,</span>
                 <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="n">expected</span> <span class="k">else</span> <span class="s1">&#39;un&#39;</span><span class="si">}</span><span class="s2">expected_routers&quot;</span><span class="p">,</span>
                 <span class="sa">f</span><span class="s2">&quot;router_at_chip_</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>

        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Local_Multicast_Packets&quot;</span><span class="p">],</span>
            <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_local_multicast_packets</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;External_Multicast_Packets&quot;</span><span class="p">],</span>
            <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_external_multicast_packets</span><span class="p">)</span>

        <span class="c1"># simplify the if by making components of it outside.</span>
        <span class="n">has_dropped</span> <span class="o">=</span> <span class="p">(</span><span class="n">diagnostics</span><span class="o">.</span><span class="n">n_dropped_multicast_packets</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">missing_stuff</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">has_reinjection</span> <span class="o">=</span> <span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">has_reinjection</span><span class="p">:</span>
            <span class="n">missing_stuff</span> <span class="o">=</span> <span class="p">((</span>
                <span class="n">status</span><span class="o">.</span><span class="n">n_dropped_packets</span> <span class="o">+</span> <span class="n">status</span><span class="o">.</span><span class="n">n_missed_dropped_packets</span> <span class="o">+</span>
                <span class="n">status</span><span class="o">.</span><span class="n">n_dropped_packet_overflows</span> <span class="o">+</span>
                <span class="n">status</span><span class="o">.</span><span class="n">n_reinjected_packets</span> <span class="o">+</span> <span class="n">status</span><span class="o">.</span><span class="n">n_processor_dumps</span> <span class="o">+</span>
                <span class="n">status</span><span class="o">.</span><span class="n">n_link_dumps</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_dropped_multicast_packets</span><span class="p">)</span>

        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Dropped_Multicast_Packets&quot;</span><span class="p">],</span>
            <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_dropped_multicast_packets</span><span class="p">,</span>
            <span class="p">(</span><span class="n">has_dropped</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">has_reinjection</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                <span class="n">has_dropped</span> <span class="ow">and</span> <span class="n">has_reinjection</span> <span class="ow">and</span> <span class="n">missing_stuff</span><span class="p">),</span>
            <span class="sa">f</span><span class="s2">&quot;The router on </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2"> has dropped &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">diagnostics</span><span class="o">.</span><span class="n">n_dropped_multicast_packets</span><span class="si">}</span><span class="s2"> multicast route &quot;</span>
            <span class="s2">&quot;packets. Try increasing the machine_time_step and/or the time &quot;</span>
            <span class="s2">&quot;scale factor or reducing the number of atoms per core.&quot;</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Dropped_Multicast_Packets_via_local_transmission&quot;</span><span class="p">],</span>
            <span class="n">diagnostics</span><span class="o">.</span><span class="n">user_3</span><span class="p">,</span> <span class="p">(</span><span class="n">diagnostics</span><span class="o">.</span><span class="n">user_3</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span>
            <span class="sa">f</span><span class="s2">&quot;The router on </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2"> has dropped </span><span class="si">{</span><span class="n">diagnostics</span><span class="o">.</span><span class="n">user_3</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="s2">&quot;multicast packets that were transmitted by local cores. This &quot;</span>
            <span class="s2">&quot;occurs where the router has no entry associated with the &quot;</span>
            <span class="s2">&quot;multicast key. Try investigating the keys allocated to the &quot;</span>
            <span class="s2">&quot;vertices and the router table entries for this chip.&quot;</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;default_routed_external_multicast_packets&quot;</span><span class="p">],</span>
            <span class="n">diagnostics</span><span class="o">.</span><span class="n">user_2</span><span class="p">,</span>
            <span class="p">(</span><span class="n">diagnostics</span><span class="o">.</span><span class="n">user_2</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span>
                <span class="n">table</span> <span class="ow">and</span> <span class="n">table</span><span class="o">.</span><span class="n">number_of_defaultable_entries</span><span class="p">)),</span>
            <span class="sa">f</span><span class="s2">&quot;The router on </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2"> has default routed </span><span class="si">{</span><span class="n">diagnostics</span><span class="o">.</span><span class="n">user_2</span><span class="si">}</span><span class="s2"> &quot;</span>
            <span class="s2">&quot;multicast packets, but the router table did not expect any &quot;</span>
            <span class="s2">&quot;default routed packets. This occurs where the router has no &quot;</span>
            <span class="s2">&quot;entry associated with the multicast key. Try investigating the &quot;</span>
            <span class="s2">&quot;keys allocated to the vertices and the router table entries for &quot;</span>
            <span class="s2">&quot;this chip.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">table</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
                <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Entries&quot;</span><span class="p">],</span> <span class="n">table</span><span class="o">.</span><span class="n">number_of_entries</span><span class="p">)</span>
            <span class="n">routes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">multicast_routing_entries</span><span class="p">:</span>
                <span class="n">routes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ent</span><span class="o">.</span><span class="n">spinnaker_route</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
                <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Unique_Routes&quot;</span><span class="p">],</span> <span class="nb">len</span><span class="p">(</span><span class="n">routes</span><span class="p">))</span>

        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Local_P2P_Packets&quot;</span><span class="p">],</span>
            <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_local_peer_to_peer_packets</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;External_P2P_Packets&quot;</span><span class="p">],</span>
            <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_external_peer_to_peer_packets</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Dropped_P2P_Packets&quot;</span><span class="p">],</span>
            <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_dropped_peer_to_peer_packets</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Local_NN_Packets&quot;</span><span class="p">],</span>
            <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_local_nearest_neighbour_packets</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;External_NN_Packets&quot;</span><span class="p">],</span>
            <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_external_nearest_neighbour_packets</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Dropped_NN_Packets&quot;</span><span class="p">],</span>
            <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_dropped_nearest_neighbour_packets</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Local_FR_Packets&quot;</span><span class="p">],</span>
            <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_local_fixed_route_packets</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;External_FR_Packets&quot;</span><span class="p">],</span>
            <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_external_fixed_route_packets</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Dropped_FR_Packets&quot;</span><span class="p">],</span>
            <span class="n">diagnostics</span><span class="o">.</span><span class="n">n_dropped_fixed_route_packets</span><span class="p">,</span>
            <span class="p">(</span><span class="n">diagnostics</span><span class="o">.</span><span class="n">n_dropped_fixed_route_packets</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span>
            <span class="sa">f</span><span class="s2">&quot;The router on chip </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2"> dropped &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">diagnostics</span><span class="o">.</span><span class="n">n_dropped_fixed_route_packets</span><span class="si">}</span><span class="s2"> fixed route &quot;</span>
            <span class="s2">&quot;packets. This is indicative of an error within the data &quot;</span>
            <span class="s2">&quot;extraction process as this is the only expected user of fixed &quot;</span>
            <span class="s2">&quot;route packets.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
                <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Received_For_Reinjection&quot;</span><span class="p">],</span> <span class="n">status</span><span class="o">.</span><span class="n">n_dropped_packets</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
                <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Missed_For_Reinjection&quot;</span><span class="p">],</span>
                <span class="n">status</span><span class="o">.</span><span class="n">n_missed_dropped_packets</span><span class="p">,</span>
                <span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">n_missed_dropped_packets</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span>
                <span class="sa">f</span><span class="s2">&quot;The extra monitor on </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2"> has missed &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">status</span><span class="o">.</span><span class="n">n_missed_dropped_packets</span><span class="si">}</span><span class="s2"> packets.&quot;</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
                <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Reinjection_Overflows&quot;</span><span class="p">],</span>
                <span class="n">status</span><span class="o">.</span><span class="n">n_dropped_packet_overflows</span><span class="p">,</span>
                <span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">n_dropped_packet_overflows</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span>
                <span class="sa">f</span><span class="s2">&quot;The extra monitor on </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2"> has dropped &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">status</span><span class="o">.</span><span class="n">n_dropped_packet_overflows</span><span class="si">}</span><span class="s2"> packets.&quot;</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
                <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Reinjected&quot;</span><span class="p">],</span> <span class="n">status</span><span class="o">.</span><span class="n">n_reinjected_packets</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
                <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Dumped_from_a_Link&quot;</span><span class="p">],</span> <span class="n">status</span><span class="o">.</span><span class="n">n_link_dumps</span><span class="p">,</span>
                <span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">n_link_dumps</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__has_virtual_chip_connected</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))),</span>
                <span class="sa">f</span><span class="s2">&quot;The extra monitor on </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2"> has detected that &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">status</span><span class="o">.</span><span class="n">n_link_dumps</span><span class="si">}</span><span class="s2"> packets were dumped from an outgoing &quot;</span>
                <span class="s2">&quot;link of this chip&#39;s router. This often occurs when external &quot;</span>
                <span class="s2">&quot;devices are used in the script but not connected to the &quot;</span>
                <span class="s2">&quot;communication fabric correctly. These packets may have been &quot;</span>
                <span class="s2">&quot;reinjected multiple times and so this number may be an &quot;</span>
                <span class="s2">&quot;overestimate.&quot;</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
                <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Dumped_from_a_processor&quot;</span><span class="p">],</span> <span class="n">status</span><span class="o">.</span><span class="n">n_processor_dumps</span><span class="p">,</span>
                <span class="p">(</span><span class="n">status</span><span class="o">.</span><span class="n">n_processor_dumps</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span>
                <span class="sa">f</span><span class="s2">&quot;The extra monitor on </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2"> has detected that &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">status</span><span class="o">.</span><span class="n">n_processor_dumps</span><span class="si">}</span><span class="s2"> packets were dumped from a &quot;</span>
                <span class="s2">&quot;core failing to take the packet. This often occurs when &quot;</span>
                <span class="s2">&quot;the executable has crashed or has not been given a &quot;</span>
                <span class="s2">&quot;multicast packet callback. It can also result from the &quot;</span>
                <span class="s2">&quot;core taking too long to process each packet. These &quot;</span>
                <span class="s2">&quot;packets were reinjected and so this number is likely an &quot;</span>
                <span class="s2">&quot;overestimate.&quot;</span><span class="p">)</span>

        <span class="k">yield</span> <span class="n">ProvenanceDataItem</span><span class="p">(</span>
            <span class="n">names</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Error status&quot;</span><span class="p">],</span> <span class="n">diagnostics</span><span class="o">.</span><span class="n">error_status</span><span class="p">,</span>
            <span class="p">(</span><span class="n">diagnostics</span><span class="o">.</span><span class="n">error_status</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span>
            <span class="sa">f</span><span class="s2">&quot;The router on </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2"> has a non-zero error status. This could &quot;</span>
            <span class="s2">&quot;indicate a hardware fault. The errors set are &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">diagnostics</span><span class="o">.</span><span class="n">errors_set</span><span class="si">}</span><span class="s2">, and the error count is &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">diagnostics</span><span class="o">.</span><span class="n">error_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__has_virtual_chip_connected</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param int x:</span>
<span class="sd">        :param int y:</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">any</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_machine</span><span class="o">.</span><span class="n">get_chip_at</span><span class="p">(</span>
                <span class="n">link</span><span class="o">.</span><span class="n">destination_x</span><span class="p">,</span> <span class="n">link</span><span class="o">.</span><span class="n">destination_y</span><span class="p">)</span><span class="o">.</span><span class="n">virtual</span>
            <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_machine</span><span class="o">.</span><span class="n">get_chip_at</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">links</span><span class="p">)</span>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">SpiNNFrontEndCommon 6.0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Module code</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../interface_functions.html" >spinn_front_end_common.interface.interface_functions</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">spinn_front_end_common.interface.interface_functions.router_provenance_gatherer</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014-2021.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0.
    </div>
  </body>
</html>