<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SpiNNFrontEndCommon: models/live_packet_gather/src/live_packet_gather.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SpiNNFrontEndCommon
   &#160;<span id="projectnumber">5.1.1</span>
   </div>
   <div id="projectbrief">Common support code for user-facing front end systems.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_1ae4179d5e953611aae20c997279e02c.html">models</a></li><li class="navelem"><a class="el" href="dir_4fd041297173f6cb7d13e67543eb6c2e.html">live_packet_gather</a></li><li class="navelem"><a class="el" href="dir_87035c029798fd0b2056e16a45632873.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">live_packet_gather.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The implementation of the Live Packet Gatherer.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="common-typedefs_8h_source.html">common-typedefs.h</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="http://spinnakermanchester.github.io/spinn_common/circular__buffer_8h.html">circular_buffer.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="data__specification_8h_source.html">data_specification.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="debug_8h_source.html">debug.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="simulation_8h_source.html">simulation.h</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html">spin1_api.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="eieio_8h_source.html">eieio.h</a>&gt;</code><br />
</div>
<p><a href="live__packet__gather_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structlpg__provenance__data__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#structlpg__provenance__data__t">lpg_provenance_data_t</a></td></tr>
<tr class="memdesc:structlpg__provenance__data__t"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provenance data store.  <a href="live__packet__gather_8c.html#structlpg__provenance__data__t">More...</a><br /></td></tr>
<tr class="separator:structlpg__provenance__data__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structkey__translation__entry"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#structkey__translation__entry">key_translation_entry</a></td></tr>
<tr class="separator:structkey__translation__entry"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structlpg__config"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#structlpg__config">lpg_config</a></td></tr>
<tr class="memdesc:structlpg__config"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definitions of each element in the configuration.  <a href="live__packet__gather_8c.html#structlpg__config">More...</a><br /></td></tr>
<tr class="separator:structlpg__config"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab344fc3b14e9b7236c6c5cf5cb913c5b"><td class="memItemLeft" align="right" valign="top"><a id="ab344fc3b14e9b7236c6c5cf5cb913c5b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#ab344fc3b14e9b7236c6c5cf5cb913c5b">FLAG_IS_SET</a>(flags,  bit)&#160;&#160;&#160;(((flags) &amp; (bit)) != 0)</td></tr>
<tr class="memdesc:ab344fc3b14e9b7236c6c5cf5cb913c5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">How to test if a bit flag is set. <br /></td></tr>
<tr class="separator:ab344fc3b14e9b7236c6c5cf5cb913c5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaf5cf7cd791a97c250209a7016966f1"><td class="memItemLeft" align="right" valign="top"><a id="afaf5cf7cd791a97c250209a7016966f1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#afaf5cf7cd791a97c250209a7016966f1">CLAMP8</a>(value)&#160;&#160;&#160;((value) &amp; 0xFF)</td></tr>
<tr class="memdesc:afaf5cf7cd791a97c250209a7016966f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">How to use just the low 8 bits of an integer value. <br /></td></tr>
<tr class="separator:afaf5cf7cd791a97c250209a7016966f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a9947e48b84a81040502eb8a80fd2db"><td class="memItemLeft" align="right" valign="top"><a id="a3a9947e48b84a81040502eb8a80fd2db"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a3a9947e48b84a81040502eb8a80fd2db">CLAMP16</a>(value)&#160;&#160;&#160;((value) &amp; 0xFFFF)</td></tr>
<tr class="memdesc:a3a9947e48b84a81040502eb8a80fd2db"><td class="mdescLeft">&#160;</td><td class="mdescRight">How to use just the low 16 bits of an integer value. <br /></td></tr>
<tr class="separator:a3a9947e48b84a81040502eb8a80fd2db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34b9521f09c008920390429dfb1b584b"><td class="memItemLeft" align="right" valign="top"><a id="a34b9521f09c008920390429dfb1b584b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a34b9521f09c008920390429dfb1b584b">HAVE_PAYLOAD</a>(pkt_type)&#160;&#160;&#160;<a class="el" href="live__packet__gather_8c.html#ab344fc3b14e9b7236c6c5cf5cb913c5b">FLAG_IS_SET</a>(pkt_type, 0x1)</td></tr>
<tr class="memdesc:a34b9521f09c008920390429dfb1b584b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does the packet type include a payload? <br /></td></tr>
<tr class="separator:a34b9521f09c008920390429dfb1b584b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23c5500f24b6d542d3839a955a39b07f"><td class="memItemLeft" align="right" valign="top"><a id="a23c5500f24b6d542d3839a955a39b07f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a23c5500f24b6d542d3839a955a39b07f">HAVE_WIDE_LOAD</a>(pkt_type)&#160;&#160;&#160;<a class="el" href="live__packet__gather_8c.html#ab344fc3b14e9b7236c6c5cf5cb913c5b">FLAG_IS_SET</a>(pkt_type, 0x2)</td></tr>
<tr class="memdesc:a23c5500f24b6d542d3839a955a39b07f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does the packet type include a double-width payload? <br /></td></tr>
<tr class="separator:a23c5500f24b6d542d3839a955a39b07f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a473776433ac44bc525b8cd5186969b4b"><td class="memItemLeft" align="right" valign="top"><a id="a473776433ac44bc525b8cd5186969b4b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a473776433ac44bc525b8cd5186969b4b">BUFFER_CAPACITY</a>&#160;&#160;&#160;256</td></tr>
<tr class="memdesc:a473776433ac44bc525b8cd5186969b4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of the circular buffers. <br /></td></tr>
<tr class="separator:a473776433ac44bc525b8cd5186969b4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ab04a0655cd1e3bcac5e8f48c18df1a57"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="live__packet__gather_8c.html#ab04a0655cd1e3bcac5e8f48c18df1a57ad73783ea228c0f1164d4ed5274bc2fc4">MC_PACKET</a> = -1
, <a class="el" href="live__packet__gather_8c.html#ab04a0655cd1e3bcac5e8f48c18df1a57ad645defae8408de2415f3dc417f69773">SDP</a> = 0
, <a class="el" href="live__packet__gather_8c.html#ab04a0655cd1e3bcac5e8f48c18df1a57ae2d30a195cee6b2961cc2c23ea4b520b">USER</a> = 1
, <a class="el" href="live__packet__gather_8c.html#ab04a0655cd1e3bcac5e8f48c18df1a57a6537a62f6f155792bb9a320ee2ec4d68">DMA</a> = 2
, <br />
&#160;&#160;<a class="el" href="live__packet__gather_8c.html#ab04a0655cd1e3bcac5e8f48c18df1a57a17ba9bae1b8d7e8d6c12d46ec58e0769">TIMER</a> = 3
<br />
 }</td></tr>
<tr class="memdesc:ab04a0655cd1e3bcac5e8f48c18df1a57"><td class="mdescLeft">&#160;</td><td class="mdescRight">values for the priority for each callback  <a href="live__packet__gather_8c.html#ab04a0655cd1e3bcac5e8f48c18df1a57">More...</a><br /></td></tr>
<tr class="separator:ab04a0655cd1e3bcac5e8f48c18df1a57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a385c44f6fb256e5716a2302a5b940388"><td class="memItemLeft" align="right" valign="top"><a id="a385c44f6fb256e5716a2302a5b940388"></a>enum &#160;</td><td class="memItemRight" valign="bottom">{ <b>SYSTEM_REGION</b>
, <b>CONFIGURATION_REGION</b>
, <b>PROVENANCE_REGION</b>
 }</td></tr>
<tr class="memdesc:a385c44f6fb256e5716a2302a5b940388"><td class="mdescLeft">&#160;</td><td class="mdescRight">human readable definitions of each region in SDRAM <br /></td></tr>
<tr class="separator:a385c44f6fb256e5716a2302a5b940388"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8260104100d03dd752ed71c07e465cc1"><td class="memItemLeft" align="right" valign="top"><a id="a8260104100d03dd752ed71c07e465cc1"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a8260104100d03dd752ed71c07e465cc1">packet_types</a> { <b>NO_PAYLOAD_16</b>
, <b>PAYLOAD_16</b>
, <b>NO_PAYLOAD_32</b>
, <b>PAYLOAD_32</b>
 }</td></tr>
<tr class="memdesc:a8260104100d03dd752ed71c07e465cc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">EIEIO packet types. <br /></td></tr>
<tr class="separator:a8260104100d03dd752ed71c07e465cc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acbd162cdbf23c1ab211ce557c654c197"><td class="memItemLeft" align="right" valign="top"><a id="acbd162cdbf23c1ab211ce557c654c197"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#acbd162cdbf23c1ab211ce557c654c197">find_translation_entry</a> (uint32_t key, uint32_t *index)</td></tr>
<tr class="memdesc:acbd162cdbf23c1ab211ce557c654c197"><td class="mdescLeft">&#160;</td><td class="mdescRight">find a key translation entry <br /></td></tr>
<tr class="separator:acbd162cdbf23c1ab211ce557c654c197"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4660535f6be71fed2457ac25febfd06"><td class="memItemLeft" align="right" valign="top"><a id="ae4660535f6be71fed2457ac25febfd06"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>translated_key</b> (uint32_t key)</td></tr>
<tr class="separator:ae4660535f6be71fed2457ac25febfd06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae60986adea3f6ccef173be3cc274b75e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#ae60986adea3f6ccef173be3cc274b75e">write_word</a> (void *base, uint32_t index, uint32_t value)</td></tr>
<tr class="memdesc:ae60986adea3f6ccef173be3cc274b75e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Because <em>WHY OH WHY</em> would you use aligned memory? At least with this we don't get data aborts.  <a href="live__packet__gather_8c.html#ae60986adea3f6ccef173be3cc274b75e">More...</a><br /></td></tr>
<tr class="separator:ae60986adea3f6ccef173be3cc274b75e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3f1477bdad4aa157138f3e59addd756"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#ac3f1477bdad4aa157138f3e59addd756">write_short</a> (void *base, uint32_t index, uint32_t value)</td></tr>
<tr class="memdesc:ac3f1477bdad4aa157138f3e59addd756"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple mirror of <a class="el" href="live__packet__gather_8c.html#ae60986adea3f6ccef173be3cc274b75e" title="Because WHY OH WHY would you use aligned memory? At least with this we don&#39;t get data aborts.">write_word()</a> for true 16 bit values.  <a href="live__packet__gather_8c.html#ac3f1477bdad4aa157138f3e59addd756">More...</a><br /></td></tr>
<tr class="separator:ac3f1477bdad4aa157138f3e59addd756"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5906c85e43705fffff518405fce2e630"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a5906c85e43705fffff518405fce2e630">get_event_count</a> (void)</td></tr>
<tr class="memdesc:a5906c85e43705fffff518405fce2e630"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get how many events there are waiting to be sent.  <a href="live__packet__gather_8c.html#a5906c85e43705fffff518405fce2e630">More...</a><br /></td></tr>
<tr class="separator:a5906c85e43705fffff518405fce2e630"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91cdc1c4e765f059eab4831e97c9af38"><td class="memItemLeft" align="right" valign="top"><a id="a91cdc1c4e765f059eab4831e97c9af38"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a91cdc1c4e765f059eab4831e97c9af38">flush_events</a> (void)</td></tr>
<tr class="memdesc:a91cdc1c4e765f059eab4831e97c9af38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send buffered events to host via SDP AER message and clear internal buffers. <br /></td></tr>
<tr class="separator:a91cdc1c4e765f059eab4831e97c9af38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d1a0e5db4fd68f79657a9afd4ebdfdd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a6d1a0e5db4fd68f79657a9afd4ebdfdd">record_provenance_data</a> (<a class="el" href="common-typedefs_8h.html#ac8dc08dd5f5827994d1b06351f925669">address_t</a> provenance_region_address)</td></tr>
<tr class="memdesc:a6d1a0e5db4fd68f79657a9afd4ebdfdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store provenance data elements into SDRAM.  <a href="live__packet__gather_8c.html#a6d1a0e5db4fd68f79657a9afd4ebdfdd">More...</a><br /></td></tr>
<tr class="separator:a6d1a0e5db4fd68f79657a9afd4ebdfdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa51de182df34173453b5d99dcd2ffedc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#aa51de182df34173453b5d99dcd2ffedc">timer_callback</a> (<a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused0, <a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused1)</td></tr>
<tr class="memdesc:aa51de182df34173453b5d99dcd2ffedc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Periodic timer callback.  <a href="live__packet__gather_8c.html#aa51de182df34173453b5d99dcd2ffedc">More...</a><br /></td></tr>
<tr class="separator:aa51de182df34173453b5d99dcd2ffedc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad667297628644c302e04d8db4a95c19f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#ad667297628644c302e04d8db4a95c19f">flush_events_if_full</a> (void)</td></tr>
<tr class="memdesc:ad667297628644c302e04d8db4a95c19f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush events to the outside world if our internal buffers are now full.  <a href="live__packet__gather_8c.html#ad667297628644c302e04d8db4a95c19f">More...</a><br /></td></tr>
<tr class="separator:ad667297628644c302e04d8db4a95c19f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98afe58f49858b0e6abf03cf5d428daf"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a98afe58f49858b0e6abf03cf5d428daf">process_incoming_event</a> (<a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> key)</td></tr>
<tr class="memdesc:a98afe58f49858b0e6abf03cf5d428daf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes an incoming multicast packet without payload.  <a href="live__packet__gather_8c.html#a98afe58f49858b0e6abf03cf5d428daf">More...</a><br /></td></tr>
<tr class="separator:a98afe58f49858b0e6abf03cf5d428daf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab78bc1a282a2780529d544e3152eb40d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#ab78bc1a282a2780529d544e3152eb40d">process_incoming_event_payload</a> (<a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> key, <a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> payload)</td></tr>
<tr class="memdesc:ab78bc1a282a2780529d544e3152eb40d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes an incoming multicast packet with payload.  <a href="live__packet__gather_8c.html#ab78bc1a282a2780529d544e3152eb40d">More...</a><br /></td></tr>
<tr class="separator:ab78bc1a282a2780529d544e3152eb40d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb128103c5a51261c2c900b00b9d7e57"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#aeb128103c5a51261c2c900b00b9d7e57">incoming_event_process_callback</a> (<a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused0, <a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused1)</td></tr>
<tr class="memdesc:aeb128103c5a51261c2c900b00b9d7e57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for processing incoming packets that have been locally queued.  <a href="live__packet__gather_8c.html#aeb128103c5a51261c2c900b00b9d7e57">More...</a><br /></td></tr>
<tr class="separator:aeb128103c5a51261c2c900b00b9d7e57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af672f0dc4d9950e71de65e3eb28f2571"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#af672f0dc4d9950e71de65e3eb28f2571">incoming_event_callback</a> (<a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> key, <a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused)</td></tr>
<tr class="memdesc:af672f0dc4d9950e71de65e3eb28f2571"><td class="mdescLeft">&#160;</td><td class="mdescRight">FIQ handler for incoming packets without payload.  <a href="live__packet__gather_8c.html#af672f0dc4d9950e71de65e3eb28f2571">More...</a><br /></td></tr>
<tr class="separator:af672f0dc4d9950e71de65e3eb28f2571"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5781513c66ebf0173e0225b196c50d6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#ad5781513c66ebf0173e0225b196c50d6">incoming_event_payload_callback</a> (<a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> key, <a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> payload)</td></tr>
<tr class="memdesc:ad5781513c66ebf0173e0225b196c50d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">FIQ handler for incoming packets with payload.  <a href="live__packet__gather_8c.html#ad5781513c66ebf0173e0225b196c50d6">More...</a><br /></td></tr>
<tr class="separator:ad5781513c66ebf0173e0225b196c50d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a5d89e78ed08d87f86461d0282874fc"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a8a5d89e78ed08d87f86461d0282874fc">read_parameters</a> (struct <a class="el" href="live__packet__gather_8c.html#structlpg__config">lpg_config</a> *sdram_config)</td></tr>
<tr class="memdesc:a8a5d89e78ed08d87f86461d0282874fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies the application configuration from DSG SDRAM to DTCM.  <a href="live__packet__gather_8c.html#a8a5d89e78ed08d87f86461d0282874fc">More...</a><br /></td></tr>
<tr class="separator:a8a5d89e78ed08d87f86461d0282874fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37f0b2315f3101f6ff9936c212c5bd84"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a37f0b2315f3101f6ff9936c212c5bd84">initialize</a> (uint32_t *timer_period)</td></tr>
<tr class="memdesc:a37f0b2315f3101f6ff9936c212c5bd84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the application.  <a href="live__packet__gather_8c.html#a37f0b2315f3101f6ff9936c212c5bd84">More...</a><br /></td></tr>
<tr class="separator:a37f0b2315f3101f6ff9936c212c5bd84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a554b877e3ddc85972d6d33313611b08e"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a554b877e3ddc85972d6d33313611b08e">configure_sdp_msg</a> (void)</td></tr>
<tr class="memdesc:a554b877e3ddc85972d6d33313611b08e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up the AER EIEIO data message.  <a href="live__packet__gather_8c.html#a554b877e3ddc85972d6d33313611b08e">More...</a><br /></td></tr>
<tr class="separator:a554b877e3ddc85972d6d33313611b08e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa14f4f1d4c84183b7bf7108bf930a23c"><td class="memItemLeft" align="right" valign="top"><a id="aa14f4f1d4c84183b7bf7108bf930a23c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#aa14f4f1d4c84183b7bf7108bf930a23c">c_main</a> (void)</td></tr>
<tr class="memdesc:aa14f4f1d4c84183b7bf7108bf930a23c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Entry point. <br /></td></tr>
<tr class="separator:aa14f4f1d4c84183b7bf7108bf930a23c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a02b41ea066f6bcd048432b113bd5edbf"><td class="memItemLeft" align="right" valign="top"><a id="a02b41ea066f6bcd048432b113bd5edbf"></a>
static <a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html">sdp_msg_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a02b41ea066f6bcd048432b113bd5edbf">g_event_message</a></td></tr>
<tr class="memdesc:a02b41ea066f6bcd048432b113bd5edbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">The SDP message that we will send. <br /></td></tr>
<tr class="separator:a02b41ea066f6bcd048432b113bd5edbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88602dba84a3488743c07f3ffa417791"><td class="memItemLeft" align="right" valign="top"><a id="a88602dba84a3488743c07f3ffa417791"></a>
static uint16_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a88602dba84a3488743c07f3ffa417791">sdp_msg_aer_header</a></td></tr>
<tr class="memdesc:a88602dba84a3488743c07f3ffa417791"><td class="mdescLeft">&#160;</td><td class="mdescRight">The location of the EIEIO header in the message. <br /></td></tr>
<tr class="separator:a88602dba84a3488743c07f3ffa417791"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74ea269cc74583bc5da3e46ff4346b18"><td class="memItemLeft" align="right" valign="top"><a id="a74ea269cc74583bc5da3e46ff4346b18"></a>
static uint16_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a74ea269cc74583bc5da3e46ff4346b18">sdp_msg_aer_payload_prefix</a> = <a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="memdesc:a74ea269cc74583bc5da3e46ff4346b18"><td class="mdescLeft">&#160;</td><td class="mdescRight">The location of the payload prefix in the message. <code>NULL</code> if no prefix. <br /></td></tr>
<tr class="separator:a74ea269cc74583bc5da3e46ff4346b18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a269df62d3476d6450e2eb2da339a686d"><td class="memItemLeft" align="right" valign="top"><a id="a269df62d3476d6450e2eb2da339a686d"></a>
static uint16_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a269df62d3476d6450e2eb2da339a686d">sdp_msg_aer_data</a></td></tr>
<tr class="memdesc:a269df62d3476d6450e2eb2da339a686d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to outbound message data. <em>Might only be half-word aligned!</em> <br /></td></tr>
<tr class="separator:a269df62d3476d6450e2eb2da339a686d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae73654f333e4363463ad8c594eca1905"><td class="memItemLeft" align="right" valign="top"><a id="ae73654f333e4363463ad8c594eca1905"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#ae73654f333e4363463ad8c594eca1905">time</a></td></tr>
<tr class="memdesc:ae73654f333e4363463ad8c594eca1905"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current simulation time. <br /></td></tr>
<tr class="separator:ae73654f333e4363463ad8c594eca1905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad51d37ac38989c1d089da8aa0d1bc1d7"><td class="memItemLeft" align="right" valign="top"><a id="ad51d37ac38989c1d089da8aa0d1bc1d7"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#ad51d37ac38989c1d089da8aa0d1bc1d7">packets_sent</a></td></tr>
<tr class="memdesc:ad51d37ac38989c1d089da8aa0d1bc1d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of packets sent so far this timestamp. <br /></td></tr>
<tr class="separator:ad51d37ac38989c1d089da8aa0d1bc1d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05d3201c3d91255f8190d1e4901ab7de"><td class="memItemLeft" align="right" valign="top"><a id="a05d3201c3d91255f8190d1e4901ab7de"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a05d3201c3d91255f8190d1e4901ab7de">buffer_index</a></td></tr>
<tr class="memdesc:a05d3201c3d91255f8190d1e4901ab7de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index into our buffer in <a class="el" href="live__packet__gather_8c.html#a269df62d3476d6450e2eb2da339a686d" title="Pointer to outbound message data. Might only be half-word aligned!">sdp_msg_aer_data</a>. <br /></td></tr>
<tr class="separator:a05d3201c3d91255f8190d1e4901ab7de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3db3309d002eb741f212a6c4d77f6cd"><td class="memItemLeft" align="right" valign="top"><a id="ae3db3309d002eb741f212a6c4d77f6cd"></a>
static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#ae3db3309d002eb741f212a6c4d77f6cd">eieio_constant_header</a></td></tr>
<tr class="memdesc:ae3db3309d002eb741f212a6c4d77f6cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Part of the generic EIEIO header that is constant. <br /></td></tr>
<tr class="separator:ae3db3309d002eb741f212a6c4d77f6cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed550e70a474537d79fe36829e4f67e2"><td class="memItemLeft" align="right" valign="top"><a id="aed550e70a474537d79fe36829e4f67e2"></a>
static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#aed550e70a474537d79fe36829e4f67e2">event_size</a></td></tr>
<tr class="memdesc:aed550e70a474537d79fe36829e4f67e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of an individual event. <br /></td></tr>
<tr class="separator:aed550e70a474537d79fe36829e4f67e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c45fde16b1cb31f7410a8ed4baf2a66"><td class="memItemLeft" align="right" valign="top"><a id="a2c45fde16b1cb31f7410a8ed4baf2a66"></a>
static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a2c45fde16b1cb31f7410a8ed4baf2a66">sdp_msg_aer_header_len</a></td></tr>
<tr class="memdesc:a2c45fde16b1cb31f7410a8ed4baf2a66"><td class="mdescLeft">&#160;</td><td class="mdescRight">The length of the header, in bytes. <br /></td></tr>
<tr class="separator:a2c45fde16b1cb31f7410a8ed4baf2a66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2178bb4764f423b1534a9631b0cc6e5e"><td class="memItemLeft" align="right" valign="top"><a id="a2178bb4764f423b1534a9631b0cc6e5e"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a2178bb4764f423b1534a9631b0cc6e5e">simulation_ticks</a> = 0</td></tr>
<tr class="memdesc:a2178bb4764f423b1534a9631b0cc6e5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">When we will run until. <br /></td></tr>
<tr class="separator:a2178bb4764f423b1534a9631b0cc6e5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ee6c18f2c55e2b60ea4194d4722f735"><td class="memItemLeft" align="right" valign="top"><a id="a9ee6c18f2c55e2b60ea4194d4722f735"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a9ee6c18f2c55e2b60ea4194d4722f735">infinite_run</a> = <a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></td></tr>
<tr class="memdesc:a9ee6c18f2c55e2b60ea4194d4722f735"><td class="mdescLeft">&#160;</td><td class="mdescRight">TRUE if we're running without bound. FALSE if we're only running for a limited period of time. <br /></td></tr>
<tr class="separator:a9ee6c18f2c55e2b60ea4194d4722f735"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5672e37e363e98e6053064ec9532cb7d"><td class="memItemLeft" align="right" valign="top"><a id="a5672e37e363e98e6053064ec9532cb7d"></a>
static <a class="elRef" href="http://spinnakermanchester.github.io/spinn_common/circular__buffer_8h.html#a549d5bcaed4164249aee6a6828a51e6f">circular_buffer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a5672e37e363e98e6053064ec9532cb7d">without_payload_buffer</a></td></tr>
<tr class="memdesc:a5672e37e363e98e6053064ec9532cb7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Circular buffer of incoming multicast packets that lack payloads. <br /></td></tr>
<tr class="separator:a5672e37e363e98e6053064ec9532cb7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abadd6fad1a586f95ded2bde05611c848"><td class="memItemLeft" align="right" valign="top"><a id="abadd6fad1a586f95ded2bde05611c848"></a>
static <a class="elRef" href="http://spinnakermanchester.github.io/spinn_common/circular__buffer_8h.html#a549d5bcaed4164249aee6a6828a51e6f">circular_buffer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#abadd6fad1a586f95ded2bde05611c848">with_payload_buffer</a></td></tr>
<tr class="memdesc:abadd6fad1a586f95ded2bde05611c848"><td class="mdescLeft">&#160;</td><td class="mdescRight">Circular buffer of incoming multicast packets that have payloads. <br /></td></tr>
<tr class="separator:abadd6fad1a586f95ded2bde05611c848"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d64a3afb9a87c1f7cfe42fb6387e24f"><td class="memItemLeft" align="right" valign="top"><a id="a7d64a3afb9a87c1f7cfe42fb6387e24f"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a7d64a3afb9a87c1f7cfe42fb6387e24f">processing_events</a> = false</td></tr>
<tr class="memdesc:a7d64a3afb9a87c1f7cfe42fb6387e24f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether we are processing events (or discarding them). <br /></td></tr>
<tr class="separator:a7d64a3afb9a87c1f7cfe42fb6387e24f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a438f9cdfcf84ec078f51f63d0f178da2"><td class="memItemLeft" align="right" valign="top"><a id="a438f9cdfcf84ec078f51f63d0f178da2"></a>
static <a class="el" href="live__packet__gather_8c.html#structlpg__provenance__data__t">lpg_provenance_data_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#a438f9cdfcf84ec078f51f63d0f178da2">provenance_data</a></td></tr>
<tr class="memdesc:a438f9cdfcf84ec078f51f63d0f178da2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The provenance information that we are collecting. <br /></td></tr>
<tr class="separator:a438f9cdfcf84ec078f51f63d0f178da2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accee749453357a6804a221bc1e2e2f4a"><td class="memItemLeft" align="right" valign="top"><a id="accee749453357a6804a221bc1e2e2f4a"></a>
static struct <a class="el" href="live__packet__gather_8c.html#structlpg__config">lpg_config</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="live__packet__gather_8c.html#accee749453357a6804a221bc1e2e2f4a">config</a></td></tr>
<tr class="memdesc:accee749453357a6804a221bc1e2e2f4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The configuration data of the application. <br /></td></tr>
<tr class="separator:accee749453357a6804a221bc1e2e2f4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The implementation of the Live Packet Gatherer. </p>
<p>The purpose of this application is to allow recorded information to be streamed out of SpiNNaker in real time. It does not scale very well, as SpiNNaker's aggregate internal state can change with a much higher bandwidth than its external networking can handle. </p>

<p class="definition">Definition in file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>
</div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structlpg__provenance__data__t" id="structlpg__provenance__data__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structlpg__provenance__data__t">&#9670;&nbsp;</a></span>lpg_provenance_data_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct lpg_provenance_data_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Provenance data store. </p>

<p class="definition">Definition at line <a class="el" href="live__packet__gather_8c_source.html#l00035">35</a> of file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="abe7b3bf1375e6fd641e05e52263edba1"></a>uint32_t</td>
<td class="fieldname">
number_of_overflows_no_payload</td>
<td class="fielddoc">
Count of overflows when no payload was sent. </td></tr>
<tr><td class="fieldtype">
<a id="ae8d1a4893f6cde2455ad0c684afa855c"></a>uint32_t</td>
<td class="fieldname">
number_of_overflows_with_payload</td>
<td class="fielddoc">
Count of overflows when a payload was sent. </td></tr>
<tr><td class="fieldtype">
<a id="adedfb944942376c0398e2aafb689c7f3"></a>uint32_t</td>
<td class="fieldname">
number_of_gathered_events</td>
<td class="fielddoc">
Number of events gathered and recorded. </td></tr>
<tr><td class="fieldtype">
<a id="acc2a30c37625649671b3547462b24fe0"></a>uint32_t</td>
<td class="fieldname">
number_of_sent_messages</td>
<td class="fielddoc">
Number of messages sent to host. </td></tr>
</table>

</div>
</div>
<a name="structkey__translation__entry" id="structkey__translation__entry"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structkey__translation__entry">&#9670;&nbsp;</a></span>key_translation_entry</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct key_translation_entry</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="live__packet__gather_8c_source.html#l00046">46</a> of file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a7aba5f067baef85f50223a0cefc4ce6f"></a>uint32_t</td>
<td class="fieldname">
key</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a94130c98daf3a8fb64081c10cf585d25"></a>uint32_t</td>
<td class="fieldname">
mask</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ae3682ff79f1c2c54ea3fa5309ca7ab74"></a>uint32_t</td>
<td class="fieldname">
lo_atom</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="structlpg__config" id="structlpg__config"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structlpg__config">&#9670;&nbsp;</a></span>lpg_config</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct lpg_config</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Definitions of each element in the configuration. </p>
<p>This is copied from SDRAM into DTCM for speed. </p>

<p class="definition">Definition at line <a class="el" href="live__packet__gather_8c_source.html#l00058">58</a> of file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="af0b7923976db1f1037c17a3aeeaac926"></a>uint32_t</td>
<td class="fieldname">
apply_prefix</td>
<td class="fielddoc">
P bit. </td></tr>
<tr><td class="fieldtype">
<a id="ad6ef9bbb9baaf08361132c79d5d941a1"></a>uint32_t</td>
<td class="fieldname">
prefix</td>
<td class="fielddoc">
Prefix data. </td></tr>
<tr><td class="fieldtype">
<a id="af5f8cd5859354316f935262edce50b54"></a>uint32_t</td>
<td class="fieldname">
prefix_type</td>
<td class="fielddoc">
Type bits. </td></tr>
<tr><td class="fieldtype">
<a id="ad6b0aa6957bca64eab234241e9eea3b3"></a>uint32_t</td>
<td class="fieldname">
packet_type</td>
<td class="fielddoc">
F bit (for the receiver) </td></tr>
<tr><td class="fieldtype">
<a id="a4aa4a07e5f9370a9cb21a6c4ebef8ac8"></a>uint32_t</td>
<td class="fieldname">
key_right_shift</td>
<td class="fielddoc">
Right payload shift (for the sender) </td></tr>
<tr><td class="fieldtype">
<a id="aa8c462352a0325ca958fa3b3846f5fc7"></a>uint32_t</td>
<td class="fieldname">
payload_timestamp</td>
<td class="fielddoc">
T bit. </td></tr>
<tr><td class="fieldtype">
<a id="a31a8fcd906509947dc8e392c72ed1fc8"></a>uint32_t</td>
<td class="fieldname">
payload_apply_prefix</td>
<td class="fielddoc">
D bit. </td></tr>
<tr><td class="fieldtype">
<a id="a0cec67da3c51b93cba9b73c092cb0e4a"></a>uint32_t</td>
<td class="fieldname">
payload_prefix</td>
<td class="fielddoc">
Payload prefix data (for the receiver) </td></tr>
<tr><td class="fieldtype">
<a id="aba62f5477f004ff7e99abc9e38c86d1f"></a>uint32_t</td>
<td class="fieldname">
payload_right_shift</td>
<td class="fielddoc">
Right payload shift (for the sender) </td></tr>
<tr><td class="fieldtype">
<a id="aa9c486bb946e90d9691d567302ef821b"></a>uint32_t</td>
<td class="fieldname">
sdp_tag</td>
<td class="fielddoc">
SDP tag to use when sending. </td></tr>
<tr><td class="fieldtype">
<a id="a0360b5efd051469b543f86e23c94e9f2"></a>uint32_t</td>
<td class="fieldname">
sdp_dest</td>
<td class="fielddoc">
SDP destination to use when sending. </td></tr>
<tr><td class="fieldtype">
<a id="ae0b3473b85793cfd723d1e7517d8bacf"></a>uint32_t</td>
<td class="fieldname">
packets_per_timestamp</td>
<td class="fielddoc">
Maximum number of packets to send per timestep, or 0 for "send them all". </td></tr>
<tr><td class="fieldtype">
<a id="a183d06f559edc256f05ebce4fb04aec9"></a>uint32_t</td>
<td class="fieldname">
received_key_mask</td>
<td class="fielddoc">
Mask to apply to non-translated keys. </td></tr>
<tr><td class="fieldtype">
<a id="a59489a9fe562c9af5e9de0494ccfe0cb"></a>uint32_t</td>
<td class="fieldname">
translated_key_right_shift</td>
<td class="fielddoc">
Shift to apply to received and translated keys. </td></tr>
<tr><td class="fieldtype">
<a id="a06401e8fe3455e2c8078619e044fb2b9"></a>uint32_t</td>
<td class="fieldname">
n_translation_entries</td>
<td class="fielddoc">
The number of entries in the translation table. </td></tr>
<tr><td class="fieldtype">
<a id="a04645540e6e648f79c2244f29f73be6d"></a><a class="el" href="live__packet__gather_8c.html#structkey__translation__entry">key_translation_entry</a></td>
<td class="fieldname">
translation_table[]</td>
<td class="fielddoc">
Translation table. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ab04a0655cd1e3bcac5e8f48c18df1a57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab04a0655cd1e3bcac5e8f48c18df1a57">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>values for the priority for each callback </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ab04a0655cd1e3bcac5e8f48c18df1a57ad73783ea228c0f1164d4ed5274bc2fc4"></a>MC_PACKET&#160;</td><td class="fielddoc"><p>Multicast packet interrupt uses FIQ (super high prio) </p>
</td></tr>
<tr><td class="fieldname"><a id="ab04a0655cd1e3bcac5e8f48c18df1a57ad645defae8408de2415f3dc417f69773"></a>SDP&#160;</td><td class="fielddoc"><p>SDP interrupt is highest priority. </p>
</td></tr>
<tr><td class="fieldname"><a id="ab04a0655cd1e3bcac5e8f48c18df1a57ae2d30a195cee6b2961cc2c23ea4b520b"></a>USER&#160;</td><td class="fielddoc"><p>Interrupt for enqueued list of received packets. </p>
</td></tr>
<tr><td class="fieldname"><a id="ab04a0655cd1e3bcac5e8f48c18df1a57a6537a62f6f155792bb9a320ee2ec4d68"></a>DMA&#160;</td><td class="fielddoc"><p>DMA complete interrupt is low priority. </p>
</td></tr>
<tr><td class="fieldname"><a id="ab04a0655cd1e3bcac5e8f48c18df1a57a17ba9bae1b8d7e8d6c12d46ec58e0769"></a>TIMER&#160;</td><td class="fielddoc"><p>Timer interrupt is lowest priority. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="live__packet__gather_8c_source.html#l00094">94</a> of file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae60986adea3f6ccef173be3cc274b75e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae60986adea3f6ccef173be3cc274b75e">&#9670;&nbsp;</a></span>write_word()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void write_word </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Because <em>WHY OH WHY</em> would you use aligned memory? At least with this we don't get data aborts. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">base</td><td>Buffer to write in. <em>Only guaranteed to be half-word aligned.</em> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>Offset in count of <em>words</em> into the buffer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>Value to write in (as little-endian). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="live__packet__gather_8c_source.html#l00239">239</a> of file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>

</div>
</div>
<a id="ac3f1477bdad4aa157138f3e59addd756"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3f1477bdad4aa157138f3e59addd756">&#9670;&nbsp;</a></span>write_short()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void write_short </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Simple mirror of <a class="el" href="live__packet__gather_8c.html#ae60986adea3f6ccef173be3cc274b75e" title="Because WHY OH WHY would you use aligned memory? At least with this we don&#39;t get data aborts.">write_word()</a> for true 16 bit values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">base</td><td>place to write to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>location in base to write to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>the value to write to the base. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="live__packet__gather_8c_source.html#l00250">250</a> of file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>

</div>
</div>
<a id="a5906c85e43705fffff518405fce2e630"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5906c85e43705fffff518405fce2e630">&#9670;&nbsp;</a></span>get_event_count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t get_event_count </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get how many events there are waiting to be sent. </p>
<dl class="section return"><dt>Returns</dt><dd>The number of events waiting </dd></dl>

<p class="definition">Definition at line <a class="el" href="live__packet__gather_8c_source.html#l00257">257</a> of file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>

</div>
</div>
<a id="a6d1a0e5db4fd68f79657a9afd4ebdfdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d1a0e5db4fd68f79657a9afd4ebdfdd">&#9670;&nbsp;</a></span>record_provenance_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void record_provenance_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="common-typedefs_8h.html#ac8dc08dd5f5827994d1b06351f925669">address_t</a>&#160;</td>
          <td class="paramname"><em>provenance_region_address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Store provenance data elements into SDRAM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">provenance_region_address</td><td>Where the provenance data will be written </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="live__packet__gather_8c_source.html#l00304">304</a> of file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>

</div>
</div>
<a id="aa51de182df34173453b5d99dcd2ffedc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa51de182df34173453b5d99dcd2ffedc">&#9670;&nbsp;</a></span>timer_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void timer_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>unused0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>unused1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Periodic timer callback. </p>
<p>Forces all events to be sent at least on the timer tick (calling <a class="el" href="live__packet__gather_8c.html#a91cdc1c4e765f059eab4831e97c9af38" title="Send buffered events to host via SDP AER message and clear internal buffers.">flush_events()</a>) and handles pausing as required.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">unused0</td><td>unused </td></tr>
    <tr><td class="paramname">unused1</td><td>unused </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="live__packet__gather_8c_source.html#l00318">318</a> of file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>

</div>
</div>
<a id="ad667297628644c302e04d8db4a95c19f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad667297628644c302e04d8db4a95c19f">&#9670;&nbsp;</a></span>flush_events_if_full()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void flush_events_if_full </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flush events to the outside world if our internal buffers are now full. </p>
<p>Calls <a class="el" href="live__packet__gather_8c.html#a91cdc1c4e765f059eab4831e97c9af38" title="Send buffered events to host via SDP AER message and clear internal buffers.">flush_events()</a> to do the flush. </p>

<p class="definition">Definition at line <a class="el" href="live__packet__gather_8c_source.html#l00345">345</a> of file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>

</div>
</div>
<a id="a98afe58f49858b0e6abf03cf5d428daf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98afe58f49858b0e6abf03cf5d428daf">&#9670;&nbsp;</a></span>process_incoming_event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void process_incoming_event </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Processes an incoming multicast packet without payload. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>The key of the packet. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="live__packet__gather_8c_source.html#l00353">353</a> of file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>

</div>
</div>
<a id="ab78bc1a282a2780529d544e3152eb40d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab78bc1a282a2780529d544e3152eb40d">&#9670;&nbsp;</a></span>process_incoming_event_payload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void process_incoming_event_payload </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>payload</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Processes an incoming multicast packet with payload. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>The key of the packet. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload</td><td>The payload word of the packet. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="live__packet__gather_8c_source.html#l00385">385</a> of file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>

</div>
</div>
<a id="aeb128103c5a51261c2c900b00b9d7e57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb128103c5a51261c2c900b00b9d7e57">&#9670;&nbsp;</a></span>incoming_event_process_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void incoming_event_process_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>unused0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>unused1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handler for processing incoming packets that have been locally queued. </p>
<p>Triggered by calling <a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8c.html#a19505c72d4618b8c00646d4dff1a328f">spin1_trigger_user_event()</a> in <a class="el" href="live__packet__gather_8c.html#af672f0dc4d9950e71de65e3eb28f2571" title="FIQ handler for incoming packets without payload.">incoming_event_callback()</a> and <a class="el" href="live__packet__gather_8c.html#ad5781513c66ebf0173e0225b196c50d6" title="FIQ handler for incoming packets with payload.">incoming_event_payload_callback()</a>, which (being attached to the FIQ) just enqueue messages for later handling. Delegates to <a class="el" href="live__packet__gather_8c.html#a98afe58f49858b0e6abf03cf5d428daf" title="Processes an incoming multicast packet without payload.">process_incoming_event()</a> and <a class="el" href="live__packet__gather_8c.html#ab78bc1a282a2780529d544e3152eb40d" title="Processes an incoming multicast packet with payload.">process_incoming_event_payload()</a> for actual processing.</p>
<p>Packets without payload are slightly higher priority than packets with payload.</p>
<p>Sends multiple SDP packets if required.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">unused0</td><td>Ignored </td></tr>
    <tr><td class="paramname">unused1</td><td>Ignored </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="live__packet__gather_8c_source.html#l00430">430</a> of file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>

</div>
</div>
<a id="af672f0dc4d9950e71de65e3eb28f2571"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af672f0dc4d9950e71de65e3eb28f2571">&#9670;&nbsp;</a></span>incoming_event_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void incoming_event_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>unused</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>FIQ handler for incoming packets without payload. </p>
<p>Just enqueues them for later handling by <a class="el" href="live__packet__gather_8c.html#aeb128103c5a51261c2c900b00b9d7e57" title="Handler for processing incoming packets that have been locally queued.">incoming_event_process_callback()</a>, which will hand off to <a class="el" href="live__packet__gather_8c.html#a98afe58f49858b0e6abf03cf5d428daf" title="Processes an incoming multicast packet without payload.">process_incoming_event()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>The key of the incoming packet. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">unused</td><td>unused </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="live__packet__gather_8c_source.html#l00459">459</a> of file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>

</div>
</div>
<a id="ad5781513c66ebf0173e0225b196c50d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5781513c66ebf0173e0225b196c50d6">&#9670;&nbsp;</a></span>incoming_event_payload_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void incoming_event_payload_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>payload</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>FIQ handler for incoming packets with payload. </p>
<p>Just enqueues them for later handling by <a class="el" href="live__packet__gather_8c.html#aeb128103c5a51261c2c900b00b9d7e57" title="Handler for processing incoming packets that have been locally queued.">incoming_event_process_callback()</a>, which will hand off to <a class="el" href="live__packet__gather_8c.html#ab78bc1a282a2780529d544e3152eb40d" title="Processes an incoming multicast packet with payload.">process_incoming_event_payload()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>The key of the incoming packet. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload</td><td>The payload word of the incoming packet. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="live__packet__gather_8c_source.html#l00479">479</a> of file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>

</div>
</div>
<a id="a8a5d89e78ed08d87f86461d0282874fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a5d89e78ed08d87f86461d0282874fc">&#9670;&nbsp;</a></span>read_parameters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool read_parameters </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="live__packet__gather_8c.html#structlpg__config">lpg_config</a> *&#160;</td>
          <td class="paramname"><em>sdram_config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copies the application configuration from DSG SDRAM to DTCM. </p>
<p>Note that it's faster to copy by field than to use <a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8c.html#a8c23f19c28f2c3ed0a9b86ce8c98802d">spin1_memcpy()</a>!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sdram_config</td><td>Where to copy from </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="live__packet__gather_8c_source.html#l00498">498</a> of file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>

</div>
</div>
<a id="a37f0b2315f3101f6ff9936c212c5bd84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37f0b2315f3101f6ff9936c212c5bd84">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool initialize </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>timer_period</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialise the application. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">timer_period</td><td>Value for programming the timer ticks. <em>A pointer to this variable is retained by the simulation framework.</em> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if initialisation succeeds. </dd></dl>

<p class="definition">Definition at line <a class="el" href="live__packet__gather_8c_source.html#l00535">535</a> of file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>

</div>
</div>
<a id="a554b877e3ddc85972d6d33313611b08e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a554b877e3ddc85972d6d33313611b08e">&#9670;&nbsp;</a></span>configure_sdp_msg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool configure_sdp_msg </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets up the AER EIEIO data message. </p>
<dl class="section return"><dt>Returns</dt><dd>bool where True was successful init and false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="live__packet__gather_8c_source.html#l00568">568</a> of file <a class="el" href="live__packet__gather_8c_source.html">live_packet_gather.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
