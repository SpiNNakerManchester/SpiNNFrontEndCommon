<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SpiNNFrontEndCommon: models/compressors/src/sorter/bit_field_sorter_and_searcher.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SpiNNFrontEndCommon
   &#160;<span id="projectnumber">5.1.1</span>
   </div>
   <div id="projectbrief">Common support code for user-facing front end systems.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_1ae4179d5e953611aae20c997279e02c.html">models</a></li><li class="navelem"><a class="el" href="dir_4d48dcb52c1129c7f295596471d8e2b3.html">compressors</a></li><li class="navelem"><a class="el" href="dir_e84f3a1393fbcf8a053f50eb9c57fc65.html">src</a></li><li class="navelem"><a class="el" href="dir_2bf0e43e0c5ffbd81f9578f776dcf470.html">sorter</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">bit_field_sorter_and_searcher.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="bit__field__sorter__and__searcher_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2019-2020 The University of Manchester</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * This program is free software: you can redistribute it and/or modify</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * (at your option) any later version.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * GNU General Public License for more details.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;<a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html">spin1_api.h</a>&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="debug_8h.html">debug.h</a>&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;<a class="codeRef" href="http://spinnakermanchester.github.io/spinn_common/bit__field_8h.html">bit_field.h</a>&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;<a class="codeRef" href="http://spinnakermanchester.github.io/spinn_common/circular__buffer_8h.html">circular_buffer.h</a>&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="data__specification_8h.html">data_specification.h</a>&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="malloc__extras_8h.html">malloc_extras.h</a>&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="common-typedefs_8h.html">common-typedefs.h</a>&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="constants_8h.html">common/constants.h</a>&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="routing__table_8h.html">common/routing_table.h</a>&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="routing__tables__utils_8h.html">bit_field_common/routing_tables_utils.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="compressor__sorter__structs_8h.html">bit_field_common/compressor_sorter_structs.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="bit__field__table__generator_8h.html">bit_field_common/bit_field_table_generator.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="bit__field__reader_8h.html">bit_field_reader.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">//============================================================================</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">// #defines and enums</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a65fd90f232757535f02c46a885e49012">   43</a></span>&#160;<span class="preprocessor">#define TIME_STEP 1000</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#acf36c228ebab2d1aeea784bd9f6660f3">   46</a></span>&#160;<span class="preprocessor">#define KILL_TIME 20000</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a65b6025151a6ae83a91d2e39fdd63a54">   49</a></span>&#160;<span class="preprocessor">#define SDRAM_POLL_DELAY 50</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a605487b6ac6afbca9f5f5ff329698731">   52</a></span>&#160;<span class="preprocessor">#define SDRAM_POLL_ATTEMPTS 20</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ad3147e0fb533cf1158003dd6cf0c5d45">   55</a></span>&#160;<span class="preprocessor">#define ADD_INCLUSIVE_BIT 1</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a947e5c5e068c20feb3d0470199964f37">   58</a></span>&#160;<span class="preprocessor">#define RTR_MC_FAILED 0</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a886d527c16dc0e3986b31801ca0dec69">   61</a></span>&#160;<span class="preprocessor">#define ROUTE_APP_ID_BIT_SHIFT 24</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276">   64</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276">priorities</a> {</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276ae4b1a013c32305821940ce11363cb879">   65</a></span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276ae4b1a013c32305821940ce11363cb879">COMPRESSION_START_PRIORITY</a> = 3, </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276a141de7322a9c4947e64a2da966a4b1ef">TIMER_TICK_PRIORITY</a> = 0     </div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276a141de7322a9c4947e64a2da966a4b1ef">   67</a></span>&#160;} <a class="code" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276">priorities</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">//============================================================================</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">// global params</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">   73</a></span>&#160;uint32_t <a class="code" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a> = 0;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">   76</a></span>&#160;<span class="keyword">volatile</span> <span class="keywordtype">bool</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">terminated</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">   80</a></span>&#160;<a class="code" href="compressor__sorter__structs_8h.html#structuncompressed__table__region__data__t">uncompressed_table_region_data_t</a> *restrict <a class="code" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">   84</a></span>&#160;<a class="code" href="compressor__sorter__structs_8h.html#structregion__addresses__t">region_addresses_t</a> *restrict <a class="code" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ac2f679e18140a40be26be97edb8bb1a9">   88</a></span>&#160;<a class="code" href="malloc__extras_8h.html#structavailable__sdram__blocks">available_sdram_blocks</a> *restrict <a class="code" href="bit__field__sorter__and__searcher_8c.html#ac2f679e18140a40be26be97edb8bb1a9">usable_sdram_regions</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">   91</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a> = <a class="code" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">   94</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">lowest_failure</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">   97</a></span>&#160;uint32_t <a class="code" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">  100</a></span>&#160;<a class="code" href="routing__table_8h.html#structtable__t">table_t</a> *restrict <a class="code" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a> = <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ab580a14d287e81d47a1720fb92e2a199">  103</a></span>&#160;uint32_t <a class="code" href="bit__field__sorter__and__searcher_8c.html#ab580a14d287e81d47a1720fb92e2a199">app_id</a> = 0;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">  107</a></span>&#160;<a class="code" href="compressor__sorter__structs_8h.html#structsorted__bit__fields__t">sorted_bit_fields_t</a> *restrict <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">  110</a></span>&#160;<a class="codeRef" href="http://spinnakermanchester.github.io/spinn_common/bit__field_8h.html#a70e667669dab5c870f1f8f97d96b4abd">bit_field_t</a> <a class="code" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">  113</a></span>&#160;<a class="code" href="compressor__sorter__structs_8h.html#structcomms__sdram__t">comms_sdram_t</a> *restrict <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ad690fc1413aedf136f80b660e48d2326">  116</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#ad690fc1413aedf136f80b660e48d2326">just_reduced_cores_due_to_malloc</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ac0690f4848866c991ba93ee6ea829eb6">  120</a></span>&#160;uint32_t <a class="code" href="bit__field__sorter__and__searcher_8c.html#ac0690f4848866c991ba93ee6ea829eb6">retires_left</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">//============================================================================</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a8a87babcb3249c6fc47b2325baa8ff07">  126</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#a8a87babcb3249c6fc47b2325baa8ff07">load_routing_table_into_router</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">// Try to allocate sufficient room for the routing table.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordtype">int</span> start_entry = <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a2d7bb03f41c2c68ad7fdb944bb23af64">rtr_alloc_id</a>(<a class="code" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a>-&gt;<a class="code" href="routing__table_8h.html#a78df0d6fd3348442567f7ab8b834101b">size</a>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#ab580a14d287e81d47a1720fb92e2a199">app_id</a>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">if</span> (start_entry == <a class="code" href="bit__field__sorter__and__searcher_8c.html#a947e5c5e068c20feb3d0470199964f37">RTR_MC_FAILED</a>) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;Unable to allocate routing table of size %d\n&quot;</span>,</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a>-&gt;<a class="code" href="routing__table_8h.html#a78df0d6fd3348442567f7ab8b834101b">size</a>);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// Load entries into the table (provided the allocation succeeded).</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">// Note that although the allocation included the specified</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// application ID we also need to include it as the most significant</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// byte in the route (see `sark_hw.c`).</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;loading %d entries into router&quot;</span>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a>-&gt;<a class="code" href="routing__table_8h.html#a78df0d6fd3348442567f7ab8b834101b">size</a>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">for</span> (uint32_t entry_id = 0; entry_id &lt; <a class="code" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a>-&gt;<a class="code" href="routing__table_8h.html#a78df0d6fd3348442567f7ab8b834101b">size</a>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            entry_id++) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <a class="code" href="routing__table_8h.html#structentry__t">entry_t</a> entry = <a class="code" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a>-&gt;<a class="code" href="routing__table_8h.html#a78c84fd4064e0f3cf4b77a1874209e60">entries</a>[entry_id];</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        uint32_t route = entry.<a class="code" href="routing__table_8h.html#aae50acecb462e9fcb4e13bbe5cf27ac7">route</a> | (<a class="code" href="bit__field__sorter__and__searcher_8c.html#ab580a14d287e81d47a1720fb92e2a199">app_id</a> &lt;&lt; <a class="code" href="bit__field__sorter__and__searcher_8c.html#a886d527c16dc0e3986b31801ca0dec69">ROUTE_APP_ID_BIT_SHIFT</a>);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> success = <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a81ca61e30076d1724a68027b63f6e970">rtr_mc_set</a>(</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                start_entry + entry_id,</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                entry.<a class="code" href="routing__table_8h.html#a225a585fd5012060cc494b0b0ea636cc">key_mask</a>.<a class="code" href="routing__table_8h.html#adf30ccd47145700406a26a3aeb2bf12d">key</a>, entry.<a class="code" href="routing__table_8h.html#a225a585fd5012060cc494b0b0ea636cc">key_mask</a>.<a class="code" href="routing__table_8h.html#a30a1c9a534c37968116826cf7f1e5bab">mask</a>, route);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="comment">// chekc that the entry was set</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keywordflow">if</span> (success == <a class="code" href="bit__field__sorter__and__searcher_8c.html#a947e5c5e068c20feb3d0470199964f37">RTR_MC_FAILED</a>) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;failed to set a router table entry at index %d&quot;</span>,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                    start_entry + entry_id);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// Indicate we were able to allocate routing table entries.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#aabb7e8da822c5d0a45b1ed8032ede71c">  163</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#aabb7e8da822c5d0a45b1ed8032ede71c">send_force_stop_message</a>(<span class="keywordtype">int</span> processor_id) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction == <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a439c688a4e9ed31638d5922a50680a8e">RUN</a>) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;sending stop to processor %d&quot;</span>, processor_id);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a179a40541f7c969c4effd946f5fd72b9">FORCE_TO_STOP</a>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;}</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a6cc8469cd2af4fc03d051e88bc414e87">  174</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#a6cc8469cd2af4fc03d051e88bc414e87">send_prepare_message</a>(<span class="keywordtype">int</span> processor_id) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// set message params</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;sending prepare to processor %d&quot;</span>, processor_id);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#a70755b2138b556e54db6c862767af5a0">mid_point</a> = <a class="code" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#afc6d9b52b2ed114671d16255f1fcbcff">  183</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#afc6d9b52b2ed114671d16255f1fcbcff">set_up_tested_mid_points</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;set_up_tested_mid_point n bf addresses is %d&quot;</span>,</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    uint32_t words = get_bit_field_size(</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a> + <a class="code" href="bit__field__sorter__and__searcher_8c.html#ad3147e0fb533cf1158003dd6cf0c5d45">ADD_INCLUSIVE_BIT</a>);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a> = <a class="code" href="malloc__extras_8h.html#a3e218828af7ddd3f4cd0d3772562b520">MALLOC</a>(words * <span class="keyword">sizeof</span>(<a class="codeRef" href="http://spinnakermanchester.github.io/spinn_common/bit__field_8h.html#a70e667669dab5c870f1f8f97d96b4abd">bit_field_t</a>));</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="comment">// check the malloc worked</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a> == <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">// clear the bitfields</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    clear_bit_field(<a class="code" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>, words);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">// return if successful</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a2e2a5ecc993dcd419e28b31719c95e8b">  209</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#a2e2a5ecc993dcd419e28b31719c95e8b">pass_instructions_to_compressor</a>(</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    uint32_t processor_id, uint32_t mid_point, uint32_t table_size) {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordtype">bool</span> success = <a class="code" href="routing__tables__utils_8h.html#a62a2cef63b709da2cff331bb140097d9">routing_tables_utils_malloc</a>(</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].routing_tables, table_size);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span> (!success) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;failed to create bitfield tables for midpoint %d&quot;</span>,</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                mid_point);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">// set the midpoint for the given compressor processor.</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#a70755b2138b556e54db6c862767af5a0">mid_point</a> = mid_point;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].mid_point == 0){</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="comment">// Info stuff but local sorted_bit_fields as compressor not set yet</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;using processor %d with %d entries for %d bitfields out of %d&quot;</span>,</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                processor_id, table_size,</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].mid_point,</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="comment">// Info stuff using compressor data</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;using processor %d with %d entries for %d bitfields out of %d&quot;</span>,</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                processor_id, table_size,</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].mid_point,</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a439c688a4e9ed31638d5922a50680a8e">RUN</a>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a2dfa6ebebc99da76f7dc8f92dfe8cbf1">  246</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#a2dfa6ebebc99da76f7dc8f92dfe8cbf1">malloc_tables_and_set_off_bit_compressor</a>(</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordtype">int</span> mid_point, <span class="keywordtype">int</span> processor_id) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment">// free any previous routing tables</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="routing__tables__utils_8h.html#ac2b87e9be8188bb776b0426d6ba7e1d0">routing_tables_utils_free_all</a>(<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].routing_tables);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">// malloc space for the routing tables</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    uint32_t table_size = <a class="code" href="bit__field__table__generator_8h.html#af67eedbb6f9ea96b5d8eb2cede279c48">bit_field_table_generator_max_size</a>(</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            mid_point, &amp;<a class="code" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8082501788d19b0833dc0d130c0bd796">uncompressed_table</a>,</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">// if successful, try setting off the bitfield compression</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#a87955dbae6fb7763d3a90f8e7d66f07f">sorted_bit_fields</a> = <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordtype">bool</span> success = <a class="code" href="bit__field__sorter__and__searcher_8c.html#a2e2a5ecc993dcd419e28b31719c95e8b">pass_instructions_to_compressor</a>(</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            processor_id, mid_point, table_size);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span> (!success) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="comment">// OK, lets turn this and all ready processors off to save space.</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="comment">// At least default no bitfield handled elsewhere so of to reduce.</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a3373d705e500da21f936be7ec6b57802">DO_NOT_USE</a>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> p_id = 0; p_id &lt; <a class="code" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; p_id++) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[p_id].sorter_instruction == <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a>) ||</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                    (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[p_id].sorter_instruction == <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2564c1b7bc6ea4d4c778ec3e1d70826e">TO_BE_PREPARED</a>)) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[p_id].<a class="code" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a3373d705e500da21f936be7ec6b57802">DO_NOT_USE</a>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="comment">// Ok that midpoint did not work so need to try it again</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        bit_field_clear(<a class="code" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>, mid_point);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;}</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="filter__info_8h.html#structfilter__region__t">filter_region_t</a> *find_processor_bit_field_region(</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordtype">int</span> processor_id) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">// find the right bitfield region</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> r_id = 0; r_id &lt; <a class="code" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#af7e0d710a4c4d67be7c0f2578e97ff3f">n_processors</a>; r_id++) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordtype">int</span> region_proc_id = <a class="code" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a83219002046c2cb82a5ed5d03d0c9901">processors</a>[r_id].<a class="code" href="compressor__sorter__structs_8h.html#a27edc56ca90e5e5fff6eee12c9ffadc2">processor</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;is looking for %d and found %d&quot;</span>,</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                processor_id, region_proc_id);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordflow">if</span> (region_proc_id == processor_id) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a83219002046c2cb82a5ed5d03d0c9901">processors</a>[r_id].<a class="code" href="compressor__sorter__structs_8h.html#ac140cc5f3be0d158436780d491616058">filter</a>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="comment">// if not found</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;failed to find the right region. WTF&quot;</span>);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code" href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572adf50834e361027bbbe08aad6ebd36d19">EXIT_SWERR</a>);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">return</span> <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;}</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a87231bf5b93d39515d3ca6d88fdd8196">  304</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#a87231bf5b93d39515d3ca6d88fdd8196">set_merged_filters</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;best_success %d&quot;</span>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a>; i++) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="comment">// Find the actual index of this bitfield</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordtype">int</span> bf_i = <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#afa13939be549fe271504e4d2c411b070">sort_order</a>[i];</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="comment">// Update the flag</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a6adeafbfed85221d82b0340a70e9f1d0">bit_fields</a>[bf_i]-&gt;<a class="code" href="filter__info_8h.html#a1a484e14dd6870e23e8f838d72c0b388">merged</a> = 1;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#af8905b57f57799ccb76d07dadb273efd">  316</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#af8905b57f57799ccb76d07dadb273efd">locate_next_mid_point</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a> == 0) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="comment">// if not tested yet / reset test all</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">if</span> (!bit_field_test(<a class="code" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>)) {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;Retrying all which is mid_point %d&quot;</span>,</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#ac0690f4848866c991ba93ee6ea829eb6">retires_left</a> == 0) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;Stopping compression due to retry count&quot;</span>);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#ac0690f4848866c991ba93ee6ea829eb6">retires_left</a> -= 1;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="comment">// need to find a midpoint</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;n_bf_addresses %d tested_mid_points %d&quot;</span>,</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>,</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            bit_field_test(<a class="code" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>,</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                    <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>));</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">// the last point of the longest space</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordtype">int</span> best_end = <a class="code" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment">// the length of the longest space to test</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordtype">int</span> best_length = 0;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="comment">// the current length of the currently detected space</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordtype">int</span> current_length = 0;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;best_success %d lowest_failure %d&quot;</span>,</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">lowest_failure</a>);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">// iterate over the range to binary search, looking for biggest block to</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">// explore, then take the middle of that block</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment">// NOTE: if there are no available bitfields, this will result in best end</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="comment">// being still set to -1, as every bit is set, so there is no blocks with</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="comment">// any best length, and so best end is never set and lengths will still be</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="comment">// 0 at the end of the for loop. -1 is a special midpoint which higher</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">// code knows to recognise as no more exploration needed.</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> index = <a class="code" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a> + 1; index &lt;= <a class="code" href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">lowest_failure</a>; index++) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;index: %d, value: %u current_length: %d&quot;</span>,</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                index, bit_field_test(<a class="code" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>, index),</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                current_length);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="comment">// verify that the index has been used before</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keywordflow">if</span> (bit_field_test(<a class="code" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>, index)) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;           <span class="comment">// if used before and is the end of the biggest block seen so far.</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;           <span class="comment">// Record and repeat.</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;           <span class="keywordflow">if</span> (current_length &gt; best_length) {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                best_length = current_length;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                best_end = index - 1;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;found best_length: %d best_end %d&quot;</span>,</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                        best_length, best_end);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;           <span class="comment">// if not the end of the biggest block, ignore (log for debugging)</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;           } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;not best: %d best_end %d&quot;</span>, best_length, best_end);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;           }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;           <span class="comment">// if its seen a set we&#39;re at the end of a block. so reset the</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;           <span class="comment">// current block len, as we&#39;re about to start another block.</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;           current_length = 0;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="comment">// not set, so still within a block, increase len.</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;           current_length += 1;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="comment">// use the best less half (shifted) of the best length</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordtype">int</span> new_mid_point = best_end - (best_length &gt;&gt; 1);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;returning mid point %d&quot;</span>, new_mid_point);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">// set the mid point to be tested. (safe as we de-set if we fail later on)</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span> (new_mid_point &gt;= 0) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;setting new mid point %d&quot;</span>, new_mid_point);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="comment">// just a safety check, as this has caught us before.</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordflow">if</span> (bit_field_test(<a class="code" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>, new_mid_point)) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;HOW THE HELL DID YOU GET HERE!&quot;</span>);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <a class="code" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code" href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572adf50834e361027bbbe08aad6ebd36d19">EXIT_SWERR</a>);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">return</span> new_mid_point;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a698a835cfc60d80617235e9e5879e849">  409</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#a698a835cfc60d80617235e9e5879e849">handle_best_cleanup</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">// load routing table into router</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#a8a87babcb3249c6fc47b2325baa8ff07">load_routing_table_into_router</a>();</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;finished loading table&quot;</span>);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;setting set_n_merged_filters&quot;</span>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#a87231bf5b93d39515d3ca6d88fdd8196">set_merged_filters</a>();</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="comment">// This is to allow the host report to know how many bitfields on the chip</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="comment">// merged without reading every cores bit-field region.</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html">vcpu_t</a> *sark_virtual_processor_info = (<a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html">vcpu_t</a> *) <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a06e96a522d4adf97fbb2549806f73cfb">SV_VCPU</a>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> processor_id = <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#acc208cdfe1d4eb5caa298a8a5b4db50c">spin1_get_core_id</a>();</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    sark_virtual_processor_info[processor_id].<a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a82d770674ea0379ef44f28797b382647">user2</a> = <a class="code" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">// Safety to break out of loop in check_buffer_queue as terminate wont</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">// stop this interrupt</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">terminated</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment">// set up user registers etc to finish cleanly</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code" href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572a012df54a47467268a8bb9acb9d9a2473">EXITED_CLEANLY</a>);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a158c3d6523a5b6472c894c9294cf018c">  435</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#a158c3d6523a5b6472c894c9294cf018c">prepare_processor_first_time</a>(<span class="keywordtype">int</span> processor_id) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="comment">// Create the space for the routing table meta data</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#a51efd0e36bf8f32e7fae4670b84dff91">routing_tables</a> =</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <a class="code" href="malloc__extras_8h.html#a52d8f9cf4967316758b7148966fffeef">MALLOC_SDRAM</a>(<span class="keyword">sizeof</span>(<a class="code" href="compressor__sorter__structs_8h.html#structmulti__table__t">multi_table_t</a>));</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].routing_tables == <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a3373d705e500da21f936be7ec6b57802">DO_NOT_USE</a>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;Error mallocing routing bake pointer on  %d&quot;</span>, processor_id);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#a51efd0e36bf8f32e7fae4670b84dff91">routing_tables</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#aaca19377972d2042c5cfd18a011eea1f">sub_tables</a> = <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#a51efd0e36bf8f32e7fae4670b84dff91">routing_tables</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a03f1642ac01ef3f580198223b92d9cd4">n_sub_tables</a> = 0;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#a51efd0e36bf8f32e7fae4670b84dff91">routing_tables</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a46a7223253ff3d5d43ad0a71058b4795">n_entries</a> = 0;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">// Pass the fake heap stuff</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#a1098c00b19e53a646354531429069840">fake_heap_data</a> = <a class="code" href="malloc__extras_8h.html#ac98a576116d9cd8509e0a0d02defc41c">malloc_extras_get_stolen_heap</a>();</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;fake_heap_data %u&quot;</span>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].fake_heap_data);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">// Check the processor is live</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].compressor_state != <a class="code" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253faca587e6ced264bc7afe62847cffb45ab">PREPARED</a>) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="comment">// give chance for compressor to read</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        spin1_delay_us(<a class="code" href="bit__field__sorter__and__searcher_8c.html#a65b6025151a6ae83a91d2e39fdd63a54">SDRAM_POLL_DELAY</a>);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="keywordflow">if</span> (++count &gt; <a class="code" href="bit__field__sorter__and__searcher_8c.html#a605487b6ac6afbca9f5f5ff329698731">SDRAM_POLL_ATTEMPTS</a>) {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a3373d705e500da21f936be7ec6b57802">DO_NOT_USE</a>;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;compressor failed to reply %d&quot;</span>, processor_id);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;}</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ad1edafabb830bb65416e6254bd0cc74c">  473</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#ad1edafabb830bb65416e6254bd0cc74c">find_prepared_processor</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="comment">// Look for a prepared one</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> processor_id = 0; processor_id &lt; <a class="code" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; processor_id++) {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction == <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a> &amp;&amp;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].compressor_state == <a class="code" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253faca587e6ced264bc7afe62847cffb45ab">PREPARED</a>) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;found prepared %d&quot;</span>, processor_id);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            <span class="keywordflow">return</span> processor_id;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">// NOTE: This initialization component exists here due to a race condition</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="comment">// with the compressors, where we dont know if they are reacting to</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="comment">// &quot;messages&quot; before sync signal has been sent. We also have this here to</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment">// save the 16 bytes per compressor core we dont end up using.</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment">// Look for a processor never used and  prepare it</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> processor_id = 0; processor_id &lt; <a class="code" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; processor_id++) {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;processor_id %d status %d&quot;</span>,</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                processor_id, <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction == <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2564c1b7bc6ea4d4c778ec3e1d70826e">TO_BE_PREPARED</a>) {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#a158c3d6523a5b6472c894c9294cf018c">prepare_processor_first_time</a>(processor_id)) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;found to be prepared %d&quot;</span>, processor_id);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                <span class="keywordflow">return</span> processor_id;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;first failed %d&quot;</span>, processor_id);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;FAILED %d&quot;</span>, <a class="code" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;}</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#af7b9d9039e3528de45dd0cdfaae99d56">  508</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#af7b9d9039e3528de45dd0cdfaae99d56">find_compressor_processor_and_set_tracker</a>(<span class="keywordtype">int</span> midpoint) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordtype">int</span> processor_id = <a class="code" href="bit__field__sorter__and__searcher_8c.html#ad1edafabb830bb65416e6254bd0cc74c">find_prepared_processor</a>();</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">if</span> (processor_id &gt; <a class="code" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>) {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="comment">// allocate this core to do this midpoint.</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#a70755b2138b556e54db6c862767af5a0">mid_point</a> = midpoint;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="comment">// set the tracker to use this midpoint</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        bit_field_set(<a class="code" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>, midpoint);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="comment">// return processor id</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;returning %d&quot;</span>, processor_id);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">return</span> processor_id;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;}</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#adc7135678f90b4c7dbdd4d1d4b56dacb">  523</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#adc7135678f90b4c7dbdd4d1d4b56dacb">setup_no_bitfields_attempt</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a> &gt; 0) {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;No bitfields attempt skipped due to threshold of %d percent&quot;</span>,</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#adbf7cfb3fc725eadae6decaedd0f97e6">threshold</a>);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordtype">int</span> processor_id =</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#af7b9d9039e3528de45dd0cdfaae99d56">find_compressor_processor_and_set_tracker</a>(<a class="code" href="constants_8h.html#a06a361793cd452d8bf77be63631b1b2b">NO_BIT_FIELDS</a>);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">if</span> (processor_id == <a class="code" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;No processor available for no bitfield attempt&quot;</span>);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <a class="code" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a>);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    }</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="comment">// set off a none bitfield compression attempt, to pipe line work</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;sets off the no bitfield version of the search on %u&quot;</span>,</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            processor_id);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#a2e2a5ecc993dcd419e28b31719c95e8b">pass_instructions_to_compressor</a>(processor_id, <a class="code" href="constants_8h.html#a06a361793cd452d8bf77be63631b1b2b">NO_BIT_FIELDS</a>,</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8082501788d19b0833dc0d130c0bd796">uncompressed_table</a>.<a class="code" href="routing__table_8h.html#a78df0d6fd3348442567f7ab8b834101b">size</a>);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;}</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a92a4dc5c2b97aa7fb1c4a353e24e459c">  547</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#a92a4dc5c2b97aa7fb1c4a353e24e459c">all_compressor_processors_busy</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> processor_id = 0; processor_id &lt; <a class="code" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; processor_id++) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;processor_id %d status %d&quot;</span>,</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                processor_id, <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction) {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2564c1b7bc6ea4d4c778ec3e1d70826e">TO_BE_PREPARED</a>:</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a>:</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].compressor_state == <a class="code" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253faca587e6ced264bc7afe62847cffb45ab">PREPARED</a>) {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            <span class="comment">// This processor is busy; continue to next one</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a49520fa4fcbd652ababa3ed7e9e002ee">  569</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#a49520fa4fcbd652ababa3ed7e9e002ee">all_compressor_processors_done</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> processor_id = 0; processor_id &lt; <a class="code" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; processor_id++) {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction &gt;= <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a>) {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    }</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;}</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#abf1d619d795cc5348b19805e77469a1b">  581</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#abf1d619d795cc5348b19805e77469a1b">exit_carry_on_if_all_compressor_processors_done</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> processor_id = 0; processor_id &lt; <a class="code" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; processor_id++) {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction &gt;= <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a>) {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="comment">// Check there is nothing left to do</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordtype">int</span> mid_point = <a class="code" href="bit__field__sorter__and__searcher_8c.html#af8905b57f57799ccb76d07dadb273efd">locate_next_mid_point</a>();</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">if</span> (mid_point != <a class="code" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>) {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;Ran out of processors while still having mid_point %d to do&quot;</span>,</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                mid_point);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <a class="code" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a>);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="comment">// Should never get here but break out of the loop</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">terminated</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="comment">// Should never get here if above check worked but just in case</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#ad690fc1413aedf136f80b660e48d2326">just_reduced_cores_due_to_malloc</a>) {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;Last result was a malloc fail! Use host&quot;</span>);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <a class="code" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a>);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="comment">// Should never get here but break out of the loop</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">terminated</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="comment">// Check there was actually a result</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a> == <a class="code" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>) {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;No usable result found! Use host&quot;</span>);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <a class="code" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a>);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="comment">// Should never get here but break out of the loop</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">terminated</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="comment">// Should never get here if above check failed but just in case</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a> &lt; (<span class="keywordtype">int</span>) <a class="code" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;The threshold is %d bitfields. &quot;</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                <span class="stringliteral">&quot;Which is %d percent of the total of %d&quot;</span>,</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#adbf7cfb3fc725eadae6decaedd0f97e6">threshold</a>,</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;Best result found was %d Which is below the threshold! &quot;</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                <span class="stringliteral">&quot;Use host&quot;</span>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a>);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <a class="code" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a>);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="comment">// Should never get here but break out of the loop</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">terminated</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#a698a835cfc60d80617235e9e5879e849">handle_best_cleanup</a>();</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160; </div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="comment">// Should never get here but break out of the loop</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">terminated</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;}</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a2f92a4e2f154f113ef10a0485e6f3e23">  639</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#a2f92a4e2f154f113ef10a0485e6f3e23">carry_on_binary_search</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abf1d619d795cc5348b19805e77469a1b">exit_carry_on_if_all_compressor_processors_done</a>()) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="keywordflow">return</span>; <span class="comment">// Should never get here but just in case</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#a92a4dc5c2b97aa7fb1c4a353e24e459c">all_compressor_processors_busy</a>()) {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;all_compressor_processors_busy&quot;</span>);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="keywordflow">return</span>;  <span class="comment">//Pass back to check_buffer_queue</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    }</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;start carry_on_binary_search&quot;</span>);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordtype">int</span> mid_point = <a class="code" href="bit__field__sorter__and__searcher_8c.html#af8905b57f57799ccb76d07dadb273efd">locate_next_mid_point</a>();</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;available with midpoint %d&quot;</span>, mid_point);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">if</span> (mid_point == <a class="code" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>) {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="comment">// OK, lets turn all ready processors off as done.</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> p_id = 0; p_id &lt; <a class="code" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; p_id++) {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[p_id].sorter_instruction == <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a>) {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[p_id].<a class="code" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a3373d705e500da21f936be7ec6b57802">DO_NOT_USE</a>;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[p_id].sorter_instruction &gt; <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a>) {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                        <span class="stringliteral">&quot;waiting for processor %d status %d doing midpoint %u&quot;</span>,</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                        p_id, <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[p_id].sorter_instruction,</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                        <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[p_id].mid_point);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        }</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordtype">int</span> processor_id = <a class="code" href="bit__field__sorter__and__searcher_8c.html#af7b9d9039e3528de45dd0cdfaae99d56">find_compressor_processor_and_set_tracker</a>(mid_point);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;start create at time step: %u&quot;</span>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a>);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#a2dfa6ebebc99da76f7dc8f92dfe8cbf1">malloc_tables_and_set_off_bit_compressor</a>(mid_point, processor_id);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;end create at time step: %u&quot;</span>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a>);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;}</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ac9914f4341d050b71b5e1516eb19a184">  676</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#ac9914f4341d050b71b5e1516eb19a184">timer_callback</a>(UNUSED <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused0, UNUSED <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused1) {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a>++;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="comment">// Debug stuff please keep</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a> &amp; 1023) == 0) {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;time_steps: %u&quot;</span>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a>);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    }</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a> &gt; <a class="code" href="bit__field__sorter__and__searcher_8c.html#acf36c228ebab2d1aeea784bd9f6660f3">KILL_TIME</a>) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;timer overran %u&quot;</span>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a>);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <a class="code" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a>);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;}</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a72e0d6c3a5bce7e5fbf2c7f586db5fa3">  693</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#a72e0d6c3a5bce7e5fbf2c7f586db5fa3">process_success</a>(<span class="keywordtype">int</span> mid_point, <span class="keywordtype">int</span> processor_id) {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="comment">// if the mid point is better than seen before, store results for final.</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a> &lt;= mid_point) {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a> = mid_point;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="comment">// If we have a previous table free it as no longer needed</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a> != <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            <a class="code" href="malloc__extras_8h.html#a9a8e700d56e7d858108b755ad3edb52e">FREE</a>(<a class="code" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a>);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="comment">// Get last table and free the rest</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a> = <a class="code" href="routing__tables__utils_8h.html#aa31268404af3ce2f67545fa98bdbd802">routing_tables_utils_convert</a>(</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].routing_tables);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;n entries is %d&quot;</span>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a>-&gt;<a class="code" href="routing__table_8h.html#a78df0d6fd3348442567f7ab8b834101b">size</a>);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        <a class="code" href="routing__tables__utils_8h.html#ac2b87e9be8188bb776b0426d6ba7e1d0">routing_tables_utils_free_all</a>(<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].routing_tables);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="comment">// kill any search below this point, as they all redundant as</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="comment">// this is a better search.</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> proc_id = 0; proc_id &lt; <a class="code" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; proc_id++) {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[proc_id].mid_point &lt; mid_point) {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#aabb7e8da822c5d0a45b1ed8032ede71c">send_force_stop_message</a>(proc_id);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#ad690fc1413aedf136f80b660e48d2326">just_reduced_cores_due_to_malloc</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;finished process of successful compression&quot;</span>);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;}</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ad25e5b4067e405459a984cefacdcd02e">  726</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#ad25e5b4067e405459a984cefacdcd02e">process_failed_malloc</a>(<span class="keywordtype">int</span> mid_point, <span class="keywordtype">int</span> processor_id) {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <a class="code" href="routing__tables__utils_8h.html#ac2b87e9be8188bb776b0426d6ba7e1d0">routing_tables_utils_free_all</a>(<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].routing_tables);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="comment">// Remove the flag that say this midpoint has been checked</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    bit_field_clear(<a class="code" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>, mid_point);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="comment">// Add a retry to recover from the failure</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#ac0690f4848866c991ba93ee6ea829eb6">retires_left</a> += 1;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#ad690fc1413aedf136f80b660e48d2326">just_reduced_cores_due_to_malloc</a>) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;Multiple malloc detected on %d keeping processor %d&quot;</span>,</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                mid_point, processor_id);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="comment">// Not thresholding as just did a threshold</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#ad690fc1413aedf136f80b660e48d2326">just_reduced_cores_due_to_malloc</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a3373d705e500da21f936be7ec6b57802">DO_NOT_USE</a>;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;Malloc detected on %d removing processor %d&quot;</span>,</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                mid_point, processor_id);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#ad690fc1413aedf136f80b660e48d2326">just_reduced_cores_due_to_malloc</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;}</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#aaf61d0e8c4cdc01297fe1d4725ec1aab">  750</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#aaf61d0e8c4cdc01297fe1d4725ec1aab">process_failed</a>(<span class="keywordtype">int</span> mid_point, <span class="keywordtype">int</span> processor_id) {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="comment">// safety check to ensure we dont go on if the uncompressed failed</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">if</span> (mid_point &lt;= (<span class="keywordtype">int</span>) <a class="code" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a> == <a class="code" href="constants_8h.html#a06a361793cd452d8bf77be63631b1b2b">NO_BIT_FIELDS</a>) {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;The no bitfields attempted failed! Giving up&quot;</span>);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;The threshold is %d, &quot;</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                    <span class="stringliteral">&quot;which is %d percent of the total of %d&quot;</span>,</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                    <a class="code" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#adbf7cfb3fc725eadae6decaedd0f97e6">threshold</a>,</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                    <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;The attempt with %d bitfields failed. ! Giving up&quot;</span>,</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                    mid_point);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <a class="code" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code" href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572aa79a9cd74d0a705ad96bd17b5181c56b">EXIT_FAIL</a>);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    }</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">lowest_failure</a> &gt; mid_point) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;Changing lowest_failure from: %d to mid_point:%d&quot;</span>,</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">lowest_failure</a>, mid_point);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">lowest_failure</a> = mid_point;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;lowest_failure: %d already lower than mid_point:%d&quot;</span>,</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">lowest_failure</a>, mid_point);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <a class="code" href="routing__tables__utils_8h.html#ac2b87e9be8188bb776b0426d6ba7e1d0">routing_tables_utils_free_all</a>(<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].routing_tables);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160; </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="comment">// tell all compression processors trying midpoints above this one</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="comment">// to stop, as its highly likely a waste of time.</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> proc_id = 0; proc_id &lt; <a class="code" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; proc_id++) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[proc_id].mid_point &gt; mid_point) {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#aabb7e8da822c5d0a45b1ed8032ede71c">send_force_stop_message</a>(proc_id);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        }</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    }</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="comment">// handler to say this message has changed the last to not be a malloc fail</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#ad690fc1413aedf136f80b660e48d2326">just_reduced_cores_due_to_malloc</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;}</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00790"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ae79865738cd37176e6520d72154ce64a">  790</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#ae79865738cd37176e6520d72154ce64a">process_compressor_response</a>(</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <span class="keywordtype">int</span> processor_id, <a class="code" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253f">compressor_states</a> finished_state) {</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="comment">// locate this responses midpoint</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordtype">int</span> mid_point = <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#a70755b2138b556e54db6c862767af5a0">mid_point</a>;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;received response %d from processor %d doing %d midpoint&quot;</span>,</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            finished_state, processor_id, mid_point);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160; </div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="comment">// free the processor for future processing</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#a6cc8469cd2af4fc03d051e88bc414e87">send_prepare_message</a>(processor_id);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="comment">// process compressor response based off state.</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <span class="keywordflow">switch</span> (finished_state) {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa7b909bad27a8bc8dd8c6d464ac3a1478">SUCCESSFUL_COMPRESSION</a>:</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <span class="comment">// compressor was successful at compressing the tables.</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;successful from processor %d doing mid point %d &quot;</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                <span class="stringliteral">&quot;best so far was %d&quot;</span>,</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                processor_id, mid_point, <a class="code" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a>);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#a72e0d6c3a5bce7e5fbf2c7f586db5fa3">process_success</a>(mid_point, processor_id);</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa4d8a6f033344df4f3b8fa419b8db0edb">FAILED_MALLOC</a>:</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="comment">// compressor failed as a malloc request failed.</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;failed by malloc from processor %d doing mid point %d&quot;</span>,</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                processor_id, mid_point);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#ad25e5b4067e405459a984cefacdcd02e">process_failed_malloc</a>(mid_point, processor_id);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa7c1602ccad57389b8999601cd8025a95">FAILED_TO_COMPRESS</a>:</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <span class="comment">// compressor failed to compress the tables as no more merge options.</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;failed to compress from processor %d doing mid point %d&quot;</span>,</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                processor_id, mid_point);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#aaf61d0e8c4cdc01297fe1d4725ec1aab">process_failed</a>(mid_point, processor_id);</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253faacc8682efbd3957ac911dbb6fe2459b0">RAN_OUT_OF_TIME</a>:</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <span class="comment">// compressor failed to compress as it ran out of time.</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;        <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;failed by time from processor %d doing mid point %d&quot;</span>,</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                processor_id, mid_point);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#aaf61d0e8c4cdc01297fe1d4725ec1aab">process_failed</a>(mid_point, processor_id);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160; </div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253facd1b57bf58f3e2dc4ef7ddf051739cf8">FORCED_BY_COMPRESSOR_CONTROL</a>:</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <span class="comment">// compressor stopped at the request of the sorter.</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;ack from forced from processor %d doing mid point %d&quot;</span>,</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                processor_id, mid_point);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <a class="code" href="routing__tables__utils_8h.html#ac2b87e9be8188bb776b0426d6ba7e1d0">routing_tables_utils_free_all</a>(<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].routing_tables);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa488d46012070df0693507cde3473cb37">UNUSED_CORE</a>:</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253faca587e6ced264bc7afe62847cffb45ab">PREPARED</a>:</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa5ea53c4d2b4459dae1e1910851e5b458">COMPRESSING</a>:</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        <span class="comment">// states that shouldn&#39;t occur</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;no idea what to do with finished state %d, &quot;</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                <span class="stringliteral">&quot;from processor %d&quot;</span>, finished_state, processor_id);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <a class="code" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a>);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;}</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a85c24f73513945a5d698d12620719e6d">  851</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#a85c24f73513945a5d698d12620719e6d">check_compressors</a>(UNUSED <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused0, UNUSED <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused1) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;Entering the check_compressors loop&quot;</span>);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="comment">// iterate over the compressors buffer until we have the finished state</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">terminated</a>) {</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <span class="keywordtype">bool</span> no_new_result = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="comment">// iterate over processors looking for a new result</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> processor_id = 0; processor_id &lt; <a class="code" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; processor_id++) {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            <span class="comment">// Check each compressor asked to run or forced</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            <a class="code" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253f">compressor_states</a> finished_state =</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                    <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#a9c8f01d4cc8cfc2b4377fe14f39e13ff">compressor_state</a>;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            <span class="keywordflow">if</span> (finished_state &gt; <a class="code" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa5ea53c4d2b4459dae1e1910851e5b458">COMPRESSING</a>) {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                no_new_result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#ae79865738cd37176e6520d72154ce64a">process_compressor_response</a>(processor_id, finished_state);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            }</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;        <span class="keywordflow">if</span> (no_new_result) {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;            <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;no_new_result&quot;</span>);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            <span class="comment">// Check if another processor could be started or even done</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#a2f92a4e2f154f113ef10a0485e6f3e23">carry_on_binary_search</a>();</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;            <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;result&quot;</span>);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        }</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    }</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="comment">// Safety code in case exit after setting best_found fails</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;exiting the interrupt, to allow the binary to finish&quot;</span>);</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;}</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160; </div>
<div class="line"><a name="l00881"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ab98e0806224b412ce1199a4a1ff2f388">  881</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#ab98e0806224b412ce1199a4a1ff2f388">start_binary_search</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="comment">// Find the number of available processors</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    uint32_t available = 0;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> processor_id = 0; processor_id &lt; <a class="code" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; processor_id++) {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction == <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2564c1b7bc6ea4d4c778ec3e1d70826e">TO_BE_PREPARED</a>) {</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            available++;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        }</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    }</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160; </div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="comment">// Set off the worse acceptable (note no bitfield would have been set off</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="comment">// earlier)</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a> &gt; 0) {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <span class="keywordtype">int</span> processor_id = <a class="code" href="bit__field__sorter__and__searcher_8c.html#af7b9d9039e3528de45dd0cdfaae99d56">find_compressor_processor_and_set_tracker</a>(</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#a2dfa6ebebc99da76f7dc8f92dfe8cbf1">malloc_tables_and_set_off_bit_compressor</a>(</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>, processor_id);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160; </div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="comment">// create slices and set off each slice.</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    uint32_t mid_point = <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">while</span> ((available &gt; 0) &amp;&amp; (mid_point &gt; <a class="code" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>)) {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        <span class="keywordtype">int</span> processor_id = <a class="code" href="bit__field__sorter__and__searcher_8c.html#af7b9d9039e3528de45dd0cdfaae99d56">find_compressor_processor_and_set_tracker</a>(mid_point);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <span class="comment">// Check the processor replied and has not been turned of by previous</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <span class="keywordflow">if</span> (processor_id == <a class="code" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>) {</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;No processor available in start_binary_search&quot;</span>);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        }</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#a2dfa6ebebc99da76f7dc8f92dfe8cbf1">malloc_tables_and_set_off_bit_compressor</a>(mid_point, processor_id);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160; </div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="comment">// Find the next step which may change due to rounding</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="keywordtype">int</span> step = ((mid_point - <a class="code" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>) / available);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        <span class="keywordflow">if</span> (step &lt; 1) {</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            step = 1;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        }</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        mid_point -= step;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        available--;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    }</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="comment">// Dont need all processors so turn the rest off</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">if</span> (available &gt; 0) {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> processor_id = 0; processor_id &lt; <a class="code" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; processor_id++) {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction == <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2564c1b7bc6ea4d4c778ec3e1d70826e">TO_BE_PREPARED</a>) {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a3373d705e500da21f936be7ec6b57802">DO_NOT_USE</a>;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        }</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    }</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;}</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160; </div>
<div class="line"><a name="l00931"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a674c7e8652b957842f71535f081dfc46">  931</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#a674c7e8652b957842f71535f081dfc46">check_bitfield_to_routes</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <a class="code" href="filter__info_8h.html#structfilter__info__t">filter_info_t</a> **bit_fields = <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a6adeafbfed85221d82b0340a70e9f1d0">bit_fields</a>;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordtype">int</span> *processor_ids = <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#afdb80f23a54430e4c9eb5b51120e211a">processor_ids</a>;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <a class="code" href="routing__table_8h.html#structentry__t">entry_t</a> *entries = <a class="code" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8082501788d19b0833dc0d130c0bd796">uncompressed_table</a>.<a class="code" href="routing__table_8h.html#a78c84fd4064e0f3cf4b77a1874209e60">entries</a>;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    uint32_t n_bf = <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    uint32_t bf_i = 0;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; <a class="code" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8082501788d19b0833dc0d130c0bd796">uncompressed_table</a>.<a class="code" href="routing__table_8h.html#a78df0d6fd3348442567f7ab8b834101b">size</a>; i++) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <span class="comment">// Bit field of seen processors (assumes less than 33 processors)</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        uint32_t seen_processors = 0;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <span class="comment">// Go through all bitfields that match the key</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <span class="keywordflow">while</span> (bf_i &lt; n_bf &amp;&amp; (entries[i].key_mask.mask &amp; bit_fields[bf_i]-&gt;<a class="code" href="filter__info_8h.html#ae4e76f28cca7de5a1e56c9d7a7dd6a85">key</a>) ==</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                entries[i].<a class="code" href="routing__table_8h.html#a225a585fd5012060cc494b0b0ea636cc">key_mask</a>.<a class="code" href="routing__table_8h.html#adf30ccd47145700406a26a3aeb2bf12d">key</a>) {</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160; </div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;            <span class="keywordflow">if</span> (seen_processors &amp; (1 &lt;&lt; processor_ids[bf_i])) {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;Routing key 0x%08x matches more than one bitfield key&quot;</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                        <span class="stringliteral">&quot; on processor %d (last found 0x%08x)&quot;</span>,</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                        entries[i].key_mask.key, processor_ids[bf_i],</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                        bit_fields[bf_i]-&gt;<a class="code" href="filter__info_8h.html#ae4e76f28cca7de5a1e56c9d7a7dd6a85">key</a>);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                <a class="code" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code" href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572adf50834e361027bbbe08aad6ebd36d19">EXIT_SWERR</a>);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;            }</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            seen_processors |= (1 &lt;&lt; processor_ids[bf_i]);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            bf_i++;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;}</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160; </div>
<div class="line"><a name="l00961"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ad89dee597d14367e18c1ac915ba8fa67">  961</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#ad89dee597d14367e18c1ac915ba8fa67">start_compression_process</a>(UNUSED <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused0, UNUSED <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused1) {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="comment">// malloc the struct and populate n bit-fields. DOES NOT populate the rest.</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a> = <a class="code" href="bit__field__reader_8h.html#a150aaf77d7d542a5e17082829de53086">bit_field_reader_initialise</a>(<a class="code" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="comment">// check state to fail if not read in</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a> == <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;failed to read in bitfields, quitting&quot;</span>);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        <a class="code" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code" href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572ace6a5af7573c1cc48533acf408307ad3">EXIT_MALLOC</a>);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    }</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160; </div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="comment">// Set the threshold</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#adbf7cfb3fc725eadae6decaedd0f97e6">threshold</a> == 0) {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a> = 0;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a> = (<a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a> *</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#adbf7cfb3fc725eadae6decaedd0f97e6">threshold</a>) / 100;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a> = <a class="code" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    }</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;threshold_in_bitfields %d which is %d percent of %d&quot;</span>,</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#adbf7cfb3fc725eadae6decaedd0f97e6">threshold</a>,</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160; </div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="comment">// set up mid point trackers. NEEDED here as setup no bitfields attempt</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="comment">// will use it during processor allocation.</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#afc6d9b52b2ed114671d16255f1fcbcff">set_up_tested_mid_points</a>();</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="comment">// set off the first compression attempt (aka no bitfields).</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordtype">bool</span> success = <a class="code" href="bit__field__sorter__and__searcher_8c.html#adc7135678f90b4c7dbdd4d1d4b56dacb">setup_no_bitfields_attempt</a>();</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">if</span> (!success) {</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;failed to set up uncompressed attempt&quot;</span>);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <a class="code" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code" href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572ace6a5af7573c1cc48533acf408307ad3">EXIT_MALLOC</a>);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    }</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160; </div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;populating sorted bitfields at time step: %d&quot;</span>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a>);</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <a class="code" href="bit__field__reader_8h.html#af63b553947cd47b27df8eeece1ddfba1">bit_field_reader_read_in_bit_fields</a>(<a class="code" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#a674c7e8652b957842f71535f081dfc46">check_bitfield_to_routes</a>();</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160; </div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <span class="comment">// the first possible failure is all bitfields so set there.</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">lowest_failure</a> = <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;finished reading bitfields at time step: %d&quot;</span>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a>);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160; </div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="comment">//TODO: safety code to be removed</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> bit_field_index = 0;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            bit_field_index &lt; <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;            bit_field_index++) {</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <span class="comment">// get key</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        <a class="code" href="filter__info_8h.html#structfilter__info__t">filter_info_t</a> *bf_pointer =</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                <a class="code" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a6adeafbfed85221d82b0340a70e9f1d0">bit_fields</a>[bit_field_index];</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        <span class="keywordflow">if</span> (bf_pointer == <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;failed at index %d&quot;</span>, bit_field_index);</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            <a class="code" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a>);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    }</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="comment">// start the binary search by slicing the search space by the compressors.</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#ab98e0806224b412ce1199a4a1ff2f388">start_binary_search</a>();</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="comment">// set off checker which in turn sets of the other compressor processors</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a653c1de1c4181f03c7ba4dbba38df9c7">spin1_schedule_callback</a>(</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#a85c24f73513945a5d698d12620719e6d">check_compressors</a>, 0, 0, <a class="code" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276ae4b1a013c32305821940ce11363cb879">COMPRESSION_START_PRIORITY</a>);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;}</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ab01f3414297cde2079c919d64846e836"> 1025</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html">vcpu_t</a> *<a class="code" href="bit__field__sorter__and__searcher_8c.html#ab01f3414297cde2079c919d64846e836">get_this_vcpu_info</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html">vcpu_t</a> *sark_virtual_processor_info = (<a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html">vcpu_t</a> *) <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a06e96a522d4adf97fbb2549806f73cfb">SV_VCPU</a>;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html">vcpu_t</a> *restrict this_vcpu_info =</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            &amp;sark_virtual_processor_info[<a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#acc208cdfe1d4eb5caa298a8a5b4db50c">spin1_get_core_id</a>()];</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="keywordflow">return</span> this_vcpu_info;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;}</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01034"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a657f899c766507fdf3203186b8cce7f4"> 1034</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#a657f899c766507fdf3203186b8cce7f4">initialise_user_register_tracker</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;set up user register tracker (easier reading)&quot;</span>);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html">vcpu_t</a> *restrict this_vcpu_info = <a class="code" href="bit__field__sorter__and__searcher_8c.html#ab01f3414297cde2079c919d64846e836">get_this_vcpu_info</a>();</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160; </div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="comment">// convert user registers to struct pointers</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <a class="code" href="data__specification_8h.html#structdata__specification__metadata__t">data_specification_metadata_t</a> *restrict app_ptr_table =</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            (<a class="code" href="data__specification_8h.html#structdata__specification__metadata__t">data_specification_metadata_t</a> *) this_vcpu_info-&gt;user0;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a> =</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            (<a class="code" href="compressor__sorter__structs_8h.html#structuncompressed__table__region__data__t">uncompressed_table_region_data_t</a> *) this_vcpu_info-&gt;user1;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a> = (<a class="code" href="compressor__sorter__structs_8h.html#structregion__addresses__t">region_addresses_t</a> *) this_vcpu_info-&gt;user2;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160; </div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a> = <a class="code" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a225b90b549bc339e36c01da347a0ef3c">comms_sdram</a>;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    for (<span class="keywordtype">int</span> processor_id = 0; processor_id &lt; <a class="code" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; processor_id++) {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#a9c8f01d4cc8cfc2b4377fe14f39e13ff">compressor_state</a> = <a class="code" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa488d46012070df0693507cde3473cb37">UNUSED_CORE</a>;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a61f110d0003851c81fc0d250f8d32e00">NOT_COMPRESSOR</a>;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#a70755b2138b556e54db6c862767af5a0">mid_point</a> = <a class="code" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#a51efd0e36bf8f32e7fae4670b84dff91">routing_tables</a> = <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#a69f0516a2f97f34460eea02de697034e">uncompressed_router_table</a> =</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                &amp;<a class="code" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8082501788d19b0833dc0d130c0bd796">uncompressed_table</a>;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#a87955dbae6fb7763d3a90f8e7d66f07f">sorted_bit_fields</a> = <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#a1098c00b19e53a646354531429069840">fake_heap_data</a> = <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    }</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#ac2f679e18140a40be26be97edb8bb1a9">usable_sdram_regions</a> = (<a class="code" href="malloc__extras_8h.html#structavailable__sdram__blocks">available_sdram_blocks</a> *) this_vcpu_info-&gt;user3;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#ac0690f4848866c991ba93ee6ea829eb6">retires_left</a> = <a class="code" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a82af5714aab971cccd2493b7c6a4c5df">retry_count</a>;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;finished setting up register tracker:\n\n&quot;</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            <span class="stringliteral">&quot;user0 = %d\n user1 = %d\n user2 = %d\n user3 = %d\n&quot;</span>,</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            app_ptr_table, <a class="code" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>,</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#ac2f679e18140a40be26be97edb8bb1a9">usable_sdram_regions</a>);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;}</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160; </div>
<div class="line"><a name="l01067"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ad8af6cddaab51d89d2c0a94647e01055"> 1067</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#ad8af6cddaab51d89d2c0a94647e01055">initialise_routing_control_flags</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#ab580a14d287e81d47a1720fb92e2a199">app_id</a> = <a class="code" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a9abf6c1ac9c19615539601f10f760a28">app_id</a>;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;app id %d, uncompress total entries %d&quot;</span>,</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#ab580a14d287e81d47a1720fb92e2a199">app_id</a>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8082501788d19b0833dc0d130c0bd796">uncompressed_table</a>.<a class="code" href="routing__table_8h.html#a78df0d6fd3348442567f7ab8b834101b">size</a>);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;}</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160; </div>
<div class="line"><a name="l01076"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#aaf6505dd1f37bcd324f5744dddedc3a3"> 1076</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#aaf6505dd1f37bcd324f5744dddedc3a3">initialise_compressor_processors</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="comment">// allocate DTCM memory for the processor status trackers</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;allocate and step compressor processor status&quot;</span>);</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <a class="code" href="compressor__sorter__structs_8h.html#structcompressor__processors__top__t">compressor_processors_top_t</a> *compressor_processors_top = (<span class="keywordtype">void</span> *)</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            &amp;<a class="code" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a83219002046c2cb82a5ed5d03d0c9901">processors</a>[<a class="code" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#af7e0d710a4c4d67be7c0f2578e97ff3f">n_processors</a>];</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160; </div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="comment">// Switch compressor processors to TO_BE_PREPARED</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    for (uint32_t processor_index = 0;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;            processor_index &lt; compressor_processors_top-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a4721bc2b310522a29d013ea16eace549">n_processors</a>;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            processor_index++) {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <span class="keywordtype">int</span> processor_id =</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                compressor_processors_top-&gt;<a class="code" href="compressor__sorter__structs_8h.html#afe45e56c21a93f28de52ca9b72ac35d8">processor_id</a>[processor_index];</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <a class="code" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2564c1b7bc6ea4d4c778ec3e1d70826e">TO_BE_PREPARED</a>;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    }</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;}</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01095"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#abc8ec4992e18193766cc267a4968f1d7"> 1095</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#abc8ec4992e18193766cc267a4968f1d7">initialise</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;Setting up stuff to allow bitfield compressor control process&quot;</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            <span class="stringliteral">&quot; to occur.&quot;</span>);</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160; </div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="comment">// Get pointer to 1st virtual processor info struct in SRAM</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#a657f899c766507fdf3203186b8cce7f4">initialise_user_register_tracker</a>();</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160; </div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="comment">// ensure the original table is sorted by key</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="comment">// (done here instead of by host for performance)</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <a class="code" href="bit__field__table__generator_8h.html#a6236cf9295f7f8805153cbbdd3c8cfc3">sort_table_by_key</a>(&amp;<a class="code" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>-&gt;<a class="code" href="compressor__sorter__structs_8h.html#a8082501788d19b0833dc0d130c0bd796">uncompressed_table</a>);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160; </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="comment">// get the compressor data flags (app id, compress only when needed,</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="comment">//compress as much as possible, x_entries</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <a class="code" href="bit__field__sorter__and__searcher_8c.html#ad8af6cddaab51d89d2c0a94647e01055">initialise_routing_control_flags</a>();</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160; </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="comment">// build the fake heap for allocating memory</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;setting up fake heap for sdram usage&quot;</span>);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keywordtype">bool</span> heap_creation = <a class="code" href="malloc__extras_8h.html#a1bc937477e0ff1a0d8f6322d4388508b">malloc_extras_initialise_and_build_fake_heap</a>(</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#ac2f679e18140a40be26be97edb8bb1a9">usable_sdram_regions</a>);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordflow">if</span> (!heap_creation) {</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;failed to setup stolen heap&quot;</span>);</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    }</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160; </div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="comment">// allows us to not be forced to use the safety code (</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="comment">// used in production mode)</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <a class="code" href="malloc__extras_8h.html#a61b28e08827e6631200d756a30403064">malloc_extras_turn_off_safety</a>();</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <a class="code" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;finished setting up fake heap for sdram usage&quot;</span>);</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160; </div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="comment">// get the compressor processors stored in an array</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;start init of compressor processors&quot;</span>);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="bit__field__sorter__and__searcher_8c.html#aaf6505dd1f37bcd324f5744dddedc3a3">initialise_compressor_processors</a>()) {</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;failed to init the compressor processors.&quot;</span>);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    }</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160; </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="comment">// finished init</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;}</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01137"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#aa14f4f1d4c84183b7bf7108bf930a23c"> 1137</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="bit__field__sorter__and__searcher_8c.html#aa14f4f1d4c84183b7bf7108bf930a23c">c_main</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="bit__field__sorter__and__searcher_8c.html#abc8ec4992e18193766cc267a4968f1d7">initialise</a>()) {</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        <a class="code" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;failed to init&quot;</span>);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        <a class="code" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code" href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572aa79a9cd74d0a705ad96bd17b5181c56b">EXIT_FAIL</a>);</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="comment">// set up interrupts</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    spin1_set_timer_tick(<a class="code" href="bit__field__sorter__and__searcher_8c.html#a65fd90f232757535f02c46a885e49012">TIME_STEP</a>);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#afc98f97be297e7077334cad216d32b57">spin1_callback_on</a>(<a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a06fc87d81c62e9abb8790b6e5713c55bad1110959cd9312a756c5fb1d0f0eab8d">TIMER_TICK</a>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#ac9914f4341d050b71b5e1516eb19a184">timer_callback</a>, <a class="code" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276a141de7322a9c4947e64a2da966a4b1ef">TIMER_TICK_PRIORITY</a>);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160; </div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="comment">// kick-start the process</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a653c1de1c4181f03c7ba4dbba38df9c7">spin1_schedule_callback</a>(</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;            <a class="code" href="bit__field__sorter__and__searcher_8c.html#ad89dee597d14367e18c1ac915ba8fa67">start_compression_process</a>, 0, 0, <a class="code" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276ae4b1a013c32305821940ce11363cb879">COMPRESSION_START_PRIORITY</a>);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160; </div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="comment">// go</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <a class="code" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;waiting for sycn&quot;</span>);</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#ad49e25c0f0359f6826d8addcebf1e05c">spin1_start</a>(<a class="codeRef" href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a7f5f3be8c06b875eff1b6e7501ca8446a18a6fa8889d7501469a972a54da8943c">SYNC_WAIT</a>);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;}</div>
<div class="ttc" id="abit__field_8h.html_html"><div class="ttname"><a href="http://spinnakermanchester.github.io/spinn_common/bit__field_8h.html">bit_field.h</a></div></div>
<div class="ttc" id="abit__field_8h_html_a70e667669dab5c870f1f8f97d96b4abd"><div class="ttname"><a href="http://spinnakermanchester.github.io/spinn_common/bit__field_8h.html#a70e667669dab5c870f1f8f97d96b4abd">bit_field_t</a></div><div class="ttdeci">uint32_t * bit_field_t</div></div>
<div class="ttc" id="abit__field__reader_8h_html"><div class="ttname"><a href="bit__field__reader_8h.html">bit_field_reader.h</a></div><div class="ttdoc">Code for reading bitfields in SDRAM.</div></div>
<div class="ttc" id="abit__field__reader_8h_html_a150aaf77d7d542a5e17082829de53086"><div class="ttname"><a href="bit__field__reader_8h.html#a150aaf77d7d542a5e17082829de53086">bit_field_reader_initialise</a></div><div class="ttdeci">static sorted_bit_fields_t * bit_field_reader_initialise(region_addresses_t *restrict region_addresses)</div><div class="ttdoc">Sets up the initial sorted bitfield struct.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__reader_8h_source.html#l00258">bit_field_reader.h:258</a></div></div>
<div class="ttc" id="abit__field__reader_8h_html_af63b553947cd47b27df8eeece1ddfba1"><div class="ttname"><a href="bit__field__reader_8h.html#af63b553947cd47b27df8eeece1ddfba1">bit_field_reader_read_in_bit_fields</a></div><div class="ttdeci">static void bit_field_reader_read_in_bit_fields(region_addresses_t *restrict region_addresses, sorted_bit_fields_t *restrict sorted_bit_fields)</div><div class="ttdoc">Read in bitfields.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__reader_8h_source.html#l00210">bit_field_reader.h:210</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a1281d93ddf8f8bf4e2a609794a511949"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a></div><div class="ttdeci">uint32_t time_steps</div><div class="ttdoc">DEBUG variable: counter of how many time steps have passed.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00073">bit_field_sorter_and_searcher.c:73</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a158c3d6523a5b6472c894c9294cf018c"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a158c3d6523a5b6472c894c9294cf018c">prepare_processor_first_time</a></div><div class="ttdeci">bool prepare_processor_first_time(int processor_id)</div><div class="ttdoc">Prepare a processor for the first time.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00435">bit_field_sorter_and_searcher.c:435</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a1fad8f99071ffcefe27801b5a6f9f702"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a></div><div class="ttdeci">int best_success</div><div class="ttdoc">Best midpoint that record a success.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00091">bit_field_sorter_and_searcher.c:91</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a2dfa6ebebc99da76f7dc8f92dfe8cbf1"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a2dfa6ebebc99da76f7dc8f92dfe8cbf1">malloc_tables_and_set_off_bit_compressor</a></div><div class="ttdeci">static void malloc_tables_and_set_off_bit_compressor(int mid_point, int processor_id)</div><div class="ttdoc">Build tables and tries to set off a compressor processor based off a mid-point.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00246">bit_field_sorter_and_searcher.c:246</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a2e2a5ecc993dcd419e28b31719c95e8b"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a2e2a5ecc993dcd419e28b31719c95e8b">pass_instructions_to_compressor</a></div><div class="ttdeci">static bool pass_instructions_to_compressor(uint32_t processor_id, uint32_t mid_point, uint32_t table_size)</div><div class="ttdoc">Store the addresses for freeing when response code is sent.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00209">bit_field_sorter_and_searcher.c:209</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a2f92a4e2f154f113ef10a0485e6f3e23"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a2f92a4e2f154f113ef10a0485e6f3e23">carry_on_binary_search</a></div><div class="ttdeci">void carry_on_binary_search(void)</div><div class="ttdoc">Start the binary search on another compressor if one available.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00639">bit_field_sorter_and_searcher.c:639</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a3757241911304025ec9b47e744a37d8e"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a></div><div class="ttdeci">table_t *restrict last_compressed_table</div><div class="ttdoc">The store for the last routing table that was compressed.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00100">bit_field_sorter_and_searcher.c:100</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a3ea7d15729b596b80e60ef17ce6065da"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">lowest_failure</a></div><div class="ttdeci">int lowest_failure</div><div class="ttdoc">Lowest midpoint that record failure.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00094">bit_field_sorter_and_searcher.c:94</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a49520fa4fcbd652ababa3ed7e9e002ee"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a49520fa4fcbd652ababa3ed7e9e002ee">all_compressor_processors_done</a></div><div class="ttdeci">bool all_compressor_processors_done(void)</div><div class="ttdoc">Check to see if all compressor processor are done and not ready.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00569">bit_field_sorter_and_searcher.c:569</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a605487b6ac6afbca9f5f5ff329698731"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a605487b6ac6afbca9f5f5ff329698731">SDRAM_POLL_ATTEMPTS</a></div><div class="ttdeci">#define SDRAM_POLL_ATTEMPTS</div><div class="ttdoc">Number of attempts for SDRAM poll.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00052">bit_field_sorter_and_searcher.c:52</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a657f899c766507fdf3203186b8cce7f4"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a657f899c766507fdf3203186b8cce7f4">initialise_user_register_tracker</a></div><div class="ttdeci">static void initialise_user_register_tracker(void)</div><div class="ttdoc">Set up a tracker for the user registers so that its easier to use during coding.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l01034">bit_field_sorter_and_searcher.c:1034</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a65b6025151a6ae83a91d2e39fdd63a54"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a65b6025151a6ae83a91d2e39fdd63a54">SDRAM_POLL_DELAY</a></div><div class="ttdeci">#define SDRAM_POLL_DELAY</div><div class="ttdoc">Delay between checks of SDRAM polling.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00049">bit_field_sorter_and_searcher.c:49</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a65fd90f232757535f02c46a885e49012"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a65fd90f232757535f02c46a885e49012">TIME_STEP</a></div><div class="ttdeci">#define TIME_STEP</div><div class="ttdoc">Time step for safety timer tick interrupt.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00043">bit_field_sorter_and_searcher.c:43</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a66694d23d312a1356159273319534c93"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a></div><div class="ttdeci">uncompressed_table_region_data_t *restrict uncompressed_router_table</div><div class="ttdoc">The uncompressed router table.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00080">bit_field_sorter_and_searcher.c:80</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a674c7e8652b957842f71535f081dfc46"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a674c7e8652b957842f71535f081dfc46">check_bitfield_to_routes</a></div><div class="ttdeci">static void check_bitfield_to_routes(void)</div><div class="ttdoc">Ensure that for each router table entry there is at most 1 bitfield per processor.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00931">bit_field_sorter_and_searcher.c:931</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a687d2b4119a5e8d0a1157ef1391f38a4"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a></div><div class="ttdeci">uint32_t threshold_in_bitfields</div><div class="ttdoc">The minimum number of bitfields to be merged in.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00097">bit_field_sorter_and_searcher.c:97</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a698a835cfc60d80617235e9e5879e849"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a698a835cfc60d80617235e9e5879e849">handle_best_cleanup</a></div><div class="ttdeci">static void handle_best_cleanup(void)</div><div class="ttdoc">Clean up when we've found a good compression.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00409">bit_field_sorter_and_searcher.c:409</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a6cc8469cd2af4fc03d051e88bc414e87"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a6cc8469cd2af4fc03d051e88bc414e87">send_prepare_message</a></div><div class="ttdeci">void send_prepare_message(int processor_id)</div><div class="ttdoc">Send a message telling the processor to prepare for the next run.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00174">bit_field_sorter_and_searcher.c:174</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a72e0d6c3a5bce7e5fbf2c7f586db5fa3"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a72e0d6c3a5bce7e5fbf2c7f586db5fa3">process_success</a></div><div class="ttdeci">void process_success(int mid_point, int processor_id)</div><div class="ttdoc">Handle the fact that a midpoint was successful.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00693">bit_field_sorter_and_searcher.c:693</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a7fcef664d5dc54944296abea6f026276"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276">priorities</a></div><div class="ttdeci">priorities</div><div class="ttdoc">Callback priorities.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00064">bit_field_sorter_and_searcher.c:64</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a7fcef664d5dc54944296abea6f026276a141de7322a9c4947e64a2da966a4b1ef"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276a141de7322a9c4947e64a2da966a4b1ef">TIMER_TICK_PRIORITY</a></div><div class="ttdeci">@ TIMER_TICK_PRIORITY</div><div class="ttdoc">Timer tick is high priority.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00067">bit_field_sorter_and_searcher.c:66</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a7fcef664d5dc54944296abea6f026276ae4b1a013c32305821940ce11363cb879"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276ae4b1a013c32305821940ce11363cb879">COMPRESSION_START_PRIORITY</a></div><div class="ttdeci">@ COMPRESSION_START_PRIORITY</div><div class="ttdoc">General processing is low priority.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00065">bit_field_sorter_and_searcher.c:65</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a85c24f73513945a5d698d12620719e6d"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a85c24f73513945a5d698d12620719e6d">check_compressors</a></div><div class="ttdeci">void check_compressors(uint unused0, uint unused1)</div><div class="ttdoc">Check compressors' state till they're finished.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00851">bit_field_sorter_and_searcher.c:851</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a87231bf5b93d39515d3ca6d88fdd8196"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a87231bf5b93d39515d3ca6d88fdd8196">set_merged_filters</a></div><div class="ttdeci">static void set_merged_filters(void)</div><div class="ttdoc">Set the flag for the merged filters.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00304">bit_field_sorter_and_searcher.c:304</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a873db400c665ddf0dc98973663ebdef0"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a></div><div class="ttdeci">bit_field_t tested_mid_points</div><div class="ttdoc">Stores which values have been tested.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00110">bit_field_sorter_and_searcher.c:110</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a886d527c16dc0e3986b31801ca0dec69"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a886d527c16dc0e3986b31801ca0dec69">ROUTE_APP_ID_BIT_SHIFT</a></div><div class="ttdeci">#define ROUTE_APP_ID_BIT_SHIFT</div><div class="ttdoc">Bit shift for the app id for the route.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00061">bit_field_sorter_and_searcher.c:61</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a8a87babcb3249c6fc47b2325baa8ff07"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a8a87babcb3249c6fc47b2325baa8ff07">load_routing_table_into_router</a></div><div class="ttdeci">static bool load_routing_table_into_router(void)</div><div class="ttdoc">Load the best routing table to the router.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00126">bit_field_sorter_and_searcher.c:126</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a92a4dc5c2b97aa7fb1c4a353e24e459c"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a92a4dc5c2b97aa7fb1c4a353e24e459c">all_compressor_processors_busy</a></div><div class="ttdeci">bool all_compressor_processors_busy(void)</div><div class="ttdoc">Check if a compressor processor is available.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00547">bit_field_sorter_and_searcher.c:547</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a947e5c5e068c20feb3d0470199964f37"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a947e5c5e068c20feb3d0470199964f37">RTR_MC_FAILED</a></div><div class="ttdeci">#define RTR_MC_FAILED</div><div class="ttdoc">Flag for if a rtr_mc failure.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00058">bit_field_sorter_and_searcher.c:58</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_aa14f4f1d4c84183b7bf7108bf930a23c"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#aa14f4f1d4c84183b7bf7108bf930a23c">c_main</a></div><div class="ttdeci">void c_main(void)</div><div class="ttdoc">The main entrance.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l01137">bit_field_sorter_and_searcher.c:1137</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_aabb7e8da822c5d0a45b1ed8032ede71c"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#aabb7e8da822c5d0a45b1ed8032ede71c">send_force_stop_message</a></div><div class="ttdeci">void send_force_stop_message(int processor_id)</div><div class="ttdoc">Send a message forcing the processor to stop its compression attempt.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00163">bit_field_sorter_and_searcher.c:163</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_aaf61d0e8c4cdc01297fe1d4725ec1aab"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#aaf61d0e8c4cdc01297fe1d4725ec1aab">process_failed</a></div><div class="ttdeci">void process_failed(int mid_point, int processor_id)</div><div class="ttdoc">Handle the fact that a midpoint failed for reasons other than memory allocation.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00750">bit_field_sorter_and_searcher.c:750</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_aaf6505dd1f37bcd324f5744dddedc3a3"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#aaf6505dd1f37bcd324f5744dddedc3a3">initialise_compressor_processors</a></div><div class="ttdeci">bool initialise_compressor_processors(void)</div><div class="ttdoc">Set things up for the compressor processors so they are ready to be compressing.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l01076">bit_field_sorter_and_searcher.c:1076</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ab01f3414297cde2079c919d64846e836"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ab01f3414297cde2079c919d64846e836">get_this_vcpu_info</a></div><div class="ttdeci">static vcpu_t * get_this_vcpu_info(void)</div><div class="ttdoc">Get a handle to this CPU's vcpu structure.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l01025">bit_field_sorter_and_searcher.c:1025</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ab580a14d287e81d47a1720fb92e2a199"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ab580a14d287e81d47a1720fb92e2a199">app_id</a></div><div class="ttdeci">uint32_t app_id</div><div class="ttdoc">The compressor's SARK application id.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00103">bit_field_sorter_and_searcher.c:103</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ab98e0806224b412ce1199a4a1ff2f388"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ab98e0806224b412ce1199a4a1ff2f388">start_binary_search</a></div><div class="ttdeci">void start_binary_search(void)</div><div class="ttdoc">Start binary search on all compressors dividing the bitfields as evenly as possible.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00881">bit_field_sorter_and_searcher.c:881</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_abc8ec4992e18193766cc267a4968f1d7"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#abc8ec4992e18193766cc267a4968f1d7">initialise</a></div><div class="ttdeci">static bool initialise(void)</div><div class="ttdoc">Callback to set off the router compressor.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l01095">bit_field_sorter_and_searcher.c:1095</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_abd3f1ab2220a36c573ef63d1876a8956"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a></div><div class="ttdeci">comms_sdram_t *restrict comms_sdram</div><div class="ttdoc">SDRAM used to communicate with the compressors.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00113">bit_field_sorter_and_searcher.c:113</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_abe73a2259d14e3152ae6ff8192ed5afb"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a></div><div class="ttdeci">sorted_bit_fields_t *restrict sorted_bit_fields</div><div class="ttdoc">the list of bitfields in sorted order based off best effect, and processor ids.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00107">bit_field_sorter_and_searcher.c:107</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_abf1d619d795cc5348b19805e77469a1b"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#abf1d619d795cc5348b19805e77469a1b">exit_carry_on_if_all_compressor_processors_done</a></div><div class="ttdeci">bool exit_carry_on_if_all_compressor_processors_done(void)</div><div class="ttdoc">Check if all processors are done; if yes, run best and exit.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00581">bit_field_sorter_and_searcher.c:581</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ac0690f4848866c991ba93ee6ea829eb6"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ac0690f4848866c991ba93ee6ea829eb6">retires_left</a></div><div class="ttdeci">uint32_t retires_left</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00120">bit_field_sorter_and_searcher.c:120</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ac2f679e18140a40be26be97edb8bb1a9"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ac2f679e18140a40be26be97edb8bb1a9">usable_sdram_regions</a></div><div class="ttdeci">available_sdram_blocks *restrict usable_sdram_regions</div><div class="ttdoc">SDRAM blocks that the fake heap can use.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00088">bit_field_sorter_and_searcher.c:88</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ac9914f4341d050b71b5e1516eb19a184"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ac9914f4341d050b71b5e1516eb19a184">timer_callback</a></div><div class="ttdeci">void timer_callback(uint unused0, uint unused1)</div><div class="ttdoc">Timer interrupt for controlling time taken to try to compress table.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00676">bit_field_sorter_and_searcher.c:676</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_acf36c228ebab2d1aeea784bd9f6660f3"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#acf36c228ebab2d1aeea784bd9f6660f3">KILL_TIME</a></div><div class="ttdeci">#define KILL_TIME</div><div class="ttdoc">After how many time steps to kill the process.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00046">bit_field_sorter_and_searcher.c:46</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ad1edafabb830bb65416e6254bd0cc74c"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ad1edafabb830bb65416e6254bd0cc74c">find_prepared_processor</a></div><div class="ttdeci">int find_prepared_processor(void)</div><div class="ttdoc">Get the next processor id which is ready to run a compression.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00473">bit_field_sorter_and_searcher.c:473</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ad25e5b4067e405459a984cefacdcd02e"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ad25e5b4067e405459a984cefacdcd02e">process_failed_malloc</a></div><div class="ttdeci">void process_failed_malloc(int mid_point, int processor_id)</div><div class="ttdoc">Handle the fact that a midpoint failed due to insufficient memory.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00726">bit_field_sorter_and_searcher.c:726</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ad3147e0fb533cf1158003dd6cf0c5d45"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ad3147e0fb533cf1158003dd6cf0c5d45">ADD_INCLUSIVE_BIT</a></div><div class="ttdeci">#define ADD_INCLUSIVE_BIT</div><div class="ttdoc">The magic +1 for inclusive coverage that 0 index is no bitfields.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00055">bit_field_sorter_and_searcher.c:55</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ad690fc1413aedf136f80b660e48d2326"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ad690fc1413aedf136f80b660e48d2326">just_reduced_cores_due_to_malloc</a></div><div class="ttdeci">bool just_reduced_cores_due_to_malloc</div><div class="ttdoc">Record if the last action was to reduce cores due to malloc.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00116">bit_field_sorter_and_searcher.c:116</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ad89dee597d14367e18c1ac915ba8fa67"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ad89dee597d14367e18c1ac915ba8fa67">start_compression_process</a></div><div class="ttdeci">void start_compression_process(uint unused0, uint unused1)</div><div class="ttdoc">Start the work for the compression search.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00961">bit_field_sorter_and_searcher.c:961</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ad8af6cddaab51d89d2c0a94647e01055"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ad8af6cddaab51d89d2c0a94647e01055">initialise_routing_control_flags</a></div><div class="ttdeci">static void initialise_routing_control_flags(void)</div><div class="ttdoc">Read in router table setup parameters.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l01067">bit_field_sorter_and_searcher.c:1067</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_adc7135678f90b4c7dbdd4d1d4b56dacb"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#adc7135678f90b4c7dbdd4d1d4b56dacb">setup_no_bitfields_attempt</a></div><div class="ttdeci">bool setup_no_bitfields_attempt(void)</div><div class="ttdoc">Set up the compression attempt for the no bitfield version.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00523">bit_field_sorter_and_searcher.c:523</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ae79865738cd37176e6520d72154ce64a"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ae79865738cd37176e6520d72154ce64a">process_compressor_response</a></div><div class="ttdeci">void process_compressor_response(int processor_id, compressor_states finished_state)</div><div class="ttdoc">Process the response from a compressor's attempt to compress.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00790">bit_field_sorter_and_searcher.c:790</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ae8632d32eb1045a224b14fd8535005ab"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">terminated</a></div><div class="ttdeci">volatile bool terminated</div><div class="ttdoc">Whether we found a stopping position.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00076">bit_field_sorter_and_searcher.c:76</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_af4f616ec6ec66cfb3babbc369e942fa4"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a></div><div class="ttdeci">region_addresses_t *restrict region_addresses</div><div class="ttdoc">The locations of bitfields from application processors.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00084">bit_field_sorter_and_searcher.c:84</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_af7b9d9039e3528de45dd0cdfaae99d56"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#af7b9d9039e3528de45dd0cdfaae99d56">find_compressor_processor_and_set_tracker</a></div><div class="ttdeci">int find_compressor_processor_and_set_tracker(int midpoint)</div><div class="ttdoc">Get the next processor ID which is ready to run a compression.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00508">bit_field_sorter_and_searcher.c:508</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_af8905b57f57799ccb76d07dadb273efd"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#af8905b57f57799ccb76d07dadb273efd">locate_next_mid_point</a></div><div class="ttdeci">static int locate_next_mid_point(void)</div><div class="ttdoc">Locate the next valid midpoint to test.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00316">bit_field_sorter_and_searcher.c:316</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_afc6d9b52b2ed114671d16255f1fcbcff"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#afc6d9b52b2ed114671d16255f1fcbcff">set_up_tested_mid_points</a></div><div class="ttdeci">static bool set_up_tested_mid_points(void)</div><div class="ttdoc">Set up the search bitfields.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00183">bit_field_sorter_and_searcher.c:183</a></div></div>
<div class="ttc" id="abit__field__table__generator_8h_html"><div class="ttname"><a href="bit__field__table__generator_8h.html">bit_field_table_generator.h</a></div><div class="ttdoc">The table generator support code.</div></div>
<div class="ttc" id="abit__field__table__generator_8h_html_a6236cf9295f7f8805153cbbdd3c8cfc3"><div class="ttname"><a href="bit__field__table__generator_8h.html#a6236cf9295f7f8805153cbbdd3c8cfc3">sort_table_by_key</a></div><div class="ttdeci">void sort_table_by_key(table_t *table)</div><div class="ttdoc">Sort a given table so that the entries in the table are by key value.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__table__generator_8h_source.html#l00210">bit_field_table_generator.h:210</a></div></div>
<div class="ttc" id="abit__field__table__generator_8h_html_af67eedbb6f9ea96b5d8eb2cede279c48"><div class="ttname"><a href="bit__field__table__generator_8h.html#af67eedbb6f9ea96b5d8eb2cede279c48">bit_field_table_generator_max_size</a></div><div class="ttdeci">static uint32_t bit_field_table_generator_max_size(int mid_point, table_t *restrict uncompressed_table, sorted_bit_fields_t *restrict sorted_bit_fields)</div><div class="ttdoc">Take a midpoint and read the sorted bitfields, computing the max size of the routing table.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__table__generator_8h_source.html#l00113">bit_field_table_generator.h:113</a></div></div>
<div class="ttc" id="acircular__buffer_8h.html_html"><div class="ttname"><a href="http://spinnakermanchester.github.io/spinn_common/circular__buffer_8h.html">circular_buffer.h</a></div></div>
<div class="ttc" id="acommon-typedefs_8h_html"><div class="ttname"><a href="common-typedefs_8h.html">common-typedefs.h</a></div><div class="ttdoc">Data type definitions for SpiNNaker Neuron-modelling.</div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html"><div class="ttname"><a href="compressor__sorter__structs_8h.html">compressor_sorter_structs.h</a></div><div class="ttdoc">Structures and enumerations for the bitfield compressor sorter.</div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a03f1642ac01ef3f580198223b92d9cd4"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a03f1642ac01ef3f580198223b92d9cd4">multi_table_t::n_sub_tables</a></div><div class="ttdeci">uint32_t n_sub_tables</div><div class="ttdoc">The number of individual subtables.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00076">compressor_sorter_structs.h:76</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a1098c00b19e53a646354531429069840"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a1098c00b19e53a646354531429069840">comms_sdram_t::fake_heap_data</a></div><div class="ttdeci">heap_t * fake_heap_data</div><div class="ttdoc">initialise value for malloc_extras (Same for all compressors)</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00130">compressor_sorter_structs.h:130</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a225b90b549bc339e36c01da347a0ef3c"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a225b90b549bc339e36c01da347a0ef3c">region_addresses_t::comms_sdram</a></div><div class="ttdeci">comms_sdram_t * comms_sdram</div><div class="ttdoc">Pointer to the area malloced to hold the comms_sdram.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00148">compressor_sorter_structs.h:148</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a27edc56ca90e5e5fff6eee12c9ffadc2"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a27edc56ca90e5e5fff6eee12c9ffadc2">bitfield_proc_t::processor</a></div><div class="ttdeci">int processor</div><div class="ttdoc">The core associated with the bitfield.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00138">compressor_sorter_structs.h:138</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a46a7223253ff3d5d43ad0a71058b4795"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a46a7223253ff3d5d43ad0a71058b4795">multi_table_t::n_entries</a></div><div class="ttdeci">int n_entries</div><div class="ttdoc">The number of entry_t entries actually in the tables.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00080">compressor_sorter_structs.h:80</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a4721bc2b310522a29d013ea16eace549"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a4721bc2b310522a29d013ea16eace549">compressor_processors_top_t::n_processors</a></div><div class="ttdeci">uint32_t n_processors</div><div class="ttdoc">The number of processor_id(s) in the list.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00088">compressor_sorter_structs.h:88</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a51efd0e36bf8f32e7fae4670b84dff91"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a51efd0e36bf8f32e7fae4670b84dff91">comms_sdram_t::routing_tables</a></div><div class="ttdeci">multi_table_t * routing_tables</div><div class="ttdoc">Pointer to the uncompressed tables metadata.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00126">compressor_sorter_structs.h:126</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a69f0516a2f97f34460eea02de697034e"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a69f0516a2f97f34460eea02de697034e">comms_sdram_t::uncompressed_router_table</a></div><div class="ttdeci">table_t * uncompressed_router_table</div><div class="ttdoc">Pointer to the shared version of the uncompressed routing table.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00124">compressor_sorter_structs.h:124</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a6adeafbfed85221d82b0340a70e9f1d0"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a6adeafbfed85221d82b0340a70e9f1d0">sorted_bit_fields_t::bit_fields</a></div><div class="ttdeci">filter_info_t ** bit_fields</div><div class="ttdoc">the list of bitfields in sorted order based off best effect.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00110">compressor_sorter_structs.h:110</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a70755b2138b556e54db6c862767af5a0"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a70755b2138b556e54db6c862767af5a0">comms_sdram_t::mid_point</a></div><div class="ttdeci">int mid_point</div><div class="ttdoc">how many bit fields were used to make those tables</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00122">compressor_sorter_structs.h:122</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a8082501788d19b0833dc0d130c0bd796"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a8082501788d19b0833dc0d130c0bd796">uncompressed_table_region_data_t::uncompressed_table</a></div><div class="ttdeci">table_t uncompressed_table</div><div class="ttdoc">table struct</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00098">compressor_sorter_structs.h:98</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a82af5714aab971cccd2493b7c6a4c5df"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a82af5714aab971cccd2493b7c6a4c5df">region_addresses_t::retry_count</a></div><div class="ttdeci">uint32_t retry_count</div><div class="ttdoc">Number of times that the sorters should set of the compressions again.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00146">compressor_sorter_structs.h:146</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a83219002046c2cb82a5ed5d03d0c9901"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a83219002046c2cb82a5ed5d03d0c9901">region_addresses_t::processors</a></div><div class="ttdeci">bitfield_proc_t processors[]</div><div class="ttdoc">The data for the processors.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00152">compressor_sorter_structs.h:152</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a87955dbae6fb7763d3a90f8e7d66f07f"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a87955dbae6fb7763d3a90f8e7d66f07f">comms_sdram_t::sorted_bit_fields</a></div><div class="ttdeci">sorted_bit_fields_t * sorted_bit_fields</div><div class="ttdoc">Pointer to the whole sorted_bit_fields data.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00128">compressor_sorter_structs.h:128</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a8b5a77623d60efcd7cb45ce654f0cb9d"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">sorted_bit_fields_t::n_bit_fields</a></div><div class="ttdeci">int n_bit_fields</div><div class="ttdoc">length of the arrays</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00106">compressor_sorter_structs.h:106</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a9abf6c1ac9c19615539601f10f760a28"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a9abf6c1ac9c19615539601f10f760a28">uncompressed_table_region_data_t::app_id</a></div><div class="ttdeci">uint32_t app_id</div><div class="ttdoc">the application ID</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00096">compressor_sorter_structs.h:96</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a9c8f01d4cc8cfc2b4377fe14f39e13ff"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a9c8f01d4cc8cfc2b4377fe14f39e13ff">comms_sdram_t::compressor_state</a></div><div class="ttdeci">compressor_states compressor_state</div><div class="ttdoc">The state the compressor is in.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00118">compressor_sorter_structs.h:118</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_aa3e340fc51f415aead32fee83ef70de3a179a40541f7c969c4effd946f5fd72b9"><div class="ttname"><a href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a179a40541f7c969c4effd946f5fd72b9">FORCE_TO_STOP</a></div><div class="ttdeci">@ FORCE_TO_STOP</div><div class="ttdoc">Flag to say processor should stop as result no longer needed.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00066">compressor_sorter_structs.h:65</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_aa3e340fc51f415aead32fee83ef70de3a2564c1b7bc6ea4d4c778ec3e1d70826e"><div class="ttname"><a href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2564c1b7bc6ea4d4c778ec3e1d70826e">TO_BE_PREPARED</a></div><div class="ttdeci">@ TO_BE_PREPARED</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00059">compressor_sorter_structs.h:59</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee"><div class="ttname"><a href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a></div><div class="ttdeci">@ PREPARE</div><div class="ttdoc">Flag to ask compressor to setup and clear any previous result.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00061">compressor_sorter_structs.h:61</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_aa3e340fc51f415aead32fee83ef70de3a3373d705e500da21f936be7ec6b57802"><div class="ttname"><a href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a3373d705e500da21f936be7ec6b57802">DO_NOT_USE</a></div><div class="ttdeci">@ DO_NOT_USE</div><div class="ttdoc">Flag for saying compression processor will not be used any more.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00056">compressor_sorter_structs.h:56</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_aa3e340fc51f415aead32fee83ef70de3a439c688a4e9ed31638d5922a50680a8e"><div class="ttname"><a href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a439c688a4e9ed31638d5922a50680a8e">RUN</a></div><div class="ttdeci">@ RUN</div><div class="ttdoc">Flag to say processor shoukd run.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00063">compressor_sorter_structs.h:63</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_aa3e340fc51f415aead32fee83ef70de3a61f110d0003851c81fc0d250f8d32e00"><div class="ttname"><a href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a61f110d0003851c81fc0d250f8d32e00">NOT_COMPRESSOR</a></div><div class="ttdeci">@ NOT_COMPRESSOR</div><div class="ttdoc">Flag for saying processor is not a compressor.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00054">compressor_sorter_structs.h:54</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_aaca19377972d2042c5cfd18a011eea1f"><div class="ttname"><a href="compressor__sorter__structs_8h.html#aaca19377972d2042c5cfd18a011eea1f">multi_table_t::sub_tables</a></div><div class="ttdeci">table_t ** sub_tables</div><div class="ttdoc">The individual subtables.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00074">compressor_sorter_structs.h:74</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac124d280cf92fb450e1e72a58b88253f"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253f">compressor_states</a></div><div class="ttdeci">compressor_states</div><div class="ttdoc">the acceptable finish states</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00031">compressor_sorter_structs.h:31</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac124d280cf92fb450e1e72a58b88253fa488d46012070df0693507cde3473cb37"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa488d46012070df0693507cde3473cb37">UNUSED_CORE</a></div><div class="ttdeci">@ UNUSED_CORE</div><div class="ttdoc">Flag to say this core has never been used or prepared.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00033">compressor_sorter_structs.h:33</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac124d280cf92fb450e1e72a58b88253fa4d8a6f033344df4f3b8fa419b8db0edb"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa4d8a6f033344df4f3b8fa419b8db0edb">FAILED_MALLOC</a></div><div class="ttdeci">@ FAILED_MALLOC</div><div class="ttdoc">Flag to say the last compression run ended due to a malloc failure.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00039">compressor_sorter_structs.h:39</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac124d280cf92fb450e1e72a58b88253fa5ea53c4d2b4459dae1e1910851e5b458"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa5ea53c4d2b4459dae1e1910851e5b458">COMPRESSING</a></div><div class="ttdeci">@ COMPRESSING</div><div class="ttdoc">Flag to say compressor is acticvely compressing.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00037">compressor_sorter_structs.h:37</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac124d280cf92fb450e1e72a58b88253fa7b909bad27a8bc8dd8c6d464ac3a1478"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa7b909bad27a8bc8dd8c6d464ac3a1478">SUCCESSFUL_COMPRESSION</a></div><div class="ttdeci">@ SUCCESSFUL_COMPRESSION</div><div class="ttdoc">Flag to say previous run was successful.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00044">compressor_sorter_structs.h:44</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac124d280cf92fb450e1e72a58b88253fa7c1602ccad57389b8999601cd8025a95"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa7c1602ccad57389b8999601cd8025a95">FAILED_TO_COMPRESS</a></div><div class="ttdeci">@ FAILED_TO_COMPRESS</div><div class="ttdoc">Flag to say previous run finished but without a small enough table.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00046">compressor_sorter_structs.h:46</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac124d280cf92fb450e1e72a58b88253faacc8682efbd3957ac911dbb6fe2459b0"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253faacc8682efbd3957ac911dbb6fe2459b0">RAN_OUT_OF_TIME</a></div><div class="ttdeci">@ RAN_OUT_OF_TIME</div><div class="ttdoc">Flag to say previous run was aborted as it ran out of time.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00049">compressor_sorter_structs.h:48</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac124d280cf92fb450e1e72a58b88253faca587e6ced264bc7afe62847cffb45ab"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253faca587e6ced264bc7afe62847cffb45ab">PREPARED</a></div><div class="ttdeci">@ PREPARED</div><div class="ttdoc">Flag to say compressor is ready to run. This clears previous results.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00035">compressor_sorter_structs.h:35</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac124d280cf92fb450e1e72a58b88253facd1b57bf58f3e2dc4ef7ddf051739cf8"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253facd1b57bf58f3e2dc4ef7ddf051739cf8">FORCED_BY_COMPRESSOR_CONTROL</a></div><div class="ttdeci">@ FORCED_BY_COMPRESSOR_CONTROL</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00042">compressor_sorter_structs.h:42</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac140cc5f3be0d158436780d491616058"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac140cc5f3be0d158436780d491616058">bitfield_proc_t::filter</a></div><div class="ttdeci">filter_region_t * filter</div><div class="ttdoc">The bitfield wrapper.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00136">compressor_sorter_structs.h:136</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_adbf7cfb3fc725eadae6decaedd0f97e6"><div class="ttname"><a href="compressor__sorter__structs_8h.html#adbf7cfb3fc725eadae6decaedd0f97e6">region_addresses_t::threshold</a></div><div class="ttdeci">uint32_t threshold</div><div class="ttdoc">Minimum percentage of bitfields to be merge in (currently ignored)</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00144">compressor_sorter_structs.h:144</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_af4b5f57fe7834c14c9d6c5e3e4ecadca"><div class="ttname"><a href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">comms_sdram_t::sorter_instruction</a></div><div class="ttdeci">instructions_to_compressor sorter_instruction</div><div class="ttdoc">The last instruction passed from the sorter to the compressor.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00120">compressor_sorter_structs.h:120</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_af7e0d710a4c4d67be7c0f2578e97ff3f"><div class="ttname"><a href="compressor__sorter__structs_8h.html#af7e0d710a4c4d67be7c0f2578e97ff3f">region_addresses_t::n_processors</a></div><div class="ttdeci">int n_processors</div><div class="ttdoc">Number of processors in the list.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00150">compressor_sorter_structs.h:150</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_afa13939be549fe271504e4d2c411b070"><div class="ttname"><a href="compressor__sorter__structs_8h.html#afa13939be549fe271504e4d2c411b070">sorted_bit_fields_t::sort_order</a></div><div class="ttdeci">int * sort_order</div><div class="ttdoc">the sort order based on best contribution to reducing redundancy</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00112">compressor_sorter_structs.h:112</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_afdb80f23a54430e4c9eb5b51120e211a"><div class="ttname"><a href="compressor__sorter__structs_8h.html#afdb80f23a54430e4c9eb5b51120e211a">sorted_bit_fields_t::processor_ids</a></div><div class="ttdeci">int * processor_ids</div><div class="ttdoc">list of bitfield associated processor IDs.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00108">compressor_sorter_structs.h:108</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_afe45e56c21a93f28de52ca9b72ac35d8"><div class="ttname"><a href="compressor__sorter__structs_8h.html#afe45e56c21a93f28de52ca9b72ac35d8">compressor_processors_top_t::processor_id</a></div><div class="ttdeci">uint32_t processor_id[]</div><div class="ttdoc">List of the ids of processors that can be used as compressors.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00090">compressor_sorter_structs.h:90</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_structcomms__sdram__t"><div class="ttname"><a href="compressor__sorter__structs_8h.html#structcomms__sdram__t">comms_sdram_t</a></div><div class="ttdoc">SDRAM area to communicate between sorter and compressor.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00116">compressor_sorter_structs.h:116</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_structcompressor__processors__top__t"><div class="ttname"><a href="compressor__sorter__structs_8h.html#structcompressor__processors__top__t">compressor_processors_top_t</a></div><div class="ttdoc">the list of cores that can be used as compressor processor</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00086">compressor_sorter_structs.h:86</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_structmulti__table__t"><div class="ttname"><a href="compressor__sorter__structs_8h.html#structmulti__table__t">multi_table_t</a></div><div class="ttdoc">Holds the data to initialise routing_table.h.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00072">compressor_sorter_structs.h:72</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_structregion__addresses__t"><div class="ttname"><a href="compressor__sorter__structs_8h.html#structregion__addresses__t">region_addresses_t</a></div><div class="ttdoc">top-level structure in the addresses area</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00142">compressor_sorter_structs.h:142</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_structsorted__bit__fields__t"><div class="ttname"><a href="compressor__sorter__structs_8h.html#structsorted__bit__fields__t">sorted_bit_fields_t</a></div><div class="ttdoc">Holds the list of bitfield associated processor IDs.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00104">compressor_sorter_structs.h:104</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_structuncompressed__table__region__data__t"><div class="ttname"><a href="compressor__sorter__structs_8h.html#structuncompressed__table__region__data__t">uncompressed_table_region_data_t</a></div><div class="ttdoc">uncompressed routing table region</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00094">compressor_sorter_structs.h:94</a></div></div>
<div class="ttc" id="aconstants_8h_html"><div class="ttname"><a href="constants_8h.html">constants.h</a></div><div class="ttdoc">General constants.</div></div>
<div class="ttc" id="aconstants_8h_html_a01afb482fee16ed0bb6551bf1036320e"><div class="ttname"><a href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a></div><div class="ttdeci">#define FAILED_TO_FIND</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00048">constants.h:48</a></div></div>
<div class="ttc" id="aconstants_8h_html_a06a361793cd452d8bf77be63631b1b2b"><div class="ttname"><a href="constants_8h.html#a06a361793cd452d8bf77be63631b1b2b">NO_BIT_FIELDS</a></div><div class="ttdeci">#define NO_BIT_FIELDS</div><div class="ttdoc">number of bitfields that no bitfields run needs</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00060">constants.h:60</a></div></div>
<div class="ttc" id="aconstants_8h_html_aee0039d5201837dd96d203f298beed72"><div class="ttname"><a href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a></div><div class="ttdeci">#define MAX_PROCESSORS</div><div class="ttdoc">max number of processors on chip used for app purposes</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00026">constants.h:26</a></div></div>
<div class="ttc" id="adata__specification_8h_html"><div class="ttname"><a href="data__specification_8h.html">data_specification.h</a></div><div class="ttdoc">Data Specification region access API.</div></div>
<div class="ttc" id="adata__specification_8h_html_structdata__specification__metadata__t"><div class="ttname"><a href="data__specification_8h.html#structdata__specification__metadata__t">data_specification_metadata_t</a></div><div class="ttdoc">The central structure that the DSE writes.</div><div class="ttdef"><b>Definition:</b> <a href="data__specification_8h_source.html#l00037">data_specification.h:37</a></div></div>
<div class="ttc" id="adebug_8h_html"><div class="ttname"><a href="debug_8h.html">debug.h</a></div><div class="ttdoc">SpiNNaker debug header file.</div></div>
<div class="ttc" id="adebug_8h_html_a0327644dae0a0a5d4bdc8f7b6f54e31e"><div class="ttname"><a href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a></div><div class="ttdeci">void log_error(const char *message,...)</div><div class="ttdoc">This function logs errors. Errors usually indicate a serious fault in the program,...</div></div>
<div class="ttc" id="adebug_8h_html_a9845e8157cc395cb8f3ed1761048e4f3"><div class="ttname"><a href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a></div><div class="ttdeci">void log_debug(const char *message,...)</div><div class="ttdoc">This function logs debugging messages. This level of message is normally not printed except when the ...</div></div>
<div class="ttc" id="adebug_8h_html_af4431e39155e80c53e1f9aab22d5a0ef"><div class="ttname"><a href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a></div><div class="ttdeci">void log_info(const char *message,...)</div><div class="ttdoc">This function logs informational messages. This is the lowest level of message normally printed.</div></div>
<div class="ttc" id="afilter__info_8h_html_a1a484e14dd6870e23e8f838d72c0b388"><div class="ttname"><a href="filter__info_8h.html#a1a484e14dd6870e23e8f838d72c0b388">filter_info_t::merged</a></div><div class="ttdeci">uint32_t merged</div><div class="ttdoc">Flag to indicate if the filter has been merged.</div><div class="ttdef"><b>Definition:</b> <a href="filter__info_8h_source.html#l00031">filter_info.h:31</a></div></div>
<div class="ttc" id="afilter__info_8h_html_ae4e76f28cca7de5a1e56c9d7a7dd6a85"><div class="ttname"><a href="filter__info_8h.html#ae4e76f28cca7de5a1e56c9d7a7dd6a85">filter_info_t::key</a></div><div class="ttdeci">uint32_t key</div><div class="ttdoc">Bit field master population key.</div><div class="ttdef"><b>Definition:</b> <a href="filter__info_8h_source.html#l00029">filter_info.h:29</a></div></div>
<div class="ttc" id="afilter__info_8h_html_structfilter__info__t"><div class="ttname"><a href="filter__info_8h.html#structfilter__info__t">filter_info_t</a></div><div class="ttdoc">Describes a single filter, which is a wrapper for bit_field_t.</div><div class="ttdef"><b>Definition:</b> <a href="filter__info_8h_source.html#l00027">filter_info.h:27</a></div></div>
<div class="ttc" id="afilter__info_8h_html_structfilter__region__t"><div class="ttname"><a href="filter__info_8h.html#structfilter__region__t">filter_region_t</a></div><div class="ttdoc">The contents of the bitfield region in SDRAM.</div><div class="ttdef"><b>Definition:</b> <a href="filter__info_8h_source.html#l00041">filter_info.h:41</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html"><div class="ttname"><a href="malloc__extras_8h.html">malloc_extras.h</a></div><div class="ttdoc">Support for adding debugging information to dynamic allocation.</div></div>
<div class="ttc" id="amalloc__extras_8h_html_a1bc937477e0ff1a0d8f6322d4388508b"><div class="ttname"><a href="malloc__extras_8h.html#a1bc937477e0ff1a0d8f6322d4388508b">malloc_extras_initialise_and_build_fake_heap</a></div><div class="ttdeci">bool malloc_extras_initialise_and_build_fake_heap(available_sdram_blocks *sizes_region)</div><div class="ttdoc">Builds a new heap based off stolen sdram blocks from cores synaptic matrices.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8c_source.html#l00388">malloc_extras.c:388</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_a3e218828af7ddd3f4cd0d3772562b520"><div class="ttname"><a href="malloc__extras_8h.html#a3e218828af7ddd3f4cd0d3772562b520">MALLOC</a></div><div class="ttdeci">#define MALLOC</div><div class="ttdoc">An easily-insertable name for the memory allocator.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8h_source.html#l00146">malloc_extras.h:146</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_a4cbf58bc77fc32df9066c3139c128572a012df54a47467268a8bb9acb9d9a2473"><div class="ttname"><a href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572a012df54a47467268a8bb9acb9d9a2473">EXITED_CLEANLY</a></div><div class="ttdeci">@ EXITED_CLEANLY</div><div class="ttdoc">Everything is fine.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8h_source.html#l00030">malloc_extras.h:30</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_a4cbf58bc77fc32df9066c3139c128572aa79a9cd74d0a705ad96bd17b5181c56b"><div class="ttname"><a href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572aa79a9cd74d0a705ad96bd17b5181c56b">EXIT_FAIL</a></div><div class="ttdeci">@ EXIT_FAIL</div><div class="ttdoc">We went wrong but we dont want to RTE.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8h_source.html#l00032">malloc_extras.h:32</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_a4cbf58bc77fc32df9066c3139c128572ace6a5af7573c1cc48533acf408307ad3"><div class="ttname"><a href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572ace6a5af7573c1cc48533acf408307ad3">EXIT_MALLOC</a></div><div class="ttdeci">@ EXIT_MALLOC</div><div class="ttdoc">We ran out of space and we want to RTE.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8h_source.html#l00034">malloc_extras.h:34</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_a4cbf58bc77fc32df9066c3139c128572adf50834e361027bbbe08aad6ebd36d19"><div class="ttname"><a href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572adf50834e361027bbbe08aad6ebd36d19">EXIT_SWERR</a></div><div class="ttdeci">@ EXIT_SWERR</div><div class="ttdoc">We hit an internal error and we want to RTE.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8h_source.html#l00036">malloc_extras.h:36</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_a52d8f9cf4967316758b7148966fffeef"><div class="ttname"><a href="malloc__extras_8h.html#a52d8f9cf4967316758b7148966fffeef">MALLOC_SDRAM</a></div><div class="ttdeci">#define MALLOC_SDRAM</div><div class="ttdoc">An easily-insertable name for the memory allocator that uses the large pool.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8h_source.html#l00152">malloc_extras.h:152</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_a61b28e08827e6631200d756a30403064"><div class="ttname"><a href="malloc__extras_8h.html#a61b28e08827e6631200d756a30403064">malloc_extras_turn_off_safety</a></div><div class="ttdeci">void malloc_extras_turn_off_safety(void)</div><div class="ttdoc">Turn off safety code if wanted.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8c_source.html#l00064">malloc_extras.c:64</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_a6e49867f1ee0742dd71e2666bd23f14b"><div class="ttname"><a href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a></div><div class="ttdeci">void malloc_extras_terminate(uint result_code)</div><div class="ttdoc">Stops execution with a result code.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8c_source.html#l00083">malloc_extras.c:83</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_a9a8e700d56e7d858108b755ad3edb52e"><div class="ttname"><a href="malloc__extras_8h.html#a9a8e700d56e7d858108b755ad3edb52e">FREE</a></div><div class="ttdeci">#define FREE</div><div class="ttdoc">An easily-insertable name for the memory free.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8h_source.html#l00148">malloc_extras.h:148</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_ac98a576116d9cd8509e0a0d02defc41c"><div class="ttname"><a href="malloc__extras_8h.html#ac98a576116d9cd8509e0a0d02defc41c">malloc_extras_get_stolen_heap</a></div><div class="ttdeci">heap_t * malloc_extras_get_stolen_heap(void)</div><div class="ttdoc">Get the pointer to the stolen heap.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8c_source.html#l00076">malloc_extras.c:76</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_structavailable__sdram__blocks"><div class="ttname"><a href="malloc__extras_8h.html#structavailable__sdram__blocks">available_sdram_blocks</a></div><div class="ttdoc">Holds host-allocated SDRAM blocks outside the heap.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8h_source.html#l00050">malloc_extras.h:50</a></div></div>
<div class="ttc" id="arouting__table_8h_html"><div class="ttname"><a href="routing__table_8h.html">routing_table.h</a></div><div class="ttdoc">Utilities for a single routing table.</div></div>
<div class="ttc" id="arouting__table_8h_html_a225a585fd5012060cc494b0b0ea636cc"><div class="ttname"><a href="routing__table_8h.html#a225a585fd5012060cc494b0b0ea636cc">entry_t::key_mask</a></div><div class="ttdeci">key_mask_t key_mask</div><div class="ttdoc">Key and mask.</div><div class="ttdef"><b>Definition:</b> <a href="routing__table_8h_source.html#l00037">routing_table.h:37</a></div></div>
<div class="ttc" id="arouting__table_8h_html_a30a1c9a534c37968116826cf7f1e5bab"><div class="ttname"><a href="routing__table_8h.html#a30a1c9a534c37968116826cf7f1e5bab">key_mask_t::mask</a></div><div class="ttdeci">uint32_t mask</div><div class="ttdoc">Mask for the key_mask.</div><div class="ttdef"><b>Definition:</b> <a href="routing__table_8h_source.html#l00031">routing_table.h:31</a></div></div>
<div class="ttc" id="arouting__table_8h_html_a78c84fd4064e0f3cf4b77a1874209e60"><div class="ttname"><a href="routing__table_8h.html#a78c84fd4064e0f3cf4b77a1874209e60">table_t::entries</a></div><div class="ttdeci">entry_t entries[]</div><div class="ttdoc">Entries in the table.</div><div class="ttdef"><b>Definition:</b> <a href="routing__table_8h_source.html#l00052">routing_table.h:52</a></div></div>
<div class="ttc" id="arouting__table_8h_html_a78df0d6fd3348442567f7ab8b834101b"><div class="ttname"><a href="routing__table_8h.html#a78df0d6fd3348442567f7ab8b834101b">table_t::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdoc">Number of entries in the table.</div><div class="ttdef"><b>Definition:</b> <a href="routing__table_8h_source.html#l00049">routing_table.h:49</a></div></div>
<div class="ttc" id="arouting__table_8h_html_aae50acecb462e9fcb4e13bbe5cf27ac7"><div class="ttname"><a href="routing__table_8h.html#aae50acecb462e9fcb4e13bbe5cf27ac7">entry_t::route</a></div><div class="ttdeci">uint32_t route</div><div class="ttdoc">Routing direction.</div><div class="ttdef"><b>Definition:</b> <a href="routing__table_8h_source.html#l00040">routing_table.h:40</a></div></div>
<div class="ttc" id="arouting__table_8h_html_adf30ccd47145700406a26a3aeb2bf12d"><div class="ttname"><a href="routing__table_8h.html#adf30ccd47145700406a26a3aeb2bf12d">key_mask_t::key</a></div><div class="ttdeci">uint32_t key</div><div class="ttdoc">Key for the key_mask.</div><div class="ttdef"><b>Definition:</b> <a href="routing__table_8h_source.html#l00028">routing_table.h:28</a></div></div>
<div class="ttc" id="arouting__table_8h_html_structentry__t"><div class="ttname"><a href="routing__table_8h.html#structentry__t">entry_t</a></div><div class="ttdoc">Holds data for a routing table entry.</div><div class="ttdef"><b>Definition:</b> <a href="routing__table_8h_source.html#l00035">routing_table.h:35</a></div></div>
<div class="ttc" id="arouting__table_8h_html_structtable__t"><div class="ttname"><a href="routing__table_8h.html#structtable__t">table_t</a></div><div class="ttdoc">Holds a routing table description.</div><div class="ttdef"><b>Definition:</b> <a href="routing__table_8h_source.html#l00047">routing_table.h:47</a></div></div>
<div class="ttc" id="arouting__tables__utils_8h_html"><div class="ttname"><a href="routing__tables__utils_8h.html">routing_tables_utils.h</a></div><div class="ttdoc">Compound routing table utilities.</div></div>
<div class="ttc" id="arouting__tables__utils_8h_html_a62a2cef63b709da2cff331bb140097d9"><div class="ttname"><a href="routing__tables__utils_8h.html#a62a2cef63b709da2cff331bb140097d9">routing_tables_utils_malloc</a></div><div class="ttdeci">static bool routing_tables_utils_malloc(multi_table_t *restrict tables, uint32_t max_entries)</div><div class="ttdoc">Prepares the Routing table to handle at least n_entries.</div><div class="ttdef"><b>Definition:</b> <a href="routing__tables__utils_8h_source.html#l00078">routing_tables_utils.h:78</a></div></div>
<div class="ttc" id="arouting__tables__utils_8h_html_aa31268404af3ce2f67545fa98bdbd802"><div class="ttname"><a href="routing__tables__utils_8h.html#aa31268404af3ce2f67545fa98bdbd802">routing_tables_utils_convert</a></div><div class="ttdeci">static table_t * routing_tables_utils_convert(multi_table_t *restrict tables)</div><div class="ttdoc">Converts the multitable to a single routing table and free the rest.</div><div class="ttdef"><b>Definition:</b> <a href="routing__tables__utils_8h_source.html#l00139">routing_tables_utils.h:139</a></div></div>
<div class="ttc" id="arouting__tables__utils_8h_html_ac2b87e9be8188bb776b0426d6ba7e1d0"><div class="ttname"><a href="routing__tables__utils_8h.html#ac2b87e9be8188bb776b0426d6ba7e1d0">routing_tables_utils_free_all</a></div><div class="ttdeci">static void routing_tables_utils_free_all(multi_table_t *restrict tables)</div><div class="ttdoc">Does all frees for the multi_table object.</div><div class="ttdef"><b>Definition:</b> <a href="routing__tables__utils_8h_source.html#l00064">routing_tables_utils.h:64</a></div></div>
<div class="ttc" id="asark_8h_html"><div class="ttname"><a href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html">vcpu_t</a></div></div>
<div class="ttc" id="asark_8h_html_a06e96a522d4adf97fbb2549806f73cfb"><div class="ttname"><a href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a06e96a522d4adf97fbb2549806f73cfb">SV_VCPU</a></div><div class="ttdeci">#define SV_VCPU</div></div>
<div class="ttc" id="asark_8h_html_a2d7bb03f41c2c68ad7fdb944bb23af64"><div class="ttname"><a href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a2d7bb03f41c2c68ad7fdb944bb23af64">rtr_alloc_id</a></div><div class="ttdeci">uint rtr_alloc_id(uint size, uint app_id)</div></div>
<div class="ttc" id="asark_8h_html_a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339"><div class="ttname"><a href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a></div><div class="ttdeci">RTE_SWERR</div></div>
<div class="ttc" id="asark_8h_html_a7f5f3be8c06b875eff1b6e7501ca8446a18a6fa8889d7501469a972a54da8943c"><div class="ttname"><a href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a7f5f3be8c06b875eff1b6e7501ca8446a18a6fa8889d7501469a972a54da8943c">SYNC_WAIT</a></div><div class="ttdeci">SYNC_WAIT</div></div>
<div class="ttc" id="asark_8h_html_a81ca61e30076d1724a68027b63f6e970"><div class="ttname"><a href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a81ca61e30076d1724a68027b63f6e970">rtr_mc_set</a></div><div class="ttdeci">uint rtr_mc_set(uint entry, uint key, uint mask, uint route)</div></div>
<div class="ttc" id="asark_8h_html_a82d770674ea0379ef44f28797b382647"><div class="ttname"><a href="http://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a82d770674ea0379ef44f28797b382647">vcpu_t::user2</a></div><div class="ttdeci">uint user2</div></div>
<div class="ttc" id="aspin1__api_8h.html_html"><div class="ttname"><a href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html">spin1_api.h</a></div></div>
<div class="ttc" id="aspin1__api_8h_html_a06fc87d81c62e9abb8790b6e5713c55bad1110959cd9312a756c5fb1d0f0eab8d"><div class="ttname"><a href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a06fc87d81c62e9abb8790b6e5713c55bad1110959cd9312a756c5fb1d0f0eab8d">TIMER_TICK</a></div><div class="ttdeci">TIMER_TICK</div></div>
<div class="ttc" id="aspin1__api_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div></div>
<div class="ttc" id="aspin1__api_8h_html_a653c1de1c4181f03c7ba4dbba38df9c7"><div class="ttname"><a href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a653c1de1c4181f03c7ba4dbba38df9c7">spin1_schedule_callback</a></div><div class="ttdeci">uint spin1_schedule_callback(callback_t cback, uint arg0, uint arg1, uint priority)</div></div>
<div class="ttc" id="aspin1__api_8h_html_acc208cdfe1d4eb5caa298a8a5b4db50c"><div class="ttname"><a href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#acc208cdfe1d4eb5caa298a8a5b4db50c">spin1_get_core_id</a></div><div class="ttdeci">uint spin1_get_core_id(void)</div></div>
<div class="ttc" id="aspin1__api_8h_html_ad49e25c0f0359f6826d8addcebf1e05c"><div class="ttname"><a href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#ad49e25c0f0359f6826d8addcebf1e05c">spin1_start</a></div><div class="ttdeci">uint spin1_start(sync_bool sync)</div></div>
<div class="ttc" id="aspin1__api_8h_html_afc98f97be297e7077334cad216d32b57"><div class="ttname"><a href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#afc98f97be297e7077334cad216d32b57">spin1_callback_on</a></div><div class="ttdeci">void spin1_callback_on(uint event_id, callback_t cback, int priority)</div></div>
<div class="ttc" id="aspinnaker_8h_html_a91ad9478d81a7aaf2593e8d9c3d06a14"><div class="ttname"><a href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a></div><div class="ttdeci">unsigned int uint</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
