<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SpiNNFrontEndCommon: models/compressors/src/sorter/bit_field_sorter_and_searcher.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SpiNNFrontEndCommon<span id="projectnumber">&#160;7.1.1</span>
   </div>
   <div id="projectbrief">Common support code for user-facing front end systems.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_1ae4179d5e953611aae20c997279e02c.html">models</a></li><li class="navelem"><a class="el" href="dir_4d48dcb52c1129c7f295596471d8e2b3.html">compressors</a></li><li class="navelem"><a class="el" href="dir_e84f3a1393fbcf8a053f50eb9c57fc65.html">src</a></li><li class="navelem"><a class="el" href="dir_2bf0e43e0c5ffbd81f9578f776dcf470.html">sorter</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">bit_field_sorter_and_searcher.c</div></div>
</div><!--header-->
<div class="contents">
<a href="bit__field__sorter__and__searcher_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment"> * Copyright (c) 2019 The University of Manchester</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"> *</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment"> * you may not use this file except in compliance with the License.</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"> * You may obtain a copy of the License at</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment"> *</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment"> *     https://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment"> *</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment"> * See the License for the specific language governing permissions and</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment"> * limitations under the License.</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment"> */</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span> </div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &lt;<a class="codeRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html">spin1_api.h</a>&gt;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &lt;<a class="code" href="debug_8h.html">debug.h</a>&gt;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &lt;<a class="codeRef" href="https://spinnakermanchester.github.io/spinn_common/bit__field_8h.html">bit_field.h</a>&gt;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &lt;<a class="codeRef" href="https://spinnakermanchester.github.io/spinn_common/circular__buffer_8h.html">circular_buffer.h</a>&gt;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &lt;<a class="code" href="data__specification_8h.html">data_specification.h</a>&gt;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &lt;<a class="code" href="malloc__extras_8h.html">malloc_extras.h</a>&gt;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &lt;<a class="code" href="common-typedefs_8h.html">common-typedefs.h</a>&gt;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &lt;<a class="code" href="constants_8h.html">common/constants.h</a>&gt;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &lt;<a class="code" href="routing__table_8h.html">common/routing_table.h</a>&gt;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &quot;<a class="code" href="routing__tables__utils_8h.html">bit_field_common/routing_tables_utils.h</a>&quot;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &quot;<a class="code" href="compressor__sorter__structs_8h.html">bit_field_common/compressor_sorter_structs.h</a>&quot;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &quot;<a class="code" href="bit__field__table__generator_8h.html">bit_field_common/bit_field_table_generator.h</a>&quot;</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &quot;<a class="code" href="bit__field__reader_8h.html">bit_field_reader.h</a>&quot;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span> </div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="comment">//============================================================================</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="comment">// #defines and enums</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a65fd90f232757535f02c46a885e49012">   42</a></span><span class="preprocessor">#define TIME_STEP 1000</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span> </div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#acf36c228ebab2d1aeea784bd9f6660f3">   45</a></span><span class="preprocessor">#define KILL_TIME 20000</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a65b6025151a6ae83a91d2e39fdd63a54">   48</a></span><span class="preprocessor">#define SDRAM_POLL_DELAY 50</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span> </div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a605487b6ac6afbca9f5f5ff329698731">   51</a></span><span class="preprocessor">#define SDRAM_POLL_ATTEMPTS 20</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span> </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ad3147e0fb533cf1158003dd6cf0c5d45">   54</a></span><span class="preprocessor">#define ADD_INCLUSIVE_BIT 1</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span> </div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a947e5c5e068c20feb3d0470199964f37">   57</a></span><span class="preprocessor">#define RTR_MC_FAILED 0</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span> </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a886d527c16dc0e3986b31801ca0dec69">   60</a></span><span class="preprocessor">#define ROUTE_APP_ID_BIT_SHIFT 24</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276">   63</a></span><span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276">priorities</a> {</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276ae4b1a013c32305821940ce11363cb879">   64</a></span>    <a class="code hl_enumvalue" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276ae4b1a013c32305821940ce11363cb879">COMPRESSION_START_PRIORITY</a> = 3, </div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    <a class="code hl_enumvalue" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276a141de7322a9c4947e64a2da966a4b1ef">TIMER_TICK_PRIORITY</a> = 0     </div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276a141de7322a9c4947e64a2da966a4b1ef">   66</a></span>} <a class="code hl_enumeration" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276">priorities</a>;</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span> </div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="comment">//============================================================================</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="comment">// global params</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">   72</a></span>uint32_t <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a> = 0;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span> </div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">   75</a></span><span class="keyword">volatile</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">terminated</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span> </div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">   79</a></span><a class="code hl_struct" href="compressor__sorter__structs_8h.html#structuncompressed__table__region__data__t">uncompressed_table_region_data_t</a> *restrict <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>;</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span> </div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">   83</a></span><a class="code hl_struct" href="compressor__sorter__structs_8h.html#structregion__addresses__t">region_addresses_t</a> *restrict <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>;</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ac2f679e18140a40be26be97edb8bb1a9">   87</a></span><a class="code hl_struct" href="malloc__extras_8h.html#structavailable__sdram__blocks">available_sdram_blocks</a> *restrict <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ac2f679e18140a40be26be97edb8bb1a9">usable_sdram_regions</a>;</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">   90</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a> = <a class="code hl_define" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>;</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">   93</a></span><span class="keywordtype">int</span> <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">lowest_failure</a>;</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span> </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">   96</a></span>uint32_t <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>;</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span> </div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">   99</a></span><a class="code hl_struct" href="routing__table_8h.html#structtable__t">table_t</a> *restrict <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a> = <a class="code hl_defineRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span> </div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ab580a14d287e81d47a1720fb92e2a199">  102</a></span>uint32_t <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ab580a14d287e81d47a1720fb92e2a199">app_id</a> = 0;</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">  106</a></span><a class="code hl_struct" href="compressor__sorter__structs_8h.html#structsorted__bit__fields__t">sorted_bit_fields_t</a> *restrict <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>;</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span> </div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">  109</a></span><a class="code hl_typedefRef" href="https://spinnakermanchester.github.io/spinn_common/bit__field_8h.html#a70e667669dab5c870f1f8f97d96b4abd">bit_field_t</a> <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>;</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span> </div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">  112</a></span><a class="code hl_struct" href="compressor__sorter__structs_8h.html#structcomms__sdram__t">comms_sdram_t</a> *restrict <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ad690fc1413aedf136f80b660e48d2326">  115</a></span><span class="keywordtype">bool</span> <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ad690fc1413aedf136f80b660e48d2326">just_reduced_cores_due_to_malloc</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ac0690f4848866c991ba93ee6ea829eb6">  119</a></span>uint32_t <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ac0690f4848866c991ba93ee6ea829eb6">retires_left</a>;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span> </div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span><span class="comment">//============================================================================</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span> </div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a8a87babcb3249c6fc47b2325baa8ff07">  125</a></span><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a8a87babcb3249c6fc47b2325baa8ff07">load_routing_table_into_router</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    <span class="comment">// Try to allocate sufficient room for the routing table.</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <span class="keywordtype">int</span> start_entry = <a class="code hl_functionRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a2d7bb03f41c2c68ad7fdb944bb23af64">rtr_alloc_id</a>(<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a>-&gt;<a class="code hl_variable" href="routing__table_8h.html#a78df0d6fd3348442567f7ab8b834101b">size</a>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ab580a14d287e81d47a1720fb92e2a199">app_id</a>);</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    <span class="keywordflow">if</span> (start_entry == <a class="code hl_define" href="bit__field__sorter__and__searcher_8c.html#a947e5c5e068c20feb3d0470199964f37">RTR_MC_FAILED</a>) {</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>        <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;Unable to allocate routing table of size %d\n&quot;</span>,</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a>-&gt;<a class="code hl_variable" href="routing__table_8h.html#a78df0d6fd3348442567f7ab8b834101b">size</a>);</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    }</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span> </div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    <span class="comment">// Load entries into the table (provided the allocation succeeded).</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    <span class="comment">// Note that although the allocation included the specified</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <span class="comment">// application ID we also need to include it as the most significant</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    <span class="comment">// byte in the route (see `sark_hw.c`).</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;loading %d entries into router&quot;</span>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a>-&gt;<a class="code hl_variable" href="routing__table_8h.html#a78df0d6fd3348442567f7ab8b834101b">size</a>);</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <span class="keywordflow">for</span> (uint32_t entry_id = 0; entry_id &lt; <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a>-&gt;<a class="code hl_variable" href="routing__table_8h.html#a78df0d6fd3348442567f7ab8b834101b">size</a>;</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>            entry_id++) {</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>        <a class="code hl_struct" href="routing__table_8h.html#structentry__t">entry_t</a> entry = <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a>-&gt;<a class="code hl_variable" href="routing__table_8h.html#a78c84fd4064e0f3cf4b77a1874209e60">entries</a>[entry_id];</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>        uint32_t route = entry.<a class="code hl_variable" href="routing__table_8h.html#aae50acecb462e9fcb4e13bbe5cf27ac7">route</a> | (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ab580a14d287e81d47a1720fb92e2a199">app_id</a> &lt;&lt; <a class="code hl_define" href="bit__field__sorter__and__searcher_8c.html#a886d527c16dc0e3986b31801ca0dec69">ROUTE_APP_ID_BIT_SHIFT</a>);</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>        <a class="code hl_typedefRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> success = <a class="code hl_functionRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a81ca61e30076d1724a68027b63f6e970">rtr_mc_set</a>(</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>                start_entry + entry_id,</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>                entry.<a class="code hl_variable" href="routing__table_8h.html#a225a585fd5012060cc494b0b0ea636cc">key_mask</a>.<a class="code hl_variable" href="routing__table_8h.html#adf30ccd47145700406a26a3aeb2bf12d">key</a>, entry.<a class="code hl_variable" href="routing__table_8h.html#a225a585fd5012060cc494b0b0ea636cc">key_mask</a>.<a class="code hl_variable" href="routing__table_8h.html#a30a1c9a534c37968116826cf7f1e5bab">mask</a>, route);</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span> </div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>        <span class="comment">// chekc that the entry was set</span></div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>        <span class="keywordflow">if</span> (success == <a class="code hl_define" href="bit__field__sorter__and__searcher_8c.html#a947e5c5e068c20feb3d0470199964f37">RTR_MC_FAILED</a>) {</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>            <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;failed to set a router table entry at index %d&quot;</span>,</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>                    start_entry + entry_id);</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>        }</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    }</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span> </div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    <span class="comment">// Indicate we were able to allocate routing table entries.</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>}</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span> </div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#aabb7e8da822c5d0a45b1ed8032ede71c">  162</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#aabb7e8da822c5d0a45b1ed8032ede71c">send_force_stop_message</a>(<span class="keywordtype">int</span> processor_id) {</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction == <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a439c688a4e9ed31638d5922a50680a8e">RUN</a>) {</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>        <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;sending stop to processor %d&quot;</span>, processor_id);</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a179a40541f7c969c4effd946f5fd72b9">FORCE_TO_STOP</a>;</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    }</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>}</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span> </div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a6cc8469cd2af4fc03d051e88bc414e87">  173</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a6cc8469cd2af4fc03d051e88bc414e87">send_prepare_message</a>(<span class="keywordtype">int</span> processor_id) {</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <span class="comment">// set message params</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;sending prepare to processor %d&quot;</span>, processor_id);</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a>;</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a70755b2138b556e54db6c862767af5a0">mid_point</a> = <a class="code hl_define" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>;</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>}</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span> </div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#afc6d9b52b2ed114671d16255f1fcbcff">  182</a></span><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#afc6d9b52b2ed114671d16255f1fcbcff">set_up_tested_mid_points</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;set_up_tested_mid_point n bf addresses is %d&quot;</span>,</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>            <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>);</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span> </div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    uint32_t words = get_bit_field_size(</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>            <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a> + <a class="code hl_define" href="bit__field__sorter__and__searcher_8c.html#ad3147e0fb533cf1158003dd6cf0c5d45">ADD_INCLUSIVE_BIT</a>);</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a> = <a class="code hl_define" href="malloc__extras_8h.html#a3e218828af7ddd3f4cd0d3772562b520">MALLOC</a>(words * <span class="keyword">sizeof</span>(<a class="code hl_typedefRef" href="https://spinnakermanchester.github.io/spinn_common/bit__field_8h.html#a70e667669dab5c870f1f8f97d96b4abd">bit_field_t</a>));</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span> </div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    <span class="comment">// check the malloc worked</span></div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a> == <a class="code hl_defineRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    }</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span> </div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>    <span class="comment">// clear the bitfields</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>    clear_bit_field(<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>, words);</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span> </div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    <span class="comment">// return if successful</span></div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>}</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span> </div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a2e2a5ecc993dcd419e28b31719c95e8b">  208</a></span><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a2e2a5ecc993dcd419e28b31719c95e8b">pass_instructions_to_compressor</a>(</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>    uint32_t processor_id, uint32_t mid_point, uint32_t table_size) {</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    <span class="keywordtype">bool</span> success = <a class="code hl_function" href="routing__tables__utils_8h.html#a62a2cef63b709da2cff331bb140097d9">routing_tables_utils_malloc</a>(</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>            <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].routing_tables, table_size);</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>    <span class="keywordflow">if</span> (!success) {</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>        <a class="code hl_function" href="debug_8h.html#a06b347c50387b36e0ff903e76be1c1d4">log_warning</a>(<span class="stringliteral">&quot;failed to create bitfield tables for midpoint %d&quot;</span>,</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>                mid_point);</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    }</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span> </div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    <span class="comment">// set the midpoint for the given compressor processor.</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a70755b2138b556e54db6c862767af5a0">mid_point</a> = mid_point;</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span> </div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].mid_point == 0) {</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>        <span class="comment">// Info stuff but local sorted_bit_fields as compressor not set yet</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>        <a class="code hl_function" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;using processor %d with %d entries for %d bitfields out of %d&quot;</span>,</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>                processor_id, table_size,</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].mid_point,</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>);</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>        <span class="comment">// Info stuff using compressor data</span></div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        <a class="code hl_function" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;using processor %d with %d entries for %d bitfields out of %d&quot;</span>,</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>                processor_id, table_size,</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].mid_point,</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>);</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>    }</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span> </div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a439c688a4e9ed31638d5922a50680a8e">RUN</a>;</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>}</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span> </div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a2dfa6ebebc99da76f7dc8f92dfe8cbf1">  245</a></span><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a2dfa6ebebc99da76f7dc8f92dfe8cbf1">malloc_tables_and_set_off_bit_compressor</a>(</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>        <span class="keywordtype">int</span> mid_point, <span class="keywordtype">int</span> processor_id) {</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>    <span class="comment">// free any previous routing tables</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    <a class="code hl_function" href="routing__tables__utils_8h.html#ac2b87e9be8188bb776b0426d6ba7e1d0">routing_tables_utils_free_all</a>(<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].routing_tables);</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span> </div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>    <span class="comment">// malloc space for the routing tables</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>    uint32_t table_size = <a class="code hl_function" href="bit__field__table__generator_8h.html#af67eedbb6f9ea96b5d8eb2cede279c48">bit_field_table_generator_max_size</a>(</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>            mid_point, &amp;<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8082501788d19b0833dc0d130c0bd796">uncompressed_table</a>,</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>            <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>);</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> </div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    <span class="comment">// if successful, try setting off the bitfield compression</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a87955dbae6fb7763d3a90f8e7d66f07f">sorted_bit_fields</a> = <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>    <span class="keywordtype">bool</span> success = <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a2e2a5ecc993dcd419e28b31719c95e8b">pass_instructions_to_compressor</a>(</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>            processor_id, mid_point, table_size);</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span> </div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>    <span class="keywordflow">if</span> (!success) {</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>        <span class="comment">// OK, lets turn this and all ready processors off to save space.</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>        <span class="comment">// At least default no bitfield handled elsewhere so of to reduce.</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a3373d705e500da21f936be7ec6b57802">DO_NOT_USE</a>;</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span> </div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> p_id = 0; p_id &lt; <a class="code hl_define" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; p_id++) {</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>            <span class="keywordflow">if</span> ((<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[p_id].sorter_instruction == <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a>) ||</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>                    (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[p_id].sorter_instruction == <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2564c1b7bc6ea4d4c778ec3e1d70826e">TO_BE_PREPARED</a>)) {</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[p_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a3373d705e500da21f936be7ec6b57802">DO_NOT_USE</a>;</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>            }</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        }</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span> </div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>        <span class="comment">// Ok that midpoint did not work so need to try it again</span></div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>        bit_field_clear(<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>, mid_point);</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    }</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>}</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span> </div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span><span class="preprocessor">#if 0</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span><span class="keyword">static</span> <span class="keyword">inline</span> <a class="code hl_struct" href="filter__info_8h.html#structfilter__region__t">filter_region_t</a> *find_processor_bit_field_region(</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>        <span class="keywordtype">int</span> processor_id) {</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>    <span class="comment">// find the right bitfield region</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> r_id = 0; r_id &lt; <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#af7e0d710a4c4d67be7c0f2578e97ff3f">n_processors</a>; r_id++) {</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>        <span class="keywordtype">int</span> region_proc_id = <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a83219002046c2cb82a5ed5d03d0c9901">processors</a>[r_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a27edc56ca90e5e5fff6eee12c9ffadc2">processor</a>;</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>        <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;is looking for %d and found %d&quot;</span>,</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>                processor_id, region_proc_id);</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>        <span class="keywordflow">if</span> (region_proc_id == processor_id) {</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a83219002046c2cb82a5ed5d03d0c9901">processors</a>[r_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#ac140cc5f3be0d158436780d491616058">filter</a>;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>        }</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>    }</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span> </div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    <span class="comment">// if not found</span></div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>    <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;failed to find the right region. WTF&quot;</span>);</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>    <a class="code hl_function" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code hl_enumvalue" href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572adf50834e361027bbbe08aad6ebd36d19">EXIT_SWERR</a>);</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>    <span class="keywordflow">return</span> <a class="code hl_defineRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>}</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span> </div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a87231bf5b93d39515d3ca6d88fdd8196">  303</a></span><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a87231bf5b93d39515d3ca6d88fdd8196">set_merged_filters</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;best_success %d&quot;</span>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a>);</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a>; i++) {</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>        <span class="comment">// Find the actual index of this bitfield</span></div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>        <span class="keywordtype">int</span> bf_i = <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#afa13939be549fe271504e4d2c411b070">sort_order</a>[i];</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>        <span class="comment">// Update the flag</span></div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a6adeafbfed85221d82b0340a70e9f1d0">bit_fields</a>[bf_i]-&gt;<a class="code hl_variable" href="filter__info_8h.html#a1a484e14dd6870e23e8f838d72c0b388">merged</a> = 1;</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>    }</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>}</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span> </div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#af8905b57f57799ccb76d07dadb273efd">  315</a></span><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#af8905b57f57799ccb76d07dadb273efd">locate_next_mid_point</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a> == 0) {</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>;</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    }</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span> </div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    <span class="comment">// if not tested yet / reset test all</span></div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>    <span class="keywordflow">if</span> (!bit_field_test(<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>)) {</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>        <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;Retrying all which is mid_point %d&quot;</span>,</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>);</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>;</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    }</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span> </div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ac0690f4848866c991ba93ee6ea829eb6">retires_left</a> == 0) {</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>        <a class="code hl_function" href="debug_8h.html#a06b347c50387b36e0ff903e76be1c1d4">log_warning</a>(<span class="stringliteral">&quot;Stopping compression due to retry count&quot;</span>);</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>;</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    }</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ac0690f4848866c991ba93ee6ea829eb6">retires_left</a> -= 1;</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span> </div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    <span class="comment">// need to find a midpoint</span></div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;n_bf_addresses %d tested_mid_points %d&quot;</span>,</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>            <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>,</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>            bit_field_test(<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>,</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>                    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>));</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span> </div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    <span class="comment">// the last point of the longest space</span></div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>    <span class="keywordtype">int</span> best_end = <a class="code hl_define" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>;</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span> </div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    <span class="comment">// the length of the longest space to test</span></div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    <span class="keywordtype">int</span> best_length = 0;</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span> </div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    <span class="comment">// the current length of the currently detected space</span></div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    <span class="keywordtype">int</span> current_length = 0;</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span> </div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;best_success %d lowest_failure %d&quot;</span>,</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>            <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">lowest_failure</a>);</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span> </div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    <span class="comment">// iterate over the range to binary search, looking for biggest block to</span></div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>    <span class="comment">// explore, then take the middle of that block</span></div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span> </div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    <span class="comment">// NOTE: if there are no available bitfields, this will result in best end</span></div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    <span class="comment">// being still set to -1, as every bit is set, so there is no blocks with</span></div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>    <span class="comment">// any best length, and so best end is never set and lengths will still be</span></div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    <span class="comment">// 0 at the end of the for loop. -1 is a special midpoint which higher</span></div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    <span class="comment">// code knows to recognise as no more exploration needed.</span></div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> index = <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a> + 1; index &lt;= <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">lowest_failure</a>; index++) {</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>        <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;index: %d, value: %u current_length: %d&quot;</span>,</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>                index, bit_field_test(<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>, index),</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>                current_length);</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span> </div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>        <span class="comment">// verify that the index has been used before</span></div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>        <span class="keywordflow">if</span> (bit_field_test(<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>, index)) {</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>           <span class="comment">// if used before and is the end of the biggest block seen so far.</span></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>           <span class="comment">// Record and repeat.</span></div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>           <span class="keywordflow">if</span> (current_length &gt; best_length) {</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>                best_length = current_length;</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>                best_end = index - 1;</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>                <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;found best_length: %d best_end %d&quot;</span>,</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>                        best_length, best_end);</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>           <span class="comment">// if not the end of the biggest block, ignore (log for debugging)</span></div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>           } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>                <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;not best: %d best_end %d&quot;</span>, best_length, best_end);</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>           }</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>           <span class="comment">// if its seen a set we&#39;re at the end of a block. so reset the</span></div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>           <span class="comment">// current block len, as we&#39;re about to start another block.</span></div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>           current_length = 0;</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>        <span class="comment">// not set, so still within a block, increase len.</span></div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>           current_length += 1;</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>        }</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>    }</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span> </div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>    <span class="comment">// use the best less half (shifted) of the best length</span></div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>    <span class="keywordtype">int</span> new_mid_point = best_end - (best_length &gt;&gt; 1);</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;returning mid point %d&quot;</span>, new_mid_point);</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span> </div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>    <span class="comment">// set the mid point to be tested. (safe as we de-set if we fail later on)</span></div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>    <span class="keywordflow">if</span> (new_mid_point &gt;= 0) {</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>        <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;setting new mid point %d&quot;</span>, new_mid_point);</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span> </div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>        <span class="comment">// just a safety check, as this has caught us before.</span></div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>        <span class="keywordflow">if</span> (bit_field_test(<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>, new_mid_point)) {</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>            <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;HOW ON EARTH DID YOU GET HERE!&quot;</span>);</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>            <a class="code hl_function" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code hl_enumvalue" href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572adf50834e361027bbbe08aad6ebd36d19">EXIT_SWERR</a>);</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>        }</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    }</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span> </div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>    <span class="keywordflow">return</span> new_mid_point;</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>}</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span> </div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a698a835cfc60d80617235e9e5879e849">  408</a></span><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a698a835cfc60d80617235e9e5879e849">handle_best_cleanup</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    <span class="comment">// load routing table into router</span></div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>    <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a8a87babcb3249c6fc47b2325baa8ff07">load_routing_table_into_router</a>();</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;finished loading table&quot;</span>);</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span> </div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    <a class="code hl_function" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;setting set_n_merged_filters&quot;</span>);</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>    <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a87231bf5b93d39515d3ca6d88fdd8196">set_merged_filters</a>();</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span> </div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>    <span class="comment">// This is to allow the host report to know how many bitfields on the chip</span></div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    <span class="comment">// merged without reading every cores bit-field region.</span></div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>    <a class="code hl_structRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html">vcpu_t</a> *sark_virtual_processor_info = (<a class="code hl_structRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html">vcpu_t</a> *) <a class="code hl_defineRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a06e96a522d4adf97fbb2549806f73cfb">SV_VCPU</a>;</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>    <a class="code hl_typedefRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> processor_id = <a class="code hl_functionRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#acc208cdfe1d4eb5caa298a8a5b4db50c">spin1_get_core_id</a>();</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    sark_virtual_processor_info[processor_id].<a class="code hl_variableRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a82d770674ea0379ef44f28797b382647">user2</a> = <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a>;</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span> </div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    <span class="comment">// Safety to break out of loop in check_buffer_queue as terminate wont</span></div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>    <span class="comment">// stop this interrupt</span></div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">terminated</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span> </div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>    <span class="comment">// set up user registers etc to finish cleanly</span></div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>    <a class="code hl_function" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code hl_enumvalue" href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572a012df54a47467268a8bb9acb9d9a2473">EXITED_CLEANLY</a>);</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>}</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span> </div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a158c3d6523a5b6472c894c9294cf018c">  434</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a158c3d6523a5b6472c894c9294cf018c">prepare_processor_first_time</a>(<span class="keywordtype">int</span> processor_id) {</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a>;</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span> </div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>    <span class="comment">// Create the space for the routing table meta data</span></div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a51efd0e36bf8f32e7fae4670b84dff91">routing_tables</a> =</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>            <a class="code hl_define" href="malloc__extras_8h.html#a52d8f9cf4967316758b7148966fffeef">MALLOC_SDRAM</a>(<span class="keyword">sizeof</span>(<a class="code hl_struct" href="compressor__sorter__structs_8h.html#structmulti__table__t">multi_table_t</a>));</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].routing_tables == <a class="code hl_defineRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a3373d705e500da21f936be7ec6b57802">DO_NOT_USE</a>;</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>        <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;Error mallocing routing bake pointer on  %d&quot;</span>, processor_id);</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>    }</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span> </div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a51efd0e36bf8f32e7fae4670b84dff91">routing_tables</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#aaca19377972d2042c5cfd18a011eea1f">sub_tables</a> = <a class="code hl_defineRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a51efd0e36bf8f32e7fae4670b84dff91">routing_tables</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a03f1642ac01ef3f580198223b92d9cd4">n_sub_tables</a> = 0;</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a51efd0e36bf8f32e7fae4670b84dff91">routing_tables</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a46a7223253ff3d5d43ad0a71058b4795">n_entries</a> = 0;</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span> </div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>    <span class="comment">// Pass the fake heap stuff</span></div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a1098c00b19e53a646354531429069840">fake_heap_data</a> = <a class="code hl_function" href="malloc__extras_8h.html#ac4c30ebfaf350f93b16fc2d02c82c674">malloc_extras_get_stolen_heap</a>();</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;fake_heap_data %u&quot;</span>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].fake_heap_data);</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span> </div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>    <span class="comment">// Check the processor is live</span></div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>    <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>    <span class="keywordflow">while</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].compressor_state != <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253faca587e6ced264bc7afe62847cffb45ab">PREPARED</a>) {</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>        <span class="comment">// give chance for compressor to read</span></div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>        spin1_delay_us(<a class="code hl_define" href="bit__field__sorter__and__searcher_8c.html#a65b6025151a6ae83a91d2e39fdd63a54">SDRAM_POLL_DELAY</a>);</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>        <span class="keywordflow">if</span> (++count &gt; <a class="code hl_define" href="bit__field__sorter__and__searcher_8c.html#a605487b6ac6afbca9f5f5ff329698731">SDRAM_POLL_ATTEMPTS</a>) {</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>            <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a3373d705e500da21f936be7ec6b57802">DO_NOT_USE</a>;</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>            <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;compressor failed to reply %d&quot;</span>, processor_id);</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>        }</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>    }</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>}</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span> </div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ad1edafabb830bb65416e6254bd0cc74c">  472</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#ad1edafabb830bb65416e6254bd0cc74c">find_prepared_processor</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>    <span class="comment">// Look for a prepared one</span></div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> processor_id = 0; processor_id &lt; <a class="code hl_define" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; processor_id++) {</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction == <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a> &amp;&amp;</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].compressor_state == <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253faca587e6ced264bc7afe62847cffb45ab">PREPARED</a>) {</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>            <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;found prepared %d&quot;</span>, processor_id);</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>            <span class="keywordflow">return</span> processor_id;</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>        }</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>    }</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span> </div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>    <span class="comment">// NOTE: This initialization component exists here due to a race condition</span></div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    <span class="comment">// with the compressors, where we dont know if they are reacting to</span></div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>    <span class="comment">// &quot;messages&quot; before sync signal has been sent. We also have this here to</span></div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>    <span class="comment">// save the 16 bytes per compressor core we dont end up using.</span></div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span> </div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>    <span class="comment">// Look for a processor never used and  prepare it</span></div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> processor_id = 0; processor_id &lt; <a class="code hl_define" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; processor_id++) {</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>        <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;processor_id %d status %d&quot;</span>,</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>                processor_id, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction);</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction == <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2564c1b7bc6ea4d4c778ec3e1d70826e">TO_BE_PREPARED</a>) {</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a158c3d6523a5b6472c894c9294cf018c">prepare_processor_first_time</a>(processor_id)) {</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>                <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;found to be prepared %d&quot;</span>, processor_id);</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>                <span class="keywordflow">return</span> processor_id;</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>            }</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>            <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;first failed %d&quot;</span>, processor_id);</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>        }</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>    }</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;FAILED %d&quot;</span>, <a class="code hl_define" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>);</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>;</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>}</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span> </div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#af7b9d9039e3528de45dd0cdfaae99d56">  507</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#af7b9d9039e3528de45dd0cdfaae99d56">find_compressor_processor_and_set_tracker</a>(<span class="keywordtype">int</span> midpoint) {</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>    <span class="keywordtype">int</span> processor_id = <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#ad1edafabb830bb65416e6254bd0cc74c">find_prepared_processor</a>();</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>    <span class="keywordflow">if</span> (processor_id &gt; <a class="code hl_define" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>) {</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>        <span class="comment">// allocate this core to do this midpoint.</span></div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a70755b2138b556e54db6c862767af5a0">mid_point</a> = midpoint;</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>        <span class="comment">// set the tracker to use this midpoint</span></div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>        bit_field_set(<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>, midpoint);</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>        <span class="comment">// return processor id</span></div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>    }</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;returning %d&quot;</span>, processor_id);</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>    <span class="keywordflow">return</span> processor_id;</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>}</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span> </div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#adc7135678f90b4c7dbdd4d1d4b56dacb">  522</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#adc7135678f90b4c7dbdd4d1d4b56dacb">setup_no_bitfields_attempt</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a> &gt; 0) {</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>        <a class="code hl_function" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;No bitfields attempt skipped due to threshold of %d percent&quot;</span>,</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#adbf7cfb3fc725eadae6decaedd0f97e6">threshold</a>);</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>    }</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span> </div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>    <span class="keywordtype">int</span> processor_id =</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>            <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#af7b9d9039e3528de45dd0cdfaae99d56">find_compressor_processor_and_set_tracker</a>(<a class="code hl_define" href="constants_8h.html#a06a361793cd452d8bf77be63631b1b2b">NO_BIT_FIELDS</a>);</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>    <span class="keywordflow">if</span> (processor_id == <a class="code hl_define" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>) {</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>        <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;No processor available for no bitfield attempt&quot;</span>);</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>        <a class="code hl_function" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code hl_variableRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a>);</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>    }</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>    <span class="comment">// set off a none bitfield compression attempt, to pipe line work</span></div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>    <a class="code hl_function" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;setting off the no bitfield version of the search on %u&quot;</span>,</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>            processor_id);</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span> </div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>    <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a2e2a5ecc993dcd419e28b31719c95e8b">pass_instructions_to_compressor</a>(processor_id, <a class="code hl_define" href="constants_8h.html#a06a361793cd452d8bf77be63631b1b2b">NO_BIT_FIELDS</a>,</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>            <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8082501788d19b0833dc0d130c0bd796">uncompressed_table</a>.<a class="code hl_variable" href="routing__table_8h.html#a78df0d6fd3348442567f7ab8b834101b">size</a>);</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>}</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span> </div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a92a4dc5c2b97aa7fb1c4a353e24e459c">  546</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a92a4dc5c2b97aa7fb1c4a353e24e459c">all_compressor_processors_busy</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> processor_id = 0; processor_id &lt; <a class="code hl_define" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; processor_id++) {</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>        <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;processor_id %d status %d&quot;</span>,</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>                processor_id, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction);</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>        <span class="keywordflow">switch</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction) {</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2564c1b7bc6ea4d4c778ec3e1d70826e">TO_BE_PREPARED</a>:</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a>:</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].compressor_state == <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253faca587e6ced264bc7afe62847cffb45ab">PREPARED</a>) {</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>            }</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>            <span class="comment">// This processor is busy; continue to next one</span></div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>        }</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>    }</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>}</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span> </div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a49520fa4fcbd652ababa3ed7e9e002ee">  568</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a49520fa4fcbd652ababa3ed7e9e002ee">all_compressor_processors_done</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> processor_id = 0; processor_id &lt; <a class="code hl_define" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; processor_id++) {</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction &gt;= <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a>) {</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>        }</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>    }</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>}</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span> </div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#abf1d619d795cc5348b19805e77469a1b">  580</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#abf1d619d795cc5348b19805e77469a1b">exit_carry_on_if_all_compressor_processors_done</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> processor_id = 0; processor_id &lt; <a class="code hl_define" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; processor_id++) {</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction &gt;= <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a>) {</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>        }</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>    }</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span> </div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    <span class="comment">// Check there is nothing left to do</span></div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>    <span class="keywordtype">int</span> mid_point = <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#af8905b57f57799ccb76d07dadb273efd">locate_next_mid_point</a>();</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>    <span class="keywordflow">if</span> (mid_point != <a class="code hl_define" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>) {</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>        <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;Ran out of processors while still having mid_point %d to do&quot;</span>,</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>                mid_point);</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>        <a class="code hl_function" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code hl_variableRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a>);</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>        <span class="comment">// Should never get here but break out of the loop</span></div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">terminated</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>    }</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span> </div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>    <span class="comment">// Should never get here if above check worked but just in case</span></div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ad690fc1413aedf136f80b660e48d2326">just_reduced_cores_due_to_malloc</a>) {</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>        <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;Last result was a malloc fail! Use host&quot;</span>);</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>        <a class="code hl_function" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code hl_variableRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a>);</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>        <span class="comment">// Should never get here but break out of the loop</span></div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">terminated</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>    }</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span> </div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>    <span class="comment">// Check there was actually a result</span></div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a> == <a class="code hl_define" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>) {</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>        <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;No usable result found! Use host&quot;</span>);</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>        <a class="code hl_function" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code hl_variableRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a>);</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>        <span class="comment">// Should never get here but break out of the loop</span></div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">terminated</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>    }</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span> </div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>    <span class="comment">// Should never get here if above check failed but just in case</span></div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a> &lt; (<span class="keywordtype">int</span>) <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>) {</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>        <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;The threshold is %d bitfields. &quot;</span></div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>                <span class="stringliteral">&quot;Which is %d percent of the total of %d&quot;</span>,</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#adbf7cfb3fc725eadae6decaedd0f97e6">threshold</a>,</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>);</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>        <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;Best result found was %d Which is below the threshold! &quot;</span></div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>                <span class="stringliteral">&quot;Use host&quot;</span>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a>);</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>        <a class="code hl_function" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code hl_variableRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a>);</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>        <span class="comment">// Should never get here but break out of the loop</span></div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">terminated</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    }</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span> </div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>    <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a698a835cfc60d80617235e9e5879e849">handle_best_cleanup</a>();</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span> </div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>    <span class="comment">// Should never get here but break out of the loop</span></div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">terminated</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>}</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span> </div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a2f92a4e2f154f113ef10a0485e6f3e23">  638</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a2f92a4e2f154f113ef10a0485e6f3e23">carry_on_binary_search</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#abf1d619d795cc5348b19805e77469a1b">exit_carry_on_if_all_compressor_processors_done</a>()) {</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>        <span class="keywordflow">return</span>; <span class="comment">// Should never get here but just in case</span></div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>    }</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a92a4dc5c2b97aa7fb1c4a353e24e459c">all_compressor_processors_busy</a>()) {</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>        <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;all_compressor_processors_busy&quot;</span>);</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>        <span class="keywordflow">return</span>;  <span class="comment">//Pass back to check_buffer_queue</span></div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>    }</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;start carry_on_binary_search&quot;</span>);</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span> </div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>    <span class="keywordtype">int</span> mid_point = <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#af8905b57f57799ccb76d07dadb273efd">locate_next_mid_point</a>();</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;available with midpoint %d&quot;</span>, mid_point);</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span> </div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>    <span class="keywordflow">if</span> (mid_point == <a class="code hl_define" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>) {</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>        <span class="comment">// OK, lets turn all ready processors off as done.</span></div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> p_id = 0; p_id &lt; <a class="code hl_define" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; p_id++) {</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[p_id].sorter_instruction == <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a>) {</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[p_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a3373d705e500da21f936be7ec6b57802">DO_NOT_USE</a>;</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[p_id].sorter_instruction &gt; <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a>) {</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>                <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>                        <span class="stringliteral">&quot;waiting for processor %d status %d doing midpoint %u&quot;</span>,</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>                        p_id, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[p_id].sorter_instruction,</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>                        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[p_id].mid_point);</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>            }</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>        }</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>    }</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span> </div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>    <span class="keywordtype">int</span> processor_id = <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#af7b9d9039e3528de45dd0cdfaae99d56">find_compressor_processor_and_set_tracker</a>(mid_point);</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;start create at time step: %u&quot;</span>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a>);</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>    <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a2dfa6ebebc99da76f7dc8f92dfe8cbf1">malloc_tables_and_set_off_bit_compressor</a>(mid_point, processor_id);</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;end create at time step: %u&quot;</span>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a>);</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>}</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span> </div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ac9914f4341d050b71b5e1516eb19a184">  675</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#ac9914f4341d050b71b5e1516eb19a184">timer_callback</a>(UNUSED <a class="code hl_typedefRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused0, UNUSED <a class="code hl_typedefRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused1) {</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a>++;</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>    <span class="comment">// Debug stuff please keep</span></div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span><span class="preprocessor">#if 0</span></div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    <span class="keywordflow">if</span> ((<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a> &amp; 1023) == 0) {</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>        <a class="code hl_function" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;time_steps: %u&quot;</span>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a>);</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>    }</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a> &gt; <a class="code hl_define" href="bit__field__sorter__and__searcher_8c.html#acf36c228ebab2d1aeea784bd9f6660f3">KILL_TIME</a>) {</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>        <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;timer overran %u&quot;</span>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a>);</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>        <a class="code hl_function" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code hl_variableRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a>);</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>    }</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>}</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span> </div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a72e0d6c3a5bce7e5fbf2c7f586db5fa3">  692</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a72e0d6c3a5bce7e5fbf2c7f586db5fa3">process_success</a>(<span class="keywordtype">int</span> mid_point, <span class="keywordtype">int</span> processor_id) {</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>    <span class="comment">// if the mid point is better than seen before, store results for final.</span></div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a> &lt;= mid_point) {</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a> = mid_point;</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span> </div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>        <span class="comment">// If we have a previous table free it as no longer needed</span></div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a> != <a class="code hl_defineRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>            <a class="code hl_define" href="malloc__extras_8h.html#a9a8e700d56e7d858108b755ad3edb52e">FREE</a>(<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a>);</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>        }</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span> </div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>        <span class="comment">// Get last table and free the rest</span></div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a> = <a class="code hl_function" href="routing__tables__utils_8h.html#a606c1fd7ae6334246c1d892cc8c93920">routing_tables_utils_convert</a>(</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].routing_tables);</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>        <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;n entries is %d&quot;</span>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a>-&gt;<a class="code hl_variable" href="routing__table_8h.html#a78df0d6fd3348442567f7ab8b834101b">size</a>);</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>        <a class="code hl_function" href="routing__tables__utils_8h.html#ac2b87e9be8188bb776b0426d6ba7e1d0">routing_tables_utils_free_all</a>(<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].routing_tables);</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>    }</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span> </div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>    <span class="comment">// kill any search below this point, as they all redundant as</span></div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>    <span class="comment">// this is a better search.</span></div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> proc_id = 0; proc_id &lt; <a class="code hl_define" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; proc_id++) {</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[proc_id].mid_point &lt; mid_point) {</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>            <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#aabb7e8da822c5d0a45b1ed8032ede71c">send_force_stop_message</a>(proc_id);</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>        }</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>    }</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span> </div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ad690fc1413aedf136f80b660e48d2326">just_reduced_cores_due_to_malloc</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;finished process of successful compression&quot;</span>);</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>}</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span> </div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ad25e5b4067e405459a984cefacdcd02e">  725</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#ad25e5b4067e405459a984cefacdcd02e">process_failed_malloc</a>(<span class="keywordtype">int</span> mid_point, <span class="keywordtype">int</span> processor_id) {</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>    <a class="code hl_function" href="routing__tables__utils_8h.html#ac2b87e9be8188bb776b0426d6ba7e1d0">routing_tables_utils_free_all</a>(<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].routing_tables);</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>    <span class="comment">// Remove the flag that say this midpoint has been checked</span></div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>    bit_field_clear(<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a>, mid_point);</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span> </div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>    <span class="comment">// Add a retry to recover from the failure</span></div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ac0690f4848866c991ba93ee6ea829eb6">retires_left</a> += 1;</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ad690fc1413aedf136f80b660e48d2326">just_reduced_cores_due_to_malloc</a>) {</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>        <a class="code hl_function" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;Multiple malloc detected on %d keeping processor %d&quot;</span>,</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>                mid_point, processor_id);</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>        <span class="comment">// Not thresholding as just did a threshold</span></div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ad690fc1413aedf136f80b660e48d2326">just_reduced_cores_due_to_malloc</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a3373d705e500da21f936be7ec6b57802">DO_NOT_USE</a>;</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>        <a class="code hl_function" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;Malloc detected on %d removing processor %d&quot;</span>,</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>                mid_point, processor_id);</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ad690fc1413aedf136f80b660e48d2326">just_reduced_cores_due_to_malloc</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>    }</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>}</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span> </div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#aaf61d0e8c4cdc01297fe1d4725ec1aab">  749</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#aaf61d0e8c4cdc01297fe1d4725ec1aab">process_failed</a>(<span class="keywordtype">int</span> mid_point, <span class="keywordtype">int</span> processor_id) {</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>    <span class="comment">// safety check to ensure we dont go on if the uncompressed failed</span></div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>    <span class="keywordflow">if</span> (mid_point &lt;= (<span class="keywordtype">int</span>) <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>) {</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a> == <a class="code hl_define" href="constants_8h.html#a06a361793cd452d8bf77be63631b1b2b">NO_BIT_FIELDS</a>) {</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>            <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;The no bitfields attempted failed! Giving up&quot;</span>);</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>            <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;The threshold is %d, &quot;</span></div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>                    <span class="stringliteral">&quot;which is %d percent of the total of %d&quot;</span>,</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>                    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#adbf7cfb3fc725eadae6decaedd0f97e6">threshold</a>,</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>                    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>);</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>            <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;The attempt with %d bitfields failed. ! Giving up&quot;</span>,</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>                    mid_point);</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>        }</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>        <a class="code hl_function" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code hl_enumvalue" href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572aa79a9cd74d0a705ad96bd17b5181c56b">EXIT_FAIL</a>);</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>    }</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">lowest_failure</a> &gt; mid_point) {</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>        <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;Changing lowest_failure from: %d to mid_point:%d&quot;</span>,</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">lowest_failure</a>, mid_point);</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">lowest_failure</a> = mid_point;</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>        <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;lowest_failure: %d already lower than mid_point:%d&quot;</span>,</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">lowest_failure</a>, mid_point);</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>    }</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>    <a class="code hl_function" href="routing__tables__utils_8h.html#ac2b87e9be8188bb776b0426d6ba7e1d0">routing_tables_utils_free_all</a>(<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].routing_tables);</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span> </div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>    <span class="comment">// tell all compression processors trying midpoints above this one</span></div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>    <span class="comment">// to stop, as its highly likely a waste of time.</span></div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> proc_id = 0; proc_id &lt; <a class="code hl_define" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; proc_id++) {</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[proc_id].mid_point &gt; mid_point) {</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>            <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#aabb7e8da822c5d0a45b1ed8032ede71c">send_force_stop_message</a>(proc_id);</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>        }</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>    }</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span> </div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>    <span class="comment">// handler to say this message has changed the last to not be a malloc fail</span></div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ad690fc1413aedf136f80b660e48d2326">just_reduced_cores_due_to_malloc</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>}</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span> </div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ae79865738cd37176e6520d72154ce64a">  789</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#ae79865738cd37176e6520d72154ce64a">process_compressor_response</a>(</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>        <span class="keywordtype">int</span> processor_id, <a class="code hl_enumeration" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253f">compressor_states</a> finished_state) {</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>    <span class="comment">// locate this responses midpoint</span></div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>    <span class="keywordtype">int</span> mid_point = <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a70755b2138b556e54db6c862767af5a0">mid_point</a>;</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;received response %d from processor %d doing %d midpoint&quot;</span>,</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>            finished_state, processor_id, mid_point);</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span> </div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>    <span class="comment">// free the processor for future processing</span></div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>    <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a6cc8469cd2af4fc03d051e88bc414e87">send_prepare_message</a>(processor_id);</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span> </div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>    <span class="comment">// process compressor response based off state.</span></div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>    <span class="keywordflow">switch</span> (finished_state) {</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa7b909bad27a8bc8dd8c6d464ac3a1478">SUCCESSFUL_COMPRESSION</a>:</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>        <span class="comment">// compressor was successful at compressing the tables.</span></div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>        <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;successful from processor %d doing mid point %d &quot;</span></div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>                <span class="stringliteral">&quot;best so far was %d&quot;</span>,</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>                processor_id, mid_point, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a>);</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>        <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a72e0d6c3a5bce7e5fbf2c7f586db5fa3">process_success</a>(mid_point, processor_id);</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span> </div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa4d8a6f033344df4f3b8fa419b8db0edb">FAILED_MALLOC</a>:</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>        <span class="comment">// compressor failed as a malloc request failed.</span></div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>        <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;failed by malloc from processor %d doing mid point %d&quot;</span>,</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>                processor_id, mid_point);</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>        <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#ad25e5b4067e405459a984cefacdcd02e">process_failed_malloc</a>(mid_point, processor_id);</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span> </div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa7c1602ccad57389b8999601cd8025a95">FAILED_TO_COMPRESS</a>:</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>        <span class="comment">// compressor failed to compress the tables as no more merge options.</span></div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>        <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;failed to compress from processor %d doing mid point %d&quot;</span>,</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>                processor_id, mid_point);</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>        <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#aaf61d0e8c4cdc01297fe1d4725ec1aab">process_failed</a>(mid_point, processor_id);</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span> </div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253faacc8682efbd3957ac911dbb6fe2459b0">RAN_OUT_OF_TIME</a>:</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>        <span class="comment">// compressor failed to compress as it ran out of time.</span></div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>        <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;failed by time from processor %d doing mid point %d&quot;</span>,</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>                processor_id, mid_point);</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>        <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#aaf61d0e8c4cdc01297fe1d4725ec1aab">process_failed</a>(mid_point, processor_id);</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span> </div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253facd1b57bf58f3e2dc4ef7ddf051739cf8">FORCED_BY_COMPRESSOR_CONTROL</a>:</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>        <span class="comment">// compressor stopped at the request of the sorter.</span></div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>        <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;ack from forced from processor %d doing mid point %d&quot;</span>,</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>                processor_id, mid_point);</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>        <a class="code hl_function" href="routing__tables__utils_8h.html#ac2b87e9be8188bb776b0426d6ba7e1d0">routing_tables_utils_free_all</a>(<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].routing_tables);</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span> </div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa488d46012070df0693507cde3473cb37">UNUSED_CORE</a>:</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253faca587e6ced264bc7afe62847cffb45ab">PREPARED</a>:</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa5ea53c4d2b4459dae1e1910851e5b458">COMPRESSING</a>:</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>        <span class="comment">// states that shouldn&#39;t occur</span></div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>        <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;no idea what to do with finished state %d, &quot;</span></div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>                <span class="stringliteral">&quot;from processor %d&quot;</span>, finished_state, processor_id);</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>        <a class="code hl_function" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code hl_variableRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a>);</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>    }</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>}</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span> </div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a85c24f73513945a5d698d12620719e6d">  850</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a85c24f73513945a5d698d12620719e6d">check_compressors</a>(UNUSED <a class="code hl_typedefRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused0, UNUSED <a class="code hl_typedefRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused1) {</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;Entering the check_compressors loop&quot;</span>);</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>    <span class="comment">// iterate over the compressors buffer until we have the finished state</span></div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>    <span class="keywordflow">while</span> (!<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">terminated</a>) {</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>        <span class="keywordtype">bool</span> no_new_result = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>        <span class="keywordtype">bool</span> failed_cpu = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span> </div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>        <span class="comment">// iterate over processors looking for a new result</span></div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> processor_id = 0; processor_id &lt; <a class="code hl_define" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; processor_id++) {</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>            <span class="comment">// Check each compressor asked to run or forced</span></div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>            <a class="code hl_enumeration" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253f">compressor_states</a> finished_state =</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>                    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a9c8f01d4cc8cfc2b4377fe14f39e13ff">compressor_state</a>;</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>            <a class="code hl_typedefRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> state = sv_vcpu[processor_id].cpu_state;</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>            <span class="keywordflow">if</span> (finished_state &gt; <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa5ea53c4d2b4459dae1e1910851e5b458">COMPRESSING</a>) {</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>                no_new_result = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>                <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#ae79865738cd37176e6520d72154ce64a">process_compressor_response</a>(processor_id, finished_state);</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (state != <a class="code hl_variableRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a37318835424d76f3f5b321058887236da504ca9cb33bebc4ff8b20b3eb97facbd">CPU_STATE_RUN</a> &amp;&amp; state != <a class="code hl_variableRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a37318835424d76f3f5b321058887236dadcefe4af17b67dc5de698473127ea564">CPU_STATE_PAUSE</a></div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>                    &amp;&amp; state != <a class="code hl_variableRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a37318835424d76f3f5b321058887236da5fdc95ad5a4ddcf32e79798c8b2c53b2">CPU_STATE_DEAD</a>) {</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>                <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;CPU %u Failed!&quot;</span>, processor_id);</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>                failed_cpu = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>                no_new_result = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>            }</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>        }</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>        <span class="keywordflow">if</span> (failed_cpu) {</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>            <a class="code hl_functionRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#abe2018e60bb35fb629cdbb057368a2f4">rt_error</a>(<a class="code hl_variableRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a>);</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>        }</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>        <span class="keywordflow">if</span> (no_new_result) {</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>            <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;no_new_result&quot;</span>);</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>            <span class="comment">// Check if another processor could be started or even done</span></div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>            <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a2f92a4e2f154f113ef10a0485e6f3e23">carry_on_binary_search</a>();</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>            <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;result&quot;</span>);</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>        }</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>    }</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>    <span class="comment">// Safety code in case exit after setting best_found fails</span></div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;exiting the interrupt, to allow the binary to finish&quot;</span>);</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>}</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span> </div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ab98e0806224b412ce1199a4a1ff2f388">  890</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#ab98e0806224b412ce1199a4a1ff2f388">start_binary_search</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>    <span class="comment">// Find the number of available processors</span></div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>    uint32_t available = 0;</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> processor_id = 0; processor_id &lt; <a class="code hl_define" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; processor_id++) {</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction == <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2564c1b7bc6ea4d4c778ec3e1d70826e">TO_BE_PREPARED</a>) {</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>            available++;</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>        }</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>    }</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span> </div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>    <span class="comment">// Set off the worse acceptable (note no bitfield would have been set off</span></div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>    <span class="comment">// earlier)</span></div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a> &gt; 0) {</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>        <span class="keywordtype">int</span> processor_id = <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#af7b9d9039e3528de45dd0cdfaae99d56">find_compressor_processor_and_set_tracker</a>(</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>);</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>        <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a2dfa6ebebc99da76f7dc8f92dfe8cbf1">malloc_tables_and_set_off_bit_compressor</a>(</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>, processor_id);</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>    }</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span> </div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>    <span class="comment">// create slices and set off each slice.</span></div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>    uint32_t mid_point = <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>;</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>    <span class="keywordflow">while</span> ((available &gt; 0) &amp;&amp; (mid_point &gt; <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>)) {</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>        <span class="keywordtype">int</span> processor_id = <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#af7b9d9039e3528de45dd0cdfaae99d56">find_compressor_processor_and_set_tracker</a>(mid_point);</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>        <span class="comment">// Check the processor replied and has not been turned of by previous</span></div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>        <span class="keywordflow">if</span> (processor_id == <a class="code hl_define" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>) {</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>            <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;No processor available in start_binary_search&quot;</span>);</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>        }</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>        <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a2dfa6ebebc99da76f7dc8f92dfe8cbf1">malloc_tables_and_set_off_bit_compressor</a>(mid_point, processor_id);</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span> </div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>        <span class="comment">// Find the next step which may change due to rounding</span></div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>        <span class="keywordtype">int</span> step = ((mid_point - <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>) / available);</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>        <span class="keywordflow">if</span> (step &lt; 1) {</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>            step = 1;</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>        }</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>        mid_point -= step;</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>        available--;</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>    }</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span> </div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>    <span class="comment">// Dont need all processors so turn the rest off</span></div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>    <span class="keywordflow">if</span> (available &gt; 0) {</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> processor_id = 0; processor_id &lt; <a class="code hl_define" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; processor_id++) {</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].sorter_instruction == <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2564c1b7bc6ea4d4c778ec3e1d70826e">TO_BE_PREPARED</a>) {</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a3373d705e500da21f936be7ec6b57802">DO_NOT_USE</a>;</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>            }</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>        }</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>    }</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>}</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span> </div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a674c7e8652b957842f71535f081dfc46">  940</a></span><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a674c7e8652b957842f71535f081dfc46">check_bitfield_to_routes</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>    <a class="code hl_struct" href="filter__info_8h.html#structfilter__info__t">filter_info_t</a> **bit_fields = <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a6adeafbfed85221d82b0340a70e9f1d0">bit_fields</a>;</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>    <span class="keywordtype">int</span> *processor_ids = <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#afdb80f23a54430e4c9eb5b51120e211a">processor_ids</a>;</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>    <a class="code hl_struct" href="routing__table_8h.html#structentry__t">entry_t</a> *entries = <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8082501788d19b0833dc0d130c0bd796">uncompressed_table</a>.<a class="code hl_variable" href="routing__table_8h.html#a78c84fd4064e0f3cf4b77a1874209e60">entries</a>;</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>    uint32_t n_bf = <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>;</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>    uint32_t bf_i = 0;</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span> </div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8082501788d19b0833dc0d130c0bd796">uncompressed_table</a>.<a class="code hl_variable" href="routing__table_8h.html#a78df0d6fd3348442567f7ab8b834101b">size</a>; i++) {</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>        <span class="comment">// Bit field of seen processors (assumes less than 33 processors)</span></div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>        uint32_t seen_processors = 0;</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>        <span class="comment">// Go through all bitfields that match the key</span></div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>        <span class="keywordflow">while</span> (bf_i &lt; n_bf &amp;&amp; (entries[i].key_mask.mask &amp; bit_fields[bf_i]-&gt;<a class="code hl_variable" href="filter__info_8h.html#ae4e76f28cca7de5a1e56c9d7a7dd6a85">key</a>) ==</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>                entries[i].<a class="code hl_variable" href="routing__table_8h.html#a225a585fd5012060cc494b0b0ea636cc">key_mask</a>.<a class="code hl_variable" href="routing__table_8h.html#adf30ccd47145700406a26a3aeb2bf12d">key</a>) {</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span> </div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>            <span class="keywordflow">if</span> (seen_processors &amp; (1 &lt;&lt; processor_ids[bf_i])) {</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>                <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;Routing key 0x%08x matches more than one bitfield key&quot;</span></div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>                        <span class="stringliteral">&quot; on processor %d (last found 0x%08x)&quot;</span>,</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>                        entries[i].key_mask.key, processor_ids[bf_i],</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>                        bit_fields[bf_i]-&gt;<a class="code hl_variable" href="filter__info_8h.html#ae4e76f28cca7de5a1e56c9d7a7dd6a85">key</a>);</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>                <a class="code hl_function" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code hl_enumvalue" href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572adf50834e361027bbbe08aad6ebd36d19">EXIT_SWERR</a>);</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>            }</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>            seen_processors |= (1 &lt;&lt; processor_ids[bf_i]);</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>            bf_i++;</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>        }</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>    }</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>}</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span> </div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ad89dee597d14367e18c1ac915ba8fa67">  970</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="bit__field__compressor_8c.html#a3ae867241d002bc2ea1bf2af143724d8">start_compression_process</a>(UNUSED <a class="code hl_typedefRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused0, UNUSED <a class="code hl_typedefRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused1) {</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>    <span class="comment">// malloc the struct and populate n bit-fields. DOES NOT populate the rest.</span></div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a> = <a class="code hl_function" href="bit__field__reader_8h.html#a29dcdb24d9f038104f2ee15b07862d3d">bit_field_reader_initialise</a>(<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>);</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>    <span class="comment">// check state to fail if not read in</span></div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a> == <a class="code hl_defineRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>        <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;failed to read in bitfields, quitting&quot;</span>);</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>        <a class="code hl_function" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code hl_enumvalue" href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572ace6a5af7573c1cc48533acf408307ad3">EXIT_MALLOC</a>);</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>    }</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span> </div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>    <span class="comment">// Set the threshold</span></div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#adbf7cfb3fc725eadae6decaedd0f97e6">threshold</a> == 0) {</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a> = 0;</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a> = (<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a> *</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#adbf7cfb3fc725eadae6decaedd0f97e6">threshold</a>) / 100;</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a> = <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>;</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>    }</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>    <a class="code hl_function" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;threshold_in_bitfields %d which is %d percent of %d&quot;</span>,</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>            <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#adbf7cfb3fc725eadae6decaedd0f97e6">threshold</a>,</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>            <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>);</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span> </div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>    <span class="comment">// set up mid point trackers. NEEDED here as setup no bitfields attempt</span></div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>    <span class="comment">// will use it during processor allocation.</span></div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>    <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#afc6d9b52b2ed114671d16255f1fcbcff">set_up_tested_mid_points</a>();</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span> </div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>    <span class="comment">// set off the first compression attempt (aka no bitfields).</span></div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>    <span class="keywordtype">bool</span> success = <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#adc7135678f90b4c7dbdd4d1d4b56dacb">setup_no_bitfields_attempt</a>();</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>    <span class="keywordflow">if</span> (!success) {</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>        <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;failed to set up uncompressed attempt&quot;</span>);</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>        <a class="code hl_function" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code hl_enumvalue" href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572ace6a5af7573c1cc48533acf408307ad3">EXIT_MALLOC</a>);</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>    }</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span> </div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;populating sorted bitfields at time step: %d&quot;</span>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a>);</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>    <a class="code hl_function" href="bit__field__reader_8h.html#af63b553947cd47b27df8eeece1ddfba1">bit_field_reader_read_in_bit_fields</a>(<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>);</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>    <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a674c7e8652b957842f71535f081dfc46">check_bitfield_to_routes</a>();</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span> </div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>    <span class="comment">// the first possible failure is all bitfields so set there.</span></div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">lowest_failure</a> = <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>;</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;finished reading bitfields at time step: %d&quot;</span>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a>);</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span> </div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>    <span class="comment">//TODO: safety code to be removed</span></div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> bit_field_index = 0;</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>            bit_field_index &lt; <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">n_bit_fields</a>;</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>            bit_field_index++) {</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>        <span class="comment">// get key</span></div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>        <a class="code hl_struct" href="filter__info_8h.html#structfilter__info__t">filter_info_t</a> *bf_pointer =</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>                <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a6adeafbfed85221d82b0340a70e9f1d0">bit_fields</a>[bit_field_index];</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>        <span class="keywordflow">if</span> (bf_pointer == <a class="code hl_defineRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>            <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;failed at index %d&quot;</span>, bit_field_index);</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>            <a class="code hl_function" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code hl_variableRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a>);</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>        }</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>    }</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span> </div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>    <span class="comment">// start the binary search by slicing the search space by the compressors.</span></div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>    <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#ab98e0806224b412ce1199a4a1ff2f388">start_binary_search</a>();</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span> </div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>    <span class="comment">// set off checker which in turn sets of the other compressor processors</span></div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>    <a class="code hl_functionRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a653c1de1c4181f03c7ba4dbba38df9c7">spin1_schedule_callback</a>(</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>            <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a85c24f73513945a5d698d12620719e6d">check_compressors</a>, 0, 0, <a class="code hl_enumvalue" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276ae4b1a013c32305821940ce11363cb879">COMPRESSION_START_PRIORITY</a>);</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>}</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span> </div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ad1f276497974202116d1b8b98fbd1e53"> 1034</a></span><span class="keyword">static</span> <span class="keyword">inline</span> <a class="code hl_structRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html">vcpu_t</a> *<a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#ad1f276497974202116d1b8b98fbd1e53">get_this_vcpu_info</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>    <a class="code hl_structRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html">vcpu_t</a> *sark_virtual_processor_info = (<a class="code hl_structRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html">vcpu_t</a> *) <a class="code hl_defineRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a06e96a522d4adf97fbb2549806f73cfb">SV_VCPU</a>;</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>    <a class="code hl_structRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html">vcpu_t</a> *restrict this_vcpu_info =</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>            &amp;sark_virtual_processor_info[<a class="code hl_functionRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#acc208cdfe1d4eb5caa298a8a5b4db50c">spin1_get_core_id</a>()];</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>    <span class="keywordflow">return</span> this_vcpu_info;</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>}</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span> </div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#a657f899c766507fdf3203186b8cce7f4"> 1043</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a657f899c766507fdf3203186b8cce7f4">initialise_user_register_tracker</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;set up user register tracker (easier reading)&quot;</span>);</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>    <a class="code hl_structRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html">vcpu_t</a> *restrict this_vcpu_info = <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#ad1f276497974202116d1b8b98fbd1e53">get_this_vcpu_info</a>();</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span> </div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>    <span class="comment">// convert user registers to struct pointers</span></div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>    <a class="code hl_struct" href="data__specification_8h.html#structdata__specification__metadata__t">data_specification_metadata_t</a> *restrict app_ptr_table =</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>            (<a class="code hl_struct" href="data__specification_8h.html#structdata__specification__metadata__t">data_specification_metadata_t</a> *) this_vcpu_info-&gt;user0;</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a> =</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>            (<a class="code hl_struct" href="compressor__sorter__structs_8h.html#structuncompressed__table__region__data__t">uncompressed_table_region_data_t</a> *) this_vcpu_info-&gt;user1;</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a> = (<a class="code hl_struct" href="compressor__sorter__structs_8h.html#structregion__addresses__t">region_addresses_t</a> *) this_vcpu_info-&gt;user2;</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span> </div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a> = <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a225b90b549bc339e36c01da347a0ef3c">comms_sdram</a>;</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>    for (<span class="keywordtype">int</span> processor_id = 0; processor_id &lt; <a class="code hl_define" href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a>; processor_id++) {</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a9c8f01d4cc8cfc2b4377fe14f39e13ff">compressor_state</a> = <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa488d46012070df0693507cde3473cb37">UNUSED_CORE</a>;</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a61f110d0003851c81fc0d250f8d32e00">NOT_COMPRESSOR</a>;</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a70755b2138b556e54db6c862767af5a0">mid_point</a> = <a class="code hl_define" href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a>;</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a51efd0e36bf8f32e7fae4670b84dff91">routing_tables</a> = <a class="code hl_defineRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a69f0516a2f97f34460eea02de697034e">uncompressed_router_table</a> =</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>                &amp;<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8082501788d19b0833dc0d130c0bd796">uncompressed_table</a>;</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a87955dbae6fb7763d3a90f8e7d66f07f">sorted_bit_fields</a> = <a class="code hl_defineRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a1098c00b19e53a646354531429069840">fake_heap_data</a> = <a class="code hl_defineRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>    }</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ac2f679e18140a40be26be97edb8bb1a9">usable_sdram_regions</a> = (<a class="code hl_struct" href="malloc__extras_8h.html#structavailable__sdram__blocks">available_sdram_blocks</a> *) this_vcpu_info-&gt;user3;</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span> </div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ac0690f4848866c991ba93ee6ea829eb6">retires_left</a> = <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a82af5714aab971cccd2493b7c6a4c5df">retry_count</a>;</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span> </div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;finished setting up register tracker:\n\n&quot;</span></div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>            <span class="stringliteral">&quot;user0 = %d\n user1 = %d\n user2 = %d\n user3 = %d\n&quot;</span>,</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>            app_ptr_table, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>,</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>            <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ac2f679e18140a40be26be97edb8bb1a9">usable_sdram_regions</a>);</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>}</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span> </div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#ad8af6cddaab51d89d2c0a94647e01055"> 1076</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#ad8af6cddaab51d89d2c0a94647e01055">initialise_routing_control_flags</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>    <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ab580a14d287e81d47a1720fb92e2a199">app_id</a> = <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a9abf6c1ac9c19615539601f10f760a28">app_id</a>;</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;app id %d, uncompress total entries %d&quot;</span>,</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>            <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ab580a14d287e81d47a1720fb92e2a199">app_id</a>, <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8082501788d19b0833dc0d130c0bd796">uncompressed_table</a>.<a class="code hl_variable" href="routing__table_8h.html#a78df0d6fd3348442567f7ab8b834101b">size</a>);</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>}</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span> </div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#aaf6505dd1f37bcd324f5744dddedc3a3"> 1085</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#aaf6505dd1f37bcd324f5744dddedc3a3">initialise_compressor_processors</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>    <span class="comment">// allocate DTCM memory for the processor status trackers</span></div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;allocate and step compressor processor status&quot;</span>);</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>    <a class="code hl_struct" href="compressor__sorter__structs_8h.html#structcompressor__processors__top__t">compressor_processors_top_t</a> *compressor_processors_top = (<span class="keywordtype">void</span> *)</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>            &amp;<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a83219002046c2cb82a5ed5d03d0c9901">processors</a>[<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#af7e0d710a4c4d67be7c0f2578e97ff3f">n_processors</a>];</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span> </div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>    <span class="comment">// Switch compressor processors to TO_BE_PREPARED</span></div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>    for (uint32_t processor_index = 0;</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>            processor_index &lt; compressor_processors_top-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a4721bc2b310522a29d013ea16eace549">n_processors</a>;</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>            processor_index++) {</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>        <span class="keywordtype">int</span> processor_id =</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>                compressor_processors_top-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#afe45e56c21a93f28de52ca9b72ac35d8">processor_id</a>[processor_index];</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>        <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a>[processor_id].<a class="code hl_variable" href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">sorter_instruction</a> = <a class="code hl_enumvalue" href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2564c1b7bc6ea4d4c778ec3e1d70826e">TO_BE_PREPARED</a>;</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>    }</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>}</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span> </div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#abc8ec4992e18193766cc267a4968f1d7"> 1104</a></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#abc8ec4992e18193766cc267a4968f1d7">initialise</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;Setting up stuff to allow bitfield compressor control process&quot;</span></div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>            <span class="stringliteral">&quot; to occur.&quot;</span>);</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span> </div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>    <span class="comment">// Get pointer to 1st virtual processor info struct in SRAM</span></div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>    <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#a657f899c766507fdf3203186b8cce7f4">initialise_user_register_tracker</a>();</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span> </div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>    <span class="comment">// ensure the original table is sorted by key</span></div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>    <span class="comment">// (done here instead of by host for performance)</span></div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>    <a class="code hl_function" href="bit__field__table__generator_8h.html#a6236cf9295f7f8805153cbbdd3c8cfc3">sort_table_by_key</a>(&amp;<a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a>-&gt;<a class="code hl_variable" href="compressor__sorter__structs_8h.html#a8082501788d19b0833dc0d130c0bd796">uncompressed_table</a>);</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span> </div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>    <span class="comment">// get the compressor data flags (app id, compress only when needed,</span></div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>    <span class="comment">//compress as much as possible, x_entries</span></div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>    <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#ad8af6cddaab51d89d2c0a94647e01055">initialise_routing_control_flags</a>();</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span> </div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>    <span class="comment">// build the fake heap for allocating memory</span></div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>    <a class="code hl_function" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;setting up fake heap for sdram usage&quot;</span>);</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>    <span class="keywordtype">bool</span> heap_creation = <a class="code hl_function" href="malloc__extras_8h.html#a1bc937477e0ff1a0d8f6322d4388508b">malloc_extras_initialise_and_build_fake_heap</a>(</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>            <a class="code hl_variable" href="bit__field__sorter__and__searcher_8c.html#ac2f679e18140a40be26be97edb8bb1a9">usable_sdram_regions</a>);</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>    <span class="keywordflow">if</span> (!heap_creation) {</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>        <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;failed to setup stolen heap&quot;</span>);</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>    }</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span> </div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>    <span class="comment">// allows us to not be forced to use the safety code</span></div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>    <span class="comment">// (used in production mode)</span></div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>    <a class="code hl_function" href="malloc__extras_8h.html#a61b28e08827e6631200d756a30403064">malloc_extras_turn_off_safety</a>();</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span> </div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;finished setting up fake heap for sdram usage&quot;</span>);</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span> </div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>    <span class="comment">// get the compressor processors stored in an array</span></div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>    <a class="code hl_function" href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a>(<span class="stringliteral">&quot;start init of compressor processors&quot;</span>);</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#aaf6505dd1f37bcd324f5744dddedc3a3">initialise_compressor_processors</a>()) {</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>        <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;failed to init the compressor processors.&quot;</span>);</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>    }</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span> </div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>    <span class="comment">// finished init</span></div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>}</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span> </div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"><a class="line" href="bit__field__sorter__and__searcher_8c.html#aa14f4f1d4c84183b7bf7108bf930a23c"> 1146</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#aa14f4f1d4c84183b7bf7108bf930a23c">c_main</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#abc8ec4992e18193766cc267a4968f1d7">initialise</a>()) {</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>        <a class="code hl_function" href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a>(<span class="stringliteral">&quot;failed to init&quot;</span>);</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>        <a class="code hl_function" href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a>(<a class="code hl_enumvalue" href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572aa79a9cd74d0a705ad96bd17b5181c56b">EXIT_FAIL</a>);</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>    }</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span> </div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>    <span class="comment">// set up interrupts</span></div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>    spin1_set_timer_tick(<a class="code hl_define" href="bit__field__sorter__and__searcher_8c.html#a65fd90f232757535f02c46a885e49012">TIME_STEP</a>);</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>    <a class="code hl_functionRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#afc98f97be297e7077334cad216d32b57">spin1_callback_on</a>(<a class="code hl_variableRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a06fc87d81c62e9abb8790b6e5713c55bad1110959cd9312a756c5fb1d0f0eab8d">TIMER_TICK</a>, <a class="code hl_function" href="bit__field__sorter__and__searcher_8c.html#ac9914f4341d050b71b5e1516eb19a184">timer_callback</a>, <a class="code hl_enumvalue" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276a141de7322a9c4947e64a2da966a4b1ef">TIMER_TICK_PRIORITY</a>);</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span> </div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>    <span class="comment">// kick-start the process</span></div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>    <a class="code hl_functionRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a653c1de1c4181f03c7ba4dbba38df9c7">spin1_schedule_callback</a>(</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>            <a class="code hl_function" href="bit__field__compressor_8c.html#a3ae867241d002bc2ea1bf2af143724d8">start_compression_process</a>, 0, 0, <a class="code hl_enumvalue" href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276ae4b1a013c32305821940ce11363cb879">COMPRESSION_START_PRIORITY</a>);</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span> </div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>    <span class="comment">// go</span></div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>    <a class="code hl_function" href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a>(<span class="stringliteral">&quot;waiting for sync&quot;</span>);</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>    <a class="code hl_functionRef" href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#ad49e25c0f0359f6826d8addcebf1e05c">spin1_start</a>(<a class="code hl_variableRef" href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a7f5f3be8c06b875eff1b6e7501ca8446a18a6fa8889d7501469a972a54da8943c">SYNC_WAIT</a>);</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>}</div>
<div class="ttc" id="abit__field_8h_html"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinn_common/bit__field_8h.html">bit_field.h</a></div></div>
<div class="ttc" id="abit__field_8h_html_a70e667669dab5c870f1f8f97d96b4abd"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinn_common/bit__field_8h.html#a70e667669dab5c870f1f8f97d96b4abd">bit_field_t</a></div><div class="ttdeci">uint32_t * bit_field_t</div></div>
<div class="ttc" id="abit__field__compressor_8c_html_a3ae867241d002bc2ea1bf2af143724d8"><div class="ttname"><a href="bit__field__compressor_8c.html#a3ae867241d002bc2ea1bf2af143724d8">start_compression_process</a></div><div class="ttdeci">void start_compression_process(void)</div><div class="ttdoc">Handle the compression process.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__compressor_8c_source.html#l00074">bit_field_compressor.c:74</a></div></div>
<div class="ttc" id="abit__field__reader_8h_html"><div class="ttname"><a href="bit__field__reader_8h.html">bit_field_reader.h</a></div><div class="ttdoc">Code for reading bitfields in SDRAM.</div></div>
<div class="ttc" id="abit__field__reader_8h_html_a29dcdb24d9f038104f2ee15b07862d3d"><div class="ttname"><a href="bit__field__reader_8h.html#a29dcdb24d9f038104f2ee15b07862d3d">bit_field_reader_initialise</a></div><div class="ttdeci">static sorted_bit_fields_t * bit_field_reader_initialise(region_addresses_t *restrict region_addresses)</div><div class="ttdoc">Sets up the initial sorted bitfield struct.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__reader_8h_source.html#l00257">bit_field_reader.h:257</a></div></div>
<div class="ttc" id="abit__field__reader_8h_html_af63b553947cd47b27df8eeece1ddfba1"><div class="ttname"><a href="bit__field__reader_8h.html#af63b553947cd47b27df8eeece1ddfba1">bit_field_reader_read_in_bit_fields</a></div><div class="ttdeci">static void bit_field_reader_read_in_bit_fields(region_addresses_t *restrict region_addresses, sorted_bit_fields_t *restrict sorted_bit_fields)</div><div class="ttdoc">Read in bitfields.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__reader_8h_source.html#l00209">bit_field_reader.h:209</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a1281d93ddf8f8bf4e2a609794a511949"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a1281d93ddf8f8bf4e2a609794a511949">time_steps</a></div><div class="ttdeci">uint32_t time_steps</div><div class="ttdoc">DEBUG variable: counter of how many time steps have passed.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00072">bit_field_sorter_and_searcher.c:72</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a158c3d6523a5b6472c894c9294cf018c"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a158c3d6523a5b6472c894c9294cf018c">prepare_processor_first_time</a></div><div class="ttdeci">bool prepare_processor_first_time(int processor_id)</div><div class="ttdoc">Prepare a processor for the first time.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00434">bit_field_sorter_and_searcher.c:434</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a1fad8f99071ffcefe27801b5a6f9f702"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a1fad8f99071ffcefe27801b5a6f9f702">best_success</a></div><div class="ttdeci">int best_success</div><div class="ttdoc">Best midpoint that record a success.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00090">bit_field_sorter_and_searcher.c:90</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a2dfa6ebebc99da76f7dc8f92dfe8cbf1"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a2dfa6ebebc99da76f7dc8f92dfe8cbf1">malloc_tables_and_set_off_bit_compressor</a></div><div class="ttdeci">static void malloc_tables_and_set_off_bit_compressor(int mid_point, int processor_id)</div><div class="ttdoc">Build tables and tries to set off a compressor processor based off a mid-point.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00245">bit_field_sorter_and_searcher.c:245</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a2e2a5ecc993dcd419e28b31719c95e8b"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a2e2a5ecc993dcd419e28b31719c95e8b">pass_instructions_to_compressor</a></div><div class="ttdeci">static bool pass_instructions_to_compressor(uint32_t processor_id, uint32_t mid_point, uint32_t table_size)</div><div class="ttdoc">Store the addresses for freeing when response code is sent.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00208">bit_field_sorter_and_searcher.c:208</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a2f92a4e2f154f113ef10a0485e6f3e23"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a2f92a4e2f154f113ef10a0485e6f3e23">carry_on_binary_search</a></div><div class="ttdeci">void carry_on_binary_search(void)</div><div class="ttdoc">Start the binary search on another compressor if one available.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00638">bit_field_sorter_and_searcher.c:638</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a3757241911304025ec9b47e744a37d8e"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a3757241911304025ec9b47e744a37d8e">last_compressed_table</a></div><div class="ttdeci">table_t *restrict last_compressed_table</div><div class="ttdoc">The store for the last routing table that was compressed.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00099">bit_field_sorter_and_searcher.c:99</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a3ea7d15729b596b80e60ef17ce6065da"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a3ea7d15729b596b80e60ef17ce6065da">lowest_failure</a></div><div class="ttdeci">int lowest_failure</div><div class="ttdoc">Lowest midpoint that record failure.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00093">bit_field_sorter_and_searcher.c:93</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a49520fa4fcbd652ababa3ed7e9e002ee"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a49520fa4fcbd652ababa3ed7e9e002ee">all_compressor_processors_done</a></div><div class="ttdeci">bool all_compressor_processors_done(void)</div><div class="ttdoc">Check to see if all compressor processor are done and not ready.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00568">bit_field_sorter_and_searcher.c:568</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a605487b6ac6afbca9f5f5ff329698731"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a605487b6ac6afbca9f5f5ff329698731">SDRAM_POLL_ATTEMPTS</a></div><div class="ttdeci">#define SDRAM_POLL_ATTEMPTS</div><div class="ttdoc">Number of attempts for SDRAM poll.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00051">bit_field_sorter_and_searcher.c:51</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a657f899c766507fdf3203186b8cce7f4"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a657f899c766507fdf3203186b8cce7f4">initialise_user_register_tracker</a></div><div class="ttdeci">static void initialise_user_register_tracker(void)</div><div class="ttdoc">Set up a tracker for the user registers so that its easier to use during coding.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l01043">bit_field_sorter_and_searcher.c:1043</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a65b6025151a6ae83a91d2e39fdd63a54"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a65b6025151a6ae83a91d2e39fdd63a54">SDRAM_POLL_DELAY</a></div><div class="ttdeci">#define SDRAM_POLL_DELAY</div><div class="ttdoc">Delay between checks of SDRAM polling.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00048">bit_field_sorter_and_searcher.c:48</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a65fd90f232757535f02c46a885e49012"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a65fd90f232757535f02c46a885e49012">TIME_STEP</a></div><div class="ttdeci">#define TIME_STEP</div><div class="ttdoc">Time step for safety timer tick interrupt.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00042">bit_field_sorter_and_searcher.c:42</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a66694d23d312a1356159273319534c93"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a66694d23d312a1356159273319534c93">uncompressed_router_table</a></div><div class="ttdeci">uncompressed_table_region_data_t *restrict uncompressed_router_table</div><div class="ttdoc">The uncompressed router table.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00079">bit_field_sorter_and_searcher.c:79</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a674c7e8652b957842f71535f081dfc46"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a674c7e8652b957842f71535f081dfc46">check_bitfield_to_routes</a></div><div class="ttdeci">static void check_bitfield_to_routes(void)</div><div class="ttdoc">Ensure that for each router table entry there is at most 1 bitfield per processor.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00940">bit_field_sorter_and_searcher.c:940</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a687d2b4119a5e8d0a1157ef1391f38a4"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a687d2b4119a5e8d0a1157ef1391f38a4">threshold_in_bitfields</a></div><div class="ttdeci">uint32_t threshold_in_bitfields</div><div class="ttdoc">The minimum number of bitfields to be merged in.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00096">bit_field_sorter_and_searcher.c:96</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a698a835cfc60d80617235e9e5879e849"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a698a835cfc60d80617235e9e5879e849">handle_best_cleanup</a></div><div class="ttdeci">static void handle_best_cleanup(void)</div><div class="ttdoc">Clean up when we've found a good compression.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00408">bit_field_sorter_and_searcher.c:408</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a6cc8469cd2af4fc03d051e88bc414e87"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a6cc8469cd2af4fc03d051e88bc414e87">send_prepare_message</a></div><div class="ttdeci">void send_prepare_message(int processor_id)</div><div class="ttdoc">Send a message telling the processor to prepare for the next run.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00173">bit_field_sorter_and_searcher.c:173</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a72e0d6c3a5bce7e5fbf2c7f586db5fa3"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a72e0d6c3a5bce7e5fbf2c7f586db5fa3">process_success</a></div><div class="ttdeci">void process_success(int mid_point, int processor_id)</div><div class="ttdoc">Handle the fact that a midpoint was successful.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00692">bit_field_sorter_and_searcher.c:692</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a7fcef664d5dc54944296abea6f026276"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276">priorities</a></div><div class="ttdeci">priorities</div><div class="ttdoc">Callback priorities.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00063">bit_field_sorter_and_searcher.c:63</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a7fcef664d5dc54944296abea6f026276a141de7322a9c4947e64a2da966a4b1ef"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276a141de7322a9c4947e64a2da966a4b1ef">TIMER_TICK_PRIORITY</a></div><div class="ttdeci">@ TIMER_TICK_PRIORITY</div><div class="ttdoc">Timer tick is high priority.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00066">bit_field_sorter_and_searcher.c:65</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a7fcef664d5dc54944296abea6f026276ae4b1a013c32305821940ce11363cb879"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a7fcef664d5dc54944296abea6f026276ae4b1a013c32305821940ce11363cb879">COMPRESSION_START_PRIORITY</a></div><div class="ttdeci">@ COMPRESSION_START_PRIORITY</div><div class="ttdoc">General processing is low priority.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00064">bit_field_sorter_and_searcher.c:64</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a85c24f73513945a5d698d12620719e6d"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a85c24f73513945a5d698d12620719e6d">check_compressors</a></div><div class="ttdeci">void check_compressors(uint unused0, uint unused1)</div><div class="ttdoc">Check compressors' state till they're finished.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00850">bit_field_sorter_and_searcher.c:850</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a87231bf5b93d39515d3ca6d88fdd8196"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a87231bf5b93d39515d3ca6d88fdd8196">set_merged_filters</a></div><div class="ttdeci">static void set_merged_filters(void)</div><div class="ttdoc">Set the flag for the merged filters.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00303">bit_field_sorter_and_searcher.c:303</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a873db400c665ddf0dc98973663ebdef0"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a873db400c665ddf0dc98973663ebdef0">tested_mid_points</a></div><div class="ttdeci">bit_field_t tested_mid_points</div><div class="ttdoc">Stores which values have been tested.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00109">bit_field_sorter_and_searcher.c:109</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a886d527c16dc0e3986b31801ca0dec69"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a886d527c16dc0e3986b31801ca0dec69">ROUTE_APP_ID_BIT_SHIFT</a></div><div class="ttdeci">#define ROUTE_APP_ID_BIT_SHIFT</div><div class="ttdoc">Bit shift for the app id for the route.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00060">bit_field_sorter_and_searcher.c:60</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a8a87babcb3249c6fc47b2325baa8ff07"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a8a87babcb3249c6fc47b2325baa8ff07">load_routing_table_into_router</a></div><div class="ttdeci">static bool load_routing_table_into_router(void)</div><div class="ttdoc">Load the best routing table to the router.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00125">bit_field_sorter_and_searcher.c:125</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a92a4dc5c2b97aa7fb1c4a353e24e459c"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a92a4dc5c2b97aa7fb1c4a353e24e459c">all_compressor_processors_busy</a></div><div class="ttdeci">bool all_compressor_processors_busy(void)</div><div class="ttdoc">Check if a compressor processor is available.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00546">bit_field_sorter_and_searcher.c:546</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_a947e5c5e068c20feb3d0470199964f37"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#a947e5c5e068c20feb3d0470199964f37">RTR_MC_FAILED</a></div><div class="ttdeci">#define RTR_MC_FAILED</div><div class="ttdoc">Flag for if a rtr_mc failure.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00057">bit_field_sorter_and_searcher.c:57</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_aa14f4f1d4c84183b7bf7108bf930a23c"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#aa14f4f1d4c84183b7bf7108bf930a23c">c_main</a></div><div class="ttdeci">void c_main(void)</div><div class="ttdoc">The main entrance.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l01146">bit_field_sorter_and_searcher.c:1146</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_aabb7e8da822c5d0a45b1ed8032ede71c"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#aabb7e8da822c5d0a45b1ed8032ede71c">send_force_stop_message</a></div><div class="ttdeci">void send_force_stop_message(int processor_id)</div><div class="ttdoc">Send a message forcing the processor to stop its compression attempt.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00162">bit_field_sorter_and_searcher.c:162</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_aaf61d0e8c4cdc01297fe1d4725ec1aab"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#aaf61d0e8c4cdc01297fe1d4725ec1aab">process_failed</a></div><div class="ttdeci">void process_failed(int mid_point, int processor_id)</div><div class="ttdoc">Handle the fact that a midpoint failed for reasons other than memory allocation.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00749">bit_field_sorter_and_searcher.c:749</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_aaf6505dd1f37bcd324f5744dddedc3a3"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#aaf6505dd1f37bcd324f5744dddedc3a3">initialise_compressor_processors</a></div><div class="ttdeci">bool initialise_compressor_processors(void)</div><div class="ttdoc">Set things up for the compressor processors so they are ready to be compressing.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l01085">bit_field_sorter_and_searcher.c:1085</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ab580a14d287e81d47a1720fb92e2a199"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ab580a14d287e81d47a1720fb92e2a199">app_id</a></div><div class="ttdeci">uint32_t app_id</div><div class="ttdoc">The compressor's SARK application id.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00102">bit_field_sorter_and_searcher.c:102</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ab98e0806224b412ce1199a4a1ff2f388"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ab98e0806224b412ce1199a4a1ff2f388">start_binary_search</a></div><div class="ttdeci">void start_binary_search(void)</div><div class="ttdoc">Start binary search on all compressors dividing the bitfields as evenly as possible.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00890">bit_field_sorter_and_searcher.c:890</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_abc8ec4992e18193766cc267a4968f1d7"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#abc8ec4992e18193766cc267a4968f1d7">initialise</a></div><div class="ttdeci">static bool initialise(void)</div><div class="ttdoc">Callback to set off the router compressor.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l01104">bit_field_sorter_and_searcher.c:1104</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_abd3f1ab2220a36c573ef63d1876a8956"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#abd3f1ab2220a36c573ef63d1876a8956">comms_sdram</a></div><div class="ttdeci">comms_sdram_t *restrict comms_sdram</div><div class="ttdoc">SDRAM used to communicate with the compressors.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00112">bit_field_sorter_and_searcher.c:112</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_abe73a2259d14e3152ae6ff8192ed5afb"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#abe73a2259d14e3152ae6ff8192ed5afb">sorted_bit_fields</a></div><div class="ttdeci">sorted_bit_fields_t *restrict sorted_bit_fields</div><div class="ttdoc">the list of bitfields in sorted order based off best effect, and processor ids.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00106">bit_field_sorter_and_searcher.c:106</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_abf1d619d795cc5348b19805e77469a1b"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#abf1d619d795cc5348b19805e77469a1b">exit_carry_on_if_all_compressor_processors_done</a></div><div class="ttdeci">bool exit_carry_on_if_all_compressor_processors_done(void)</div><div class="ttdoc">Check if all processors are done; if yes, run best and exit.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00580">bit_field_sorter_and_searcher.c:580</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ac0690f4848866c991ba93ee6ea829eb6"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ac0690f4848866c991ba93ee6ea829eb6">retires_left</a></div><div class="ttdeci">uint32_t retires_left</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00119">bit_field_sorter_and_searcher.c:119</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ac2f679e18140a40be26be97edb8bb1a9"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ac2f679e18140a40be26be97edb8bb1a9">usable_sdram_regions</a></div><div class="ttdeci">available_sdram_blocks *restrict usable_sdram_regions</div><div class="ttdoc">SDRAM blocks that the fake heap can use.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00087">bit_field_sorter_and_searcher.c:87</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ac9914f4341d050b71b5e1516eb19a184"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ac9914f4341d050b71b5e1516eb19a184">timer_callback</a></div><div class="ttdeci">void timer_callback(uint unused0, uint unused1)</div><div class="ttdoc">Timer interrupt for controlling time taken to try to compress table.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00675">bit_field_sorter_and_searcher.c:675</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_acf36c228ebab2d1aeea784bd9f6660f3"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#acf36c228ebab2d1aeea784bd9f6660f3">KILL_TIME</a></div><div class="ttdeci">#define KILL_TIME</div><div class="ttdoc">After how many time steps to kill the process.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00045">bit_field_sorter_and_searcher.c:45</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ad1edafabb830bb65416e6254bd0cc74c"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ad1edafabb830bb65416e6254bd0cc74c">find_prepared_processor</a></div><div class="ttdeci">int find_prepared_processor(void)</div><div class="ttdoc">Get the next processor id which is ready to run a compression.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00472">bit_field_sorter_and_searcher.c:472</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ad1f276497974202116d1b8b98fbd1e53"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ad1f276497974202116d1b8b98fbd1e53">get_this_vcpu_info</a></div><div class="ttdeci">static vcpu_t * get_this_vcpu_info(void)</div><div class="ttdoc">Get a handle to this CPU's vcpu structure.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l01034">bit_field_sorter_and_searcher.c:1034</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ad25e5b4067e405459a984cefacdcd02e"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ad25e5b4067e405459a984cefacdcd02e">process_failed_malloc</a></div><div class="ttdeci">void process_failed_malloc(int mid_point, int processor_id)</div><div class="ttdoc">Handle the fact that a midpoint failed due to insufficient memory.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00725">bit_field_sorter_and_searcher.c:725</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ad3147e0fb533cf1158003dd6cf0c5d45"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ad3147e0fb533cf1158003dd6cf0c5d45">ADD_INCLUSIVE_BIT</a></div><div class="ttdeci">#define ADD_INCLUSIVE_BIT</div><div class="ttdoc">The magic +1 for inclusive coverage that 0 index is no bitfields.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00054">bit_field_sorter_and_searcher.c:54</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ad690fc1413aedf136f80b660e48d2326"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ad690fc1413aedf136f80b660e48d2326">just_reduced_cores_due_to_malloc</a></div><div class="ttdeci">bool just_reduced_cores_due_to_malloc</div><div class="ttdoc">Record if the last action was to reduce cores due to malloc.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00115">bit_field_sorter_and_searcher.c:115</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ad8af6cddaab51d89d2c0a94647e01055"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ad8af6cddaab51d89d2c0a94647e01055">initialise_routing_control_flags</a></div><div class="ttdeci">static void initialise_routing_control_flags(void)</div><div class="ttdoc">Read in router table setup parameters.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l01076">bit_field_sorter_and_searcher.c:1076</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_adc7135678f90b4c7dbdd4d1d4b56dacb"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#adc7135678f90b4c7dbdd4d1d4b56dacb">setup_no_bitfields_attempt</a></div><div class="ttdeci">bool setup_no_bitfields_attempt(void)</div><div class="ttdoc">Set up the compression attempt for the no bitfield version.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00522">bit_field_sorter_and_searcher.c:522</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ae79865738cd37176e6520d72154ce64a"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ae79865738cd37176e6520d72154ce64a">process_compressor_response</a></div><div class="ttdeci">void process_compressor_response(int processor_id, compressor_states finished_state)</div><div class="ttdoc">Process the response from a compressor's attempt to compress.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00789">bit_field_sorter_and_searcher.c:789</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_ae8632d32eb1045a224b14fd8535005ab"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#ae8632d32eb1045a224b14fd8535005ab">terminated</a></div><div class="ttdeci">volatile bool terminated</div><div class="ttdoc">Whether we found a stopping position.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00075">bit_field_sorter_and_searcher.c:75</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_af4f616ec6ec66cfb3babbc369e942fa4"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#af4f616ec6ec66cfb3babbc369e942fa4">region_addresses</a></div><div class="ttdeci">region_addresses_t *restrict region_addresses</div><div class="ttdoc">The locations of bitfields from application processors.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00083">bit_field_sorter_and_searcher.c:83</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_af7b9d9039e3528de45dd0cdfaae99d56"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#af7b9d9039e3528de45dd0cdfaae99d56">find_compressor_processor_and_set_tracker</a></div><div class="ttdeci">int find_compressor_processor_and_set_tracker(int midpoint)</div><div class="ttdoc">Get the next processor ID which is ready to run a compression.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00507">bit_field_sorter_and_searcher.c:507</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_af8905b57f57799ccb76d07dadb273efd"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#af8905b57f57799ccb76d07dadb273efd">locate_next_mid_point</a></div><div class="ttdeci">static int locate_next_mid_point(void)</div><div class="ttdoc">Locate the next valid midpoint to test.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00315">bit_field_sorter_and_searcher.c:315</a></div></div>
<div class="ttc" id="abit__field__sorter__and__searcher_8c_html_afc6d9b52b2ed114671d16255f1fcbcff"><div class="ttname"><a href="bit__field__sorter__and__searcher_8c.html#afc6d9b52b2ed114671d16255f1fcbcff">set_up_tested_mid_points</a></div><div class="ttdeci">static bool set_up_tested_mid_points(void)</div><div class="ttdoc">Set up the search bitfields.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__sorter__and__searcher_8c_source.html#l00182">bit_field_sorter_and_searcher.c:182</a></div></div>
<div class="ttc" id="abit__field__table__generator_8h_html"><div class="ttname"><a href="bit__field__table__generator_8h.html">bit_field_table_generator.h</a></div><div class="ttdoc">The table generator support code.</div></div>
<div class="ttc" id="abit__field__table__generator_8h_html_a6236cf9295f7f8805153cbbdd3c8cfc3"><div class="ttname"><a href="bit__field__table__generator_8h.html#a6236cf9295f7f8805153cbbdd3c8cfc3">sort_table_by_key</a></div><div class="ttdeci">void sort_table_by_key(table_t *table)</div><div class="ttdoc">Sort a given table so that the entries in the table are by key value.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__table__generator_8h_source.html#l00264">bit_field_table_generator.h:264</a></div></div>
<div class="ttc" id="abit__field__table__generator_8h_html_af67eedbb6f9ea96b5d8eb2cede279c48"><div class="ttname"><a href="bit__field__table__generator_8h.html#af67eedbb6f9ea96b5d8eb2cede279c48">bit_field_table_generator_max_size</a></div><div class="ttdeci">static uint32_t bit_field_table_generator_max_size(int mid_point, table_t *restrict uncompressed_table, sorted_bit_fields_t *restrict sorted_bit_fields)</div><div class="ttdoc">Take a midpoint and read the sorted bitfields, computing the max size of the routing table.</div><div class="ttdef"><b>Definition:</b> <a href="bit__field__table__generator_8h_source.html#l00130">bit_field_table_generator.h:130</a></div></div>
<div class="ttc" id="acircular__buffer_8h_html"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinn_common/circular__buffer_8h.html">circular_buffer.h</a></div></div>
<div class="ttc" id="acommon-typedefs_8h_html"><div class="ttname"><a href="common-typedefs_8h.html">common-typedefs.h</a></div><div class="ttdoc">Data type definitions for SpiNNaker Neuron-modelling.</div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html"><div class="ttname"><a href="compressor__sorter__structs_8h.html">compressor_sorter_structs.h</a></div><div class="ttdoc">Structures and enumerations for the bitfield compressor sorter.</div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a03f1642ac01ef3f580198223b92d9cd4"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a03f1642ac01ef3f580198223b92d9cd4">multi_table_t::n_sub_tables</a></div><div class="ttdeci">uint32_t n_sub_tables</div><div class="ttdoc">The number of individual subtables.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00075">compressor_sorter_structs.h:75</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a1098c00b19e53a646354531429069840"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a1098c00b19e53a646354531429069840">comms_sdram_t::fake_heap_data</a></div><div class="ttdeci">heap_t * fake_heap_data</div><div class="ttdoc">initialise value for malloc_extras (Same for all compressors)</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00129">compressor_sorter_structs.h:129</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a225b90b549bc339e36c01da347a0ef3c"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a225b90b549bc339e36c01da347a0ef3c">region_addresses_t::comms_sdram</a></div><div class="ttdeci">comms_sdram_t * comms_sdram</div><div class="ttdoc">Pointer to the area malloced to hold the comms_sdram.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00147">compressor_sorter_structs.h:147</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a27edc56ca90e5e5fff6eee12c9ffadc2"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a27edc56ca90e5e5fff6eee12c9ffadc2">bitfield_proc_t::processor</a></div><div class="ttdeci">int processor</div><div class="ttdoc">The core associated with the bitfield.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00137">compressor_sorter_structs.h:137</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a46a7223253ff3d5d43ad0a71058b4795"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a46a7223253ff3d5d43ad0a71058b4795">multi_table_t::n_entries</a></div><div class="ttdeci">int n_entries</div><div class="ttdoc">The number of entry_t entries actually in the tables.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00079">compressor_sorter_structs.h:79</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a4721bc2b310522a29d013ea16eace549"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a4721bc2b310522a29d013ea16eace549">compressor_processors_top_t::n_processors</a></div><div class="ttdeci">uint32_t n_processors</div><div class="ttdoc">The number of processor_id(s) in the list.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00087">compressor_sorter_structs.h:87</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a51efd0e36bf8f32e7fae4670b84dff91"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a51efd0e36bf8f32e7fae4670b84dff91">comms_sdram_t::routing_tables</a></div><div class="ttdeci">multi_table_t * routing_tables</div><div class="ttdoc">Pointer to the uncompressed tables metadata.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00125">compressor_sorter_structs.h:125</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a69f0516a2f97f34460eea02de697034e"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a69f0516a2f97f34460eea02de697034e">comms_sdram_t::uncompressed_router_table</a></div><div class="ttdeci">table_t * uncompressed_router_table</div><div class="ttdoc">Pointer to the shared version of the uncompressed routing table.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00123">compressor_sorter_structs.h:123</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a6adeafbfed85221d82b0340a70e9f1d0"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a6adeafbfed85221d82b0340a70e9f1d0">sorted_bit_fields_t::bit_fields</a></div><div class="ttdeci">filter_info_t ** bit_fields</div><div class="ttdoc">the list of bitfields in sorted order based off best effect.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00109">compressor_sorter_structs.h:109</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a70755b2138b556e54db6c862767af5a0"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a70755b2138b556e54db6c862767af5a0">comms_sdram_t::mid_point</a></div><div class="ttdeci">int mid_point</div><div class="ttdoc">how many bit fields were used to make those tables</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00121">compressor_sorter_structs.h:121</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a8082501788d19b0833dc0d130c0bd796"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a8082501788d19b0833dc0d130c0bd796">uncompressed_table_region_data_t::uncompressed_table</a></div><div class="ttdeci">table_t uncompressed_table</div><div class="ttdoc">table struct</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00097">compressor_sorter_structs.h:97</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a82af5714aab971cccd2493b7c6a4c5df"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a82af5714aab971cccd2493b7c6a4c5df">region_addresses_t::retry_count</a></div><div class="ttdeci">uint32_t retry_count</div><div class="ttdoc">Number of times that the sorters should set of the compressions again.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00145">compressor_sorter_structs.h:145</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a83219002046c2cb82a5ed5d03d0c9901"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a83219002046c2cb82a5ed5d03d0c9901">region_addresses_t::processors</a></div><div class="ttdeci">bitfield_proc_t processors[]</div><div class="ttdoc">The data for the processors.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00151">compressor_sorter_structs.h:151</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a87955dbae6fb7763d3a90f8e7d66f07f"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a87955dbae6fb7763d3a90f8e7d66f07f">comms_sdram_t::sorted_bit_fields</a></div><div class="ttdeci">sorted_bit_fields_t * sorted_bit_fields</div><div class="ttdoc">Pointer to the whole sorted_bit_fields data.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00127">compressor_sorter_structs.h:127</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a8b5a77623d60efcd7cb45ce654f0cb9d"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a8b5a77623d60efcd7cb45ce654f0cb9d">sorted_bit_fields_t::n_bit_fields</a></div><div class="ttdeci">int n_bit_fields</div><div class="ttdoc">length of the arrays</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00105">compressor_sorter_structs.h:105</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a9abf6c1ac9c19615539601f10f760a28"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a9abf6c1ac9c19615539601f10f760a28">uncompressed_table_region_data_t::app_id</a></div><div class="ttdeci">uint32_t app_id</div><div class="ttdoc">the application ID</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00095">compressor_sorter_structs.h:95</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_a9c8f01d4cc8cfc2b4377fe14f39e13ff"><div class="ttname"><a href="compressor__sorter__structs_8h.html#a9c8f01d4cc8cfc2b4377fe14f39e13ff">comms_sdram_t::compressor_state</a></div><div class="ttdeci">compressor_states compressor_state</div><div class="ttdoc">The state the compressor is in.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00117">compressor_sorter_structs.h:117</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_aa3e340fc51f415aead32fee83ef70de3a179a40541f7c969c4effd946f5fd72b9"><div class="ttname"><a href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a179a40541f7c969c4effd946f5fd72b9">FORCE_TO_STOP</a></div><div class="ttdeci">@ FORCE_TO_STOP</div><div class="ttdoc">Flag to say processor should stop as result no longer needed.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00065">compressor_sorter_structs.h:64</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_aa3e340fc51f415aead32fee83ef70de3a2564c1b7bc6ea4d4c778ec3e1d70826e"><div class="ttname"><a href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2564c1b7bc6ea4d4c778ec3e1d70826e">TO_BE_PREPARED</a></div><div class="ttdeci">@ TO_BE_PREPARED</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00058">compressor_sorter_structs.h:58</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee"><div class="ttname"><a href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a2a23715bd09dbb75914453ec3ba4ccee">PREPARE</a></div><div class="ttdeci">@ PREPARE</div><div class="ttdoc">Flag to ask compressor to setup and clear any previous result.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00060">compressor_sorter_structs.h:60</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_aa3e340fc51f415aead32fee83ef70de3a3373d705e500da21f936be7ec6b57802"><div class="ttname"><a href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a3373d705e500da21f936be7ec6b57802">DO_NOT_USE</a></div><div class="ttdeci">@ DO_NOT_USE</div><div class="ttdoc">Flag for saying compression processor will not be used any more.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00055">compressor_sorter_structs.h:55</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_aa3e340fc51f415aead32fee83ef70de3a439c688a4e9ed31638d5922a50680a8e"><div class="ttname"><a href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a439c688a4e9ed31638d5922a50680a8e">RUN</a></div><div class="ttdeci">@ RUN</div><div class="ttdoc">Flag to say processor shoukd run.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00062">compressor_sorter_structs.h:62</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_aa3e340fc51f415aead32fee83ef70de3a61f110d0003851c81fc0d250f8d32e00"><div class="ttname"><a href="compressor__sorter__structs_8h.html#aa3e340fc51f415aead32fee83ef70de3a61f110d0003851c81fc0d250f8d32e00">NOT_COMPRESSOR</a></div><div class="ttdeci">@ NOT_COMPRESSOR</div><div class="ttdoc">Flag for saying processor is not a compressor.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00053">compressor_sorter_structs.h:53</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_aaca19377972d2042c5cfd18a011eea1f"><div class="ttname"><a href="compressor__sorter__structs_8h.html#aaca19377972d2042c5cfd18a011eea1f">multi_table_t::sub_tables</a></div><div class="ttdeci">table_t ** sub_tables</div><div class="ttdoc">The individual subtables.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00073">compressor_sorter_structs.h:73</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac124d280cf92fb450e1e72a58b88253f"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253f">compressor_states</a></div><div class="ttdeci">compressor_states</div><div class="ttdoc">the acceptable finish states</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00030">compressor_sorter_structs.h:30</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac124d280cf92fb450e1e72a58b88253fa488d46012070df0693507cde3473cb37"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa488d46012070df0693507cde3473cb37">UNUSED_CORE</a></div><div class="ttdeci">@ UNUSED_CORE</div><div class="ttdoc">Flag to say this core has never been used or prepared.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00032">compressor_sorter_structs.h:32</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac124d280cf92fb450e1e72a58b88253fa4d8a6f033344df4f3b8fa419b8db0edb"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa4d8a6f033344df4f3b8fa419b8db0edb">FAILED_MALLOC</a></div><div class="ttdeci">@ FAILED_MALLOC</div><div class="ttdoc">Flag to say the last compression run ended due to a malloc failure.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00038">compressor_sorter_structs.h:38</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac124d280cf92fb450e1e72a58b88253fa5ea53c4d2b4459dae1e1910851e5b458"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa5ea53c4d2b4459dae1e1910851e5b458">COMPRESSING</a></div><div class="ttdeci">@ COMPRESSING</div><div class="ttdoc">Flag to say compressor is acticvely compressing.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00036">compressor_sorter_structs.h:36</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac124d280cf92fb450e1e72a58b88253fa7b909bad27a8bc8dd8c6d464ac3a1478"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa7b909bad27a8bc8dd8c6d464ac3a1478">SUCCESSFUL_COMPRESSION</a></div><div class="ttdeci">@ SUCCESSFUL_COMPRESSION</div><div class="ttdoc">Flag to say previous run was successful.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00043">compressor_sorter_structs.h:43</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac124d280cf92fb450e1e72a58b88253fa7c1602ccad57389b8999601cd8025a95"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253fa7c1602ccad57389b8999601cd8025a95">FAILED_TO_COMPRESS</a></div><div class="ttdeci">@ FAILED_TO_COMPRESS</div><div class="ttdoc">Flag to say previous run finished but without a small enough table.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00045">compressor_sorter_structs.h:45</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac124d280cf92fb450e1e72a58b88253faacc8682efbd3957ac911dbb6fe2459b0"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253faacc8682efbd3957ac911dbb6fe2459b0">RAN_OUT_OF_TIME</a></div><div class="ttdeci">@ RAN_OUT_OF_TIME</div><div class="ttdoc">Flag to say previous run was aborted as it ran out of time.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00048">compressor_sorter_structs.h:47</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac124d280cf92fb450e1e72a58b88253faca587e6ced264bc7afe62847cffb45ab"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253faca587e6ced264bc7afe62847cffb45ab">PREPARED</a></div><div class="ttdeci">@ PREPARED</div><div class="ttdoc">Flag to say compressor is ready to run. This clears previous results.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00034">compressor_sorter_structs.h:34</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac124d280cf92fb450e1e72a58b88253facd1b57bf58f3e2dc4ef7ddf051739cf8"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac124d280cf92fb450e1e72a58b88253facd1b57bf58f3e2dc4ef7ddf051739cf8">FORCED_BY_COMPRESSOR_CONTROL</a></div><div class="ttdeci">@ FORCED_BY_COMPRESSOR_CONTROL</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00041">compressor_sorter_structs.h:41</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_ac140cc5f3be0d158436780d491616058"><div class="ttname"><a href="compressor__sorter__structs_8h.html#ac140cc5f3be0d158436780d491616058">bitfield_proc_t::filter</a></div><div class="ttdeci">filter_region_t * filter</div><div class="ttdoc">The bitfield wrapper.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00135">compressor_sorter_structs.h:135</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_adbf7cfb3fc725eadae6decaedd0f97e6"><div class="ttname"><a href="compressor__sorter__structs_8h.html#adbf7cfb3fc725eadae6decaedd0f97e6">region_addresses_t::threshold</a></div><div class="ttdeci">uint32_t threshold</div><div class="ttdoc">Minimum percentage of bitfields to be merge in (currently ignored)</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00143">compressor_sorter_structs.h:143</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_af4b5f57fe7834c14c9d6c5e3e4ecadca"><div class="ttname"><a href="compressor__sorter__structs_8h.html#af4b5f57fe7834c14c9d6c5e3e4ecadca">comms_sdram_t::sorter_instruction</a></div><div class="ttdeci">instructions_to_compressor sorter_instruction</div><div class="ttdoc">The last instruction passed from the sorter to the compressor.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00119">compressor_sorter_structs.h:119</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_af7e0d710a4c4d67be7c0f2578e97ff3f"><div class="ttname"><a href="compressor__sorter__structs_8h.html#af7e0d710a4c4d67be7c0f2578e97ff3f">region_addresses_t::n_processors</a></div><div class="ttdeci">int n_processors</div><div class="ttdoc">Number of processors in the list.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00149">compressor_sorter_structs.h:149</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_afa13939be549fe271504e4d2c411b070"><div class="ttname"><a href="compressor__sorter__structs_8h.html#afa13939be549fe271504e4d2c411b070">sorted_bit_fields_t::sort_order</a></div><div class="ttdeci">int * sort_order</div><div class="ttdoc">the sort order based on best contribution to reducing redundancy</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00111">compressor_sorter_structs.h:111</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_afdb80f23a54430e4c9eb5b51120e211a"><div class="ttname"><a href="compressor__sorter__structs_8h.html#afdb80f23a54430e4c9eb5b51120e211a">sorted_bit_fields_t::processor_ids</a></div><div class="ttdeci">int * processor_ids</div><div class="ttdoc">list of bitfield associated processor IDs.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00107">compressor_sorter_structs.h:107</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_afe45e56c21a93f28de52ca9b72ac35d8"><div class="ttname"><a href="compressor__sorter__structs_8h.html#afe45e56c21a93f28de52ca9b72ac35d8">compressor_processors_top_t::processor_id</a></div><div class="ttdeci">uint32_t processor_id[]</div><div class="ttdoc">List of the ids of processors that can be used as compressors.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00089">compressor_sorter_structs.h:89</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_structcomms__sdram__t"><div class="ttname"><a href="compressor__sorter__structs_8h.html#structcomms__sdram__t">comms_sdram_t</a></div><div class="ttdoc">SDRAM area to communicate between sorter and compressor.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00115">compressor_sorter_structs.h:115</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_structcompressor__processors__top__t"><div class="ttname"><a href="compressor__sorter__structs_8h.html#structcompressor__processors__top__t">compressor_processors_top_t</a></div><div class="ttdoc">the list of cores that can be used as compressor processor</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00085">compressor_sorter_structs.h:85</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_structmulti__table__t"><div class="ttname"><a href="compressor__sorter__structs_8h.html#structmulti__table__t">multi_table_t</a></div><div class="ttdoc">Holds the data to initialise routing_table.h.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00071">compressor_sorter_structs.h:71</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_structregion__addresses__t"><div class="ttname"><a href="compressor__sorter__structs_8h.html#structregion__addresses__t">region_addresses_t</a></div><div class="ttdoc">top-level structure in the addresses area</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00141">compressor_sorter_structs.h:141</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_structsorted__bit__fields__t"><div class="ttname"><a href="compressor__sorter__structs_8h.html#structsorted__bit__fields__t">sorted_bit_fields_t</a></div><div class="ttdoc">Holds the list of bitfield associated processor IDs.</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00103">compressor_sorter_structs.h:103</a></div></div>
<div class="ttc" id="acompressor__sorter__structs_8h_html_structuncompressed__table__region__data__t"><div class="ttname"><a href="compressor__sorter__structs_8h.html#structuncompressed__table__region__data__t">uncompressed_table_region_data_t</a></div><div class="ttdoc">uncompressed routing table region</div><div class="ttdef"><b>Definition:</b> <a href="compressor__sorter__structs_8h_source.html#l00093">compressor_sorter_structs.h:93</a></div></div>
<div class="ttc" id="aconstants_8h_html"><div class="ttname"><a href="constants_8h.html">constants.h</a></div><div class="ttdoc">General constants.</div></div>
<div class="ttc" id="aconstants_8h_html_a01afb482fee16ed0bb6551bf1036320e"><div class="ttname"><a href="constants_8h.html#a01afb482fee16ed0bb6551bf1036320e">FAILED_TO_FIND</a></div><div class="ttdeci">#define FAILED_TO_FIND</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00047">constants.h:47</a></div></div>
<div class="ttc" id="aconstants_8h_html_a06a361793cd452d8bf77be63631b1b2b"><div class="ttname"><a href="constants_8h.html#a06a361793cd452d8bf77be63631b1b2b">NO_BIT_FIELDS</a></div><div class="ttdeci">#define NO_BIT_FIELDS</div><div class="ttdoc">number of bitfields that no bitfields run needs</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00059">constants.h:59</a></div></div>
<div class="ttc" id="aconstants_8h_html_aee0039d5201837dd96d203f298beed72"><div class="ttname"><a href="constants_8h.html#aee0039d5201837dd96d203f298beed72">MAX_PROCESSORS</a></div><div class="ttdeci">#define MAX_PROCESSORS</div><div class="ttdoc">max number of processors on chip used for app purposes</div><div class="ttdef"><b>Definition:</b> <a href="constants_8h_source.html#l00025">constants.h:25</a></div></div>
<div class="ttc" id="adata__specification_8h_html"><div class="ttname"><a href="data__specification_8h.html">data_specification.h</a></div><div class="ttdoc">Data Specification region access API.</div></div>
<div class="ttc" id="adata__specification_8h_html_structdata__specification__metadata__t"><div class="ttname"><a href="data__specification_8h.html#structdata__specification__metadata__t">data_specification_metadata_t</a></div><div class="ttdoc">The central structure that the DSE writes.</div><div class="ttdef"><b>Definition:</b> <a href="data__specification_8h_source.html#l00044">data_specification.h:44</a></div></div>
<div class="ttc" id="adebug_8h_html"><div class="ttname"><a href="debug_8h.html">debug.h</a></div><div class="ttdoc">SpiNNaker debug header file.</div></div>
<div class="ttc" id="adebug_8h_html_a0327644dae0a0a5d4bdc8f7b6f54e31e"><div class="ttname"><a href="debug_8h.html#a0327644dae0a0a5d4bdc8f7b6f54e31e">log_error</a></div><div class="ttdeci">void log_error(const char *message,...)</div><div class="ttdoc">This function logs errors. Errors usually indicate a serious fault in the program,...</div></div>
<div class="ttc" id="adebug_8h_html_a06b347c50387b36e0ff903e76be1c1d4"><div class="ttname"><a href="debug_8h.html#a06b347c50387b36e0ff903e76be1c1d4">log_warning</a></div><div class="ttdeci">void log_warning(const char *message,...)</div><div class="ttdoc">This function logs warnings.</div></div>
<div class="ttc" id="adebug_8h_html_a9845e8157cc395cb8f3ed1761048e4f3"><div class="ttname"><a href="debug_8h.html#a9845e8157cc395cb8f3ed1761048e4f3">log_debug</a></div><div class="ttdeci">void log_debug(const char *message,...)</div><div class="ttdoc">This function logs debugging messages. This level of message is normally not printed except when the ...</div></div>
<div class="ttc" id="adebug_8h_html_af4431e39155e80c53e1f9aab22d5a0ef"><div class="ttname"><a href="debug_8h.html#af4431e39155e80c53e1f9aab22d5a0ef">log_info</a></div><div class="ttdeci">void log_info(const char *message,...)</div><div class="ttdoc">This function logs informational messages. This is the lowest level of message normally printed.</div></div>
<div class="ttc" id="afilter__info_8h_html_a1a484e14dd6870e23e8f838d72c0b388"><div class="ttname"><a href="filter__info_8h.html#a1a484e14dd6870e23e8f838d72c0b388">filter_info_t::merged</a></div><div class="ttdeci">uint32_t merged</div><div class="ttdoc">Flag to indicate if the filter has been merged.</div><div class="ttdef"><b>Definition:</b> <a href="filter__info_8h_source.html#l00030">filter_info.h:30</a></div></div>
<div class="ttc" id="afilter__info_8h_html_ae4e76f28cca7de5a1e56c9d7a7dd6a85"><div class="ttname"><a href="filter__info_8h.html#ae4e76f28cca7de5a1e56c9d7a7dd6a85">filter_info_t::key</a></div><div class="ttdeci">uint32_t key</div><div class="ttdoc">Bit field master population key.</div><div class="ttdef"><b>Definition:</b> <a href="filter__info_8h_source.html#l00028">filter_info.h:28</a></div></div>
<div class="ttc" id="afilter__info_8h_html_structfilter__info__t"><div class="ttname"><a href="filter__info_8h.html#structfilter__info__t">filter_info_t</a></div><div class="ttdoc">Describes a single filter, which is a wrapper for bit_field_t.</div><div class="ttdef"><b>Definition:</b> <a href="filter__info_8h_source.html#l00026">filter_info.h:26</a></div></div>
<div class="ttc" id="afilter__info_8h_html_structfilter__region__t"><div class="ttname"><a href="filter__info_8h.html#structfilter__region__t">filter_region_t</a></div><div class="ttdoc">The contents of the bitfield region in SDRAM.</div><div class="ttdef"><b>Definition:</b> <a href="filter__info_8h_source.html#l00044">filter_info.h:44</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html"><div class="ttname"><a href="malloc__extras_8h.html">malloc_extras.h</a></div><div class="ttdoc">Support for adding debugging information to dynamic allocation.</div></div>
<div class="ttc" id="amalloc__extras_8h_html_a1bc937477e0ff1a0d8f6322d4388508b"><div class="ttname"><a href="malloc__extras_8h.html#a1bc937477e0ff1a0d8f6322d4388508b">malloc_extras_initialise_and_build_fake_heap</a></div><div class="ttdeci">bool malloc_extras_initialise_and_build_fake_heap(available_sdram_blocks *sizes_region)</div><div class="ttdoc">Builds a new heap based off stolen sdram blocks from cores synaptic matrices.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8c_source.html#l00387">malloc_extras.c:387</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_a3e218828af7ddd3f4cd0d3772562b520"><div class="ttname"><a href="malloc__extras_8h.html#a3e218828af7ddd3f4cd0d3772562b520">MALLOC</a></div><div class="ttdeci">#define MALLOC</div><div class="ttdoc">An easily-insertable name for the memory allocator.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8h_source.html#l00145">malloc_extras.h:145</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_a4cbf58bc77fc32df9066c3139c128572a012df54a47467268a8bb9acb9d9a2473"><div class="ttname"><a href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572a012df54a47467268a8bb9acb9d9a2473">EXITED_CLEANLY</a></div><div class="ttdeci">@ EXITED_CLEANLY</div><div class="ttdoc">Everything is fine.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8h_source.html#l00029">malloc_extras.h:29</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_a4cbf58bc77fc32df9066c3139c128572aa79a9cd74d0a705ad96bd17b5181c56b"><div class="ttname"><a href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572aa79a9cd74d0a705ad96bd17b5181c56b">EXIT_FAIL</a></div><div class="ttdeci">@ EXIT_FAIL</div><div class="ttdoc">We went wrong but we dont want to RTE.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8h_source.html#l00031">malloc_extras.h:31</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_a4cbf58bc77fc32df9066c3139c128572ace6a5af7573c1cc48533acf408307ad3"><div class="ttname"><a href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572ace6a5af7573c1cc48533acf408307ad3">EXIT_MALLOC</a></div><div class="ttdeci">@ EXIT_MALLOC</div><div class="ttdoc">We ran out of space and we want to RTE.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8h_source.html#l00033">malloc_extras.h:33</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_a4cbf58bc77fc32df9066c3139c128572adf50834e361027bbbe08aad6ebd36d19"><div class="ttname"><a href="malloc__extras_8h.html#a4cbf58bc77fc32df9066c3139c128572adf50834e361027bbbe08aad6ebd36d19">EXIT_SWERR</a></div><div class="ttdeci">@ EXIT_SWERR</div><div class="ttdoc">We hit an internal error and we want to RTE.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8h_source.html#l00035">malloc_extras.h:35</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_a52d8f9cf4967316758b7148966fffeef"><div class="ttname"><a href="malloc__extras_8h.html#a52d8f9cf4967316758b7148966fffeef">MALLOC_SDRAM</a></div><div class="ttdeci">#define MALLOC_SDRAM</div><div class="ttdoc">An easily-insertable name for the memory allocator that uses the large pool.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8h_source.html#l00151">malloc_extras.h:151</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_a61b28e08827e6631200d756a30403064"><div class="ttname"><a href="malloc__extras_8h.html#a61b28e08827e6631200d756a30403064">malloc_extras_turn_off_safety</a></div><div class="ttdeci">void malloc_extras_turn_off_safety(void)</div><div class="ttdoc">Turn off safety code if wanted.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8c_source.html#l00063">malloc_extras.c:63</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_a6e49867f1ee0742dd71e2666bd23f14b"><div class="ttname"><a href="malloc__extras_8h.html#a6e49867f1ee0742dd71e2666bd23f14b">malloc_extras_terminate</a></div><div class="ttdeci">void malloc_extras_terminate(uint result_code)</div><div class="ttdoc">Stops execution with a result code.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8c_source.html#l00082">malloc_extras.c:82</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_a9a8e700d56e7d858108b755ad3edb52e"><div class="ttname"><a href="malloc__extras_8h.html#a9a8e700d56e7d858108b755ad3edb52e">FREE</a></div><div class="ttdeci">#define FREE</div><div class="ttdoc">An easily-insertable name for the memory free.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8h_source.html#l00147">malloc_extras.h:147</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_ac4c30ebfaf350f93b16fc2d02c82c674"><div class="ttname"><a href="malloc__extras_8h.html#ac4c30ebfaf350f93b16fc2d02c82c674">malloc_extras_get_stolen_heap</a></div><div class="ttdeci">heap_t * malloc_extras_get_stolen_heap(void)</div><div class="ttdoc">Get the pointer to the stolen heap.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8c_source.html#l00075">malloc_extras.c:75</a></div></div>
<div class="ttc" id="amalloc__extras_8h_html_structavailable__sdram__blocks"><div class="ttname"><a href="malloc__extras_8h.html#structavailable__sdram__blocks">available_sdram_blocks</a></div><div class="ttdoc">Holds host-allocated SDRAM blocks outside the heap.</div><div class="ttdef"><b>Definition:</b> <a href="malloc__extras_8h_source.html#l00049">malloc_extras.h:49</a></div></div>
<div class="ttc" id="arouting__table_8h_html"><div class="ttname"><a href="routing__table_8h.html">routing_table.h</a></div><div class="ttdoc">Utilities for a single routing table.</div></div>
<div class="ttc" id="arouting__table_8h_html_a225a585fd5012060cc494b0b0ea636cc"><div class="ttname"><a href="routing__table_8h.html#a225a585fd5012060cc494b0b0ea636cc">entry_t::key_mask</a></div><div class="ttdeci">key_mask_t key_mask</div><div class="ttdoc">Key and mask.</div><div class="ttdef"><b>Definition:</b> <a href="routing__table_8h_source.html#l00036">routing_table.h:36</a></div></div>
<div class="ttc" id="arouting__table_8h_html_a30a1c9a534c37968116826cf7f1e5bab"><div class="ttname"><a href="routing__table_8h.html#a30a1c9a534c37968116826cf7f1e5bab">key_mask_t::mask</a></div><div class="ttdeci">uint32_t mask</div><div class="ttdoc">Mask for the key_mask.</div><div class="ttdef"><b>Definition:</b> <a href="routing__table_8h_source.html#l00030">routing_table.h:30</a></div></div>
<div class="ttc" id="arouting__table_8h_html_a78c84fd4064e0f3cf4b77a1874209e60"><div class="ttname"><a href="routing__table_8h.html#a78c84fd4064e0f3cf4b77a1874209e60">table_t::entries</a></div><div class="ttdeci">entry_t entries[]</div><div class="ttdoc">Entries in the table.</div><div class="ttdef"><b>Definition:</b> <a href="routing__table_8h_source.html#l00051">routing_table.h:51</a></div></div>
<div class="ttc" id="arouting__table_8h_html_a78df0d6fd3348442567f7ab8b834101b"><div class="ttname"><a href="routing__table_8h.html#a78df0d6fd3348442567f7ab8b834101b">table_t::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdoc">Number of entries in the table.</div><div class="ttdef"><b>Definition:</b> <a href="routing__table_8h_source.html#l00048">routing_table.h:48</a></div></div>
<div class="ttc" id="arouting__table_8h_html_aae50acecb462e9fcb4e13bbe5cf27ac7"><div class="ttname"><a href="routing__table_8h.html#aae50acecb462e9fcb4e13bbe5cf27ac7">entry_t::route</a></div><div class="ttdeci">uint32_t route</div><div class="ttdoc">Routing direction.</div><div class="ttdef"><b>Definition:</b> <a href="routing__table_8h_source.html#l00039">routing_table.h:39</a></div></div>
<div class="ttc" id="arouting__table_8h_html_adf30ccd47145700406a26a3aeb2bf12d"><div class="ttname"><a href="routing__table_8h.html#adf30ccd47145700406a26a3aeb2bf12d">key_mask_t::key</a></div><div class="ttdeci">uint32_t key</div><div class="ttdoc">Key for the key_mask.</div><div class="ttdef"><b>Definition:</b> <a href="routing__table_8h_source.html#l00027">routing_table.h:27</a></div></div>
<div class="ttc" id="arouting__table_8h_html_structentry__t"><div class="ttname"><a href="routing__table_8h.html#structentry__t">entry_t</a></div><div class="ttdoc">Holds data for a routing table entry.</div><div class="ttdef"><b>Definition:</b> <a href="routing__table_8h_source.html#l00034">routing_table.h:34</a></div></div>
<div class="ttc" id="arouting__table_8h_html_structtable__t"><div class="ttname"><a href="routing__table_8h.html#structtable__t">table_t</a></div><div class="ttdoc">Holds a routing table description.</div><div class="ttdef"><b>Definition:</b> <a href="routing__table_8h_source.html#l00046">routing_table.h:46</a></div></div>
<div class="ttc" id="arouting__tables__utils_8h_html"><div class="ttname"><a href="routing__tables__utils_8h.html">routing_tables_utils.h</a></div><div class="ttdoc">Compound routing table utilities.</div></div>
<div class="ttc" id="arouting__tables__utils_8h_html_a606c1fd7ae6334246c1d892cc8c93920"><div class="ttname"><a href="routing__tables__utils_8h.html#a606c1fd7ae6334246c1d892cc8c93920">routing_tables_utils_convert</a></div><div class="ttdeci">static table_t * routing_tables_utils_convert(multi_table_t *restrict tables)</div><div class="ttdoc">Converts the multitable to a single routing table and free the rest.</div><div class="ttdef"><b>Definition:</b> <a href="routing__tables__utils_8h_source.html#l00138">routing_tables_utils.h:138</a></div></div>
<div class="ttc" id="arouting__tables__utils_8h_html_a62a2cef63b709da2cff331bb140097d9"><div class="ttname"><a href="routing__tables__utils_8h.html#a62a2cef63b709da2cff331bb140097d9">routing_tables_utils_malloc</a></div><div class="ttdeci">static bool routing_tables_utils_malloc(multi_table_t *restrict tables, uint32_t max_entries)</div><div class="ttdoc">Prepares the Routing table to handle at least n_entries.</div><div class="ttdef"><b>Definition:</b> <a href="routing__tables__utils_8h_source.html#l00077">routing_tables_utils.h:77</a></div></div>
<div class="ttc" id="arouting__tables__utils_8h_html_ac2b87e9be8188bb776b0426d6ba7e1d0"><div class="ttname"><a href="routing__tables__utils_8h.html#ac2b87e9be8188bb776b0426d6ba7e1d0">routing_tables_utils_free_all</a></div><div class="ttdeci">static void routing_tables_utils_free_all(multi_table_t *restrict tables)</div><div class="ttdoc">Does all frees for the multi_table object.</div><div class="ttdef"><b>Definition:</b> <a href="routing__tables__utils_8h_source.html#l00063">routing_tables_utils.h:63</a></div></div>
<div class="ttc" id="asark_8h_html"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html">vcpu_t</a></div></div>
<div class="ttc" id="asark_8h_html_a06e96a522d4adf97fbb2549806f73cfb"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a06e96a522d4adf97fbb2549806f73cfb">SV_VCPU</a></div><div class="ttdeci">#define SV_VCPU</div></div>
<div class="ttc" id="asark_8h_html_a2d7bb03f41c2c68ad7fdb944bb23af64"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a2d7bb03f41c2c68ad7fdb944bb23af64">rtr_alloc_id</a></div><div class="ttdeci">uint rtr_alloc_id(uint size, uint app_id)</div></div>
<div class="ttc" id="asark_8h_html_a37318835424d76f3f5b321058887236da504ca9cb33bebc4ff8b20b3eb97facbd"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a37318835424d76f3f5b321058887236da504ca9cb33bebc4ff8b20b3eb97facbd">CPU_STATE_RUN</a></div><div class="ttdeci">CPU_STATE_RUN</div></div>
<div class="ttc" id="asark_8h_html_a37318835424d76f3f5b321058887236da5fdc95ad5a4ddcf32e79798c8b2c53b2"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a37318835424d76f3f5b321058887236da5fdc95ad5a4ddcf32e79798c8b2c53b2">CPU_STATE_DEAD</a></div><div class="ttdeci">CPU_STATE_DEAD</div></div>
<div class="ttc" id="asark_8h_html_a37318835424d76f3f5b321058887236dadcefe4af17b67dc5de698473127ea564"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a37318835424d76f3f5b321058887236dadcefe4af17b67dc5de698473127ea564">CPU_STATE_PAUSE</a></div><div class="ttdeci">CPU_STATE_PAUSE</div></div>
<div class="ttc" id="asark_8h_html_a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a3cf9347d757f8d978aa2d35927e21806a66bc0d0be1de9f6afc1787e49ffae339">RTE_SWERR</a></div><div class="ttdeci">RTE_SWERR</div></div>
<div class="ttc" id="asark_8h_html_a7f5f3be8c06b875eff1b6e7501ca8446a18a6fa8889d7501469a972a54da8943c"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a7f5f3be8c06b875eff1b6e7501ca8446a18a6fa8889d7501469a972a54da8943c">SYNC_WAIT</a></div><div class="ttdeci">SYNC_WAIT</div></div>
<div class="ttc" id="asark_8h_html_a81ca61e30076d1724a68027b63f6e970"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a81ca61e30076d1724a68027b63f6e970">rtr_mc_set</a></div><div class="ttdeci">uint rtr_mc_set(uint entry, uint key, uint mask, uint route)</div></div>
<div class="ttc" id="asark_8h_html_a82d770674ea0379ef44f28797b382647"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#a82d770674ea0379ef44f28797b382647">vcpu_t::user2</a></div><div class="ttdeci">uint user2</div></div>
<div class="ttc" id="asark_8h_html_abe2018e60bb35fb629cdbb057368a2f4"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/sark_8h.html#abe2018e60bb35fb629cdbb057368a2f4">rt_error</a></div><div class="ttdeci">void rt_error(uint code,...)</div></div>
<div class="ttc" id="aspin1__api_8h_html"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html">spin1_api.h</a></div></div>
<div class="ttc" id="aspin1__api_8h_html_a06fc87d81c62e9abb8790b6e5713c55bad1110959cd9312a756c5fb1d0f0eab8d"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a06fc87d81c62e9abb8790b6e5713c55bad1110959cd9312a756c5fb1d0f0eab8d">TIMER_TICK</a></div><div class="ttdeci">TIMER_TICK</div></div>
<div class="ttc" id="aspin1__api_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div></div>
<div class="ttc" id="aspin1__api_8h_html_a653c1de1c4181f03c7ba4dbba38df9c7"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#a653c1de1c4181f03c7ba4dbba38df9c7">spin1_schedule_callback</a></div><div class="ttdeci">uint spin1_schedule_callback(callback_t cback, uint arg0, uint arg1, uint priority)</div></div>
<div class="ttc" id="aspin1__api_8h_html_acc208cdfe1d4eb5caa298a8a5b4db50c"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#acc208cdfe1d4eb5caa298a8a5b4db50c">spin1_get_core_id</a></div><div class="ttdeci">uint spin1_get_core_id(void)</div></div>
<div class="ttc" id="aspin1__api_8h_html_ad49e25c0f0359f6826d8addcebf1e05c"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#ad49e25c0f0359f6826d8addcebf1e05c">spin1_start</a></div><div class="ttdeci">uint spin1_start(sync_bool sync)</div></div>
<div class="ttc" id="aspin1__api_8h_html_afc98f97be297e7077334cad216d32b57"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html#afc98f97be297e7077334cad216d32b57">spin1_callback_on</a></div><div class="ttdeci">void spin1_callback_on(uint event_id, callback_t cback, int priority)</div></div>
<div class="ttc" id="aspinnaker_8h_html_a65f85814a8290f9797005d3b28e7e5fc"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a></div><div class="ttdeci">unsigned char uchar</div></div>
<div class="ttc" id="aspinnaker_8h_html_a91ad9478d81a7aaf2593e8d9c3d06a14"><div class="ttname"><a href="https://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a></div><div class="ttdeci">unsigned int uint</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
