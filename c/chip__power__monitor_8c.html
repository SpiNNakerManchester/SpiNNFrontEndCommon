<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SpiNNFrontEndCommon: models/chip_power_monitor/src/chip_power_monitor.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SpiNNFrontEndCommon
   &#160;<span id="projectnumber">5.1.1</span>
   </div>
   <div id="projectbrief">Common support code for user-facing front end systems.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_1ae4179d5e953611aae20c997279e02c.html">models</a></li><li class="navelem"><a class="el" href="dir_67d4ae61ec621ca5da458468efda0aa4.html">chip_power_monitor</a></li><li class="navelem"><a class="el" href="dir_7a0b0d535ffa72e77ffabb6c29c07a82.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">chip_power_monitor.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The implementation of the Chip Power Monitor.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spin1__api_8h.html">spin1_api.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="spinn__extra_8h_source.html">spinn_extra.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="simulation_8h_source.html">simulation.h</a>&gt;</code><br />
<code>#include &lt;<a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html">spinnaker.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="recording_8h_source.html">recording.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="debug_8h_source.html">debug.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="data__specification_8h_source.html">data_specification.h</a>&gt;</code><br />
</div>
<p><a href="chip__power__monitor_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structsample__params"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#structsample__params">sample_params</a></td></tr>
<tr class="memdesc:structsample__params"><td class="mdescLeft">&#160;</td><td class="mdescRight">Describes the format of the configuration region.  <a href="chip__power__monitor_8c.html#structsample__params">More...</a><br /></td></tr>
<tr class="separator:structsample__params"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a74de69e4e2f14ada863f47e7f6656404"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#a74de69e4e2f14ada863f47e7f6656404">NUM_RANDOM_BITS</a>&#160;&#160;&#160;12</td></tr>
<tr class="separator:a74de69e4e2f14ada863f47e7f6656404"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a726ca809ffd3d67ab4b8476646f26635"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="chip__power__monitor_8c.html#a726ca809ffd3d67ab4b8476646f26635a57cc238145ec1361c72c327674c0d754">SYSTEM</a> = 0
, <a class="el" href="chip__power__monitor_8c.html#a726ca809ffd3d67ab4b8476646f26635a702582f7f825ca83bdb076b15b4c0fc2">CONFIG</a> = 1
, <a class="el" href="chip__power__monitor_8c.html#a726ca809ffd3d67ab4b8476646f26635a875fadf1437508cebb97bb5c3445cbdc">RECORDING</a> = 2
 }</td></tr>
<tr class="memdesc:a726ca809ffd3d67ab4b8476646f26635"><td class="mdescLeft">&#160;</td><td class="mdescRight">The IDs of each DSG region used.  <a href="chip__power__monitor_8c.html#a726ca809ffd3d67ab4b8476646f26635">More...</a><br /></td></tr>
<tr class="separator:a726ca809ffd3d67ab4b8476646f26635"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0411cd49bb5b71852cecd93bcbf0ca2d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="chip__power__monitor_8c.html#a0411cd49bb5b71852cecd93bcbf0ca2da17ba9bae1b8d7e8d6c12d46ec58e0769">TIMER</a> = 0
, <a class="el" href="chip__power__monitor_8c.html#a0411cd49bb5b71852cecd93bcbf0ca2dad645defae8408de2415f3dc417f69773">SDP</a> = 1
, <a class="el" href="chip__power__monitor_8c.html#a0411cd49bb5b71852cecd93bcbf0ca2da6537a62f6f155792bb9a320ee2ec4d68">DMA</a> = 2
 }</td></tr>
<tr class="memdesc:a0411cd49bb5b71852cecd93bcbf0ca2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">values for the priority for each callback  <a href="chip__power__monitor_8c.html#a0411cd49bb5b71852cecd93bcbf0ca2d">More...</a><br /></td></tr>
<tr class="separator:a0411cd49bb5b71852cecd93bcbf0ca2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a766cca800c4544225b024ca3f36932aa"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#a766cca800c4544225b024ca3f36932aa">get_sample</a> (void)</td></tr>
<tr class="memdesc:a766cca800c4544225b024ca3f36932aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read which cores on the chip are asleep right now.  <a href="chip__power__monitor_8c.html#a766cca800c4544225b024ca3f36932aa">More...</a><br /></td></tr>
<tr class="separator:a766cca800c4544225b024ca3f36932aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a1da13c908079b1273a3abca2e45b09"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#a2a1da13c908079b1273a3abca2e45b09">get_random_busy</a> (void)</td></tr>
<tr class="memdesc:a2a1da13c908079b1273a3abca2e45b09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes a random value used to break up chance periodicities in sampling.  <a href="chip__power__monitor_8c.html#a2a1da13c908079b1273a3abca2e45b09">More...</a><br /></td></tr>
<tr class="separator:a2a1da13c908079b1273a3abca2e45b09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad653c68526a047cf4fe73372b471e456"><td class="memItemLeft" align="right" valign="top"><a id="ad653c68526a047cf4fe73372b471e456"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#ad653c68526a047cf4fe73372b471e456">record_aggregate_sample</a> (void)</td></tr>
<tr class="memdesc:ad653c68526a047cf4fe73372b471e456"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronously records the current contents of the core_counters to the recording region. <br /></td></tr>
<tr class="separator:ad653c68526a047cf4fe73372b471e456"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55f1469122ed14dc99104dcceda648ba"><td class="memItemLeft" align="right" valign="top"><a id="a55f1469122ed14dc99104dcceda648ba"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#a55f1469122ed14dc99104dcceda648ba">reset_core_counters</a> (void)</td></tr>
<tr class="memdesc:a55f1469122ed14dc99104dcceda648ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the state of the core_counters and the sample_count variables to zero. <br /></td></tr>
<tr class="separator:a55f1469122ed14dc99104dcceda648ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb40f588131f69f1d033283921f1a811"><td class="memItemLeft" align="right" valign="top"><a id="afb40f588131f69f1d033283921f1a811"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#afb40f588131f69f1d033283921f1a811">resume_callback</a> (void)</td></tr>
<tr class="memdesc:afb40f588131f69f1d033283921f1a811"><td class="mdescLeft">&#160;</td><td class="mdescRight">The function to call when resuming a simulation. <br /></td></tr>
<tr class="separator:afb40f588131f69f1d033283921f1a811"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2489f1213913b87b4987a4004582513"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#ac2489f1213913b87b4987a4004582513">count_core_states</a> (void)</td></tr>
<tr class="memdesc:ac2489f1213913b87b4987a4004582513"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accumulate a count of how active each core on the current chip is. The counter for the core is incremented if the core is active.  <a href="chip__power__monitor_8c.html#ac2489f1213913b87b4987a4004582513">More...</a><br /></td></tr>
<tr class="separator:ac2489f1213913b87b4987a4004582513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0654afe09e3f4da82ba08eded260c07d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#a0654afe09e3f4da82ba08eded260c07d">sample_in_slot</a> (<a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused0, <a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> unused1)</td></tr>
<tr class="memdesc:a0654afe09e3f4da82ba08eded260c07d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to actually record a sample.  <a href="chip__power__monitor_8c.html#a0654afe09e3f4da82ba08eded260c07d">More...</a><br /></td></tr>
<tr class="separator:a0654afe09e3f4da82ba08eded260c07d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36c5c4a96b95d6ac1e48c8a0af1cf253"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#a36c5c4a96b95d6ac1e48c8a0af1cf253">read_parameters</a> (struct <a class="el" href="chip__power__monitor_8c.html#structsample__params">sample_params</a> *<a class="el" href="chip__power__monitor_8c.html#structsample__params">sample_params</a>)</td></tr>
<tr class="memdesc:a36c5c4a96b95d6ac1e48c8a0af1cf253"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the configuration of the application out of the configuration region.  <a href="chip__power__monitor_8c.html#a36c5c4a96b95d6ac1e48c8a0af1cf253">More...</a><br /></td></tr>
<tr class="separator:a36c5c4a96b95d6ac1e48c8a0af1cf253"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03a8e4045b51680cc94b4359837fa796"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#a03a8e4045b51680cc94b4359837fa796">initialize</a> (void)</td></tr>
<tr class="memdesc:a03a8e4045b51680cc94b4359837fa796"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the program.  <a href="chip__power__monitor_8c.html#a03a8e4045b51680cc94b4359837fa796">More...</a><br /></td></tr>
<tr class="separator:a03a8e4045b51680cc94b4359837fa796"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa14f4f1d4c84183b7bf7108bf930a23c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#aa14f4f1d4c84183b7bf7108bf930a23c">c_main</a> (void)</td></tr>
<tr class="memdesc:aa14f4f1d4c84183b7bf7108bf930a23c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The application entry point.  <a href="chip__power__monitor_8c.html#aa14f4f1d4c84183b7bf7108bf930a23c">More...</a><br /></td></tr>
<tr class="separator:aa14f4f1d4c84183b7bf7108bf930a23c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ac981a0e40fa249cb85edc8dfe1e70d6b"><td class="memItemLeft" align="right" valign="top">static const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#ac981a0e40fa249cb85edc8dfe1e70d6b">RECORDING_CHANNEL_ID</a> = 0</td></tr>
<tr class="memdesc:ac981a0e40fa249cb85edc8dfe1e70d6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The recording channel we use.  <a href="chip__power__monitor_8c.html#ac981a0e40fa249cb85edc8dfe1e70d6b">More...</a><br /></td></tr>
<tr class="separator:ac981a0e40fa249cb85edc8dfe1e70d6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2178bb4764f423b1534a9631b0cc6e5e"><td class="memItemLeft" align="right" valign="top"><a id="a2178bb4764f423b1534a9631b0cc6e5e"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#a2178bb4764f423b1534a9631b0cc6e5e">simulation_ticks</a> = 0</td></tr>
<tr class="memdesc:a2178bb4764f423b1534a9631b0cc6e5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main simulation tick. <br /></td></tr>
<tr class="separator:a2178bb4764f423b1534a9631b0cc6e5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ee6c18f2c55e2b60ea4194d4722f735"><td class="memItemLeft" align="right" valign="top"><a id="a9ee6c18f2c55e2b60ea4194d4722f735"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#a9ee6c18f2c55e2b60ea4194d4722f735">infinite_run</a> = 0</td></tr>
<tr class="memdesc:a9ee6c18f2c55e2b60ea4194d4722f735"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether we are running "forever". <br /></td></tr>
<tr class="separator:a9ee6c18f2c55e2b60ea4194d4722f735"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae73654f333e4363463ad8c594eca1905"><td class="memItemLeft" align="right" valign="top"><a id="ae73654f333e4363463ad8c594eca1905"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#ae73654f333e4363463ad8c594eca1905">time</a></td></tr>
<tr class="memdesc:ae73654f333e4363463ad8c594eca1905"><td class="mdescLeft">&#160;</td><td class="mdescRight">Our internal notion of time. <br /></td></tr>
<tr class="separator:ae73654f333e4363463ad8c594eca1905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d88807102c8d96e37cb4751f0d5a7d3"><td class="memItemLeft" align="right" valign="top"><a id="a0d88807102c8d96e37cb4751f0d5a7d3"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#a0d88807102c8d96e37cb4751f0d5a7d3">timer</a> = 0</td></tr>
<tr class="memdesc:a0d88807102c8d96e37cb4751f0d5a7d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main simulation time period. <br /></td></tr>
<tr class="separator:a0d88807102c8d96e37cb4751f0d5a7d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaca75ef938bfbe962dd43f506d5f86d1"><td class="memItemLeft" align="right" valign="top"><a id="aaca75ef938bfbe962dd43f506d5f86d1"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#aaca75ef938bfbe962dd43f506d5f86d1">core_counters</a> [<a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#aa061b51fb2d77d7721a3882edf5cd84a">NUM_CPUS</a>]</td></tr>
<tr class="memdesc:aaca75ef938bfbe962dd43f506d5f86d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Where we aggregate the sample activity counts. <br /></td></tr>
<tr class="separator:aaca75ef938bfbe962dd43f506d5f86d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1090838c106af7b7afaaec0ee969e174"><td class="memItemLeft" align="right" valign="top"><a id="a1090838c106af7b7afaaec0ee969e174"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#a1090838c106af7b7afaaec0ee969e174">sample_count</a></td></tr>
<tr class="memdesc:a1090838c106af7b7afaaec0ee969e174"><td class="mdescLeft">&#160;</td><td class="mdescRight">How many samples have we done so far within this aggregate step? <br /></td></tr>
<tr class="separator:a1090838c106af7b7afaaec0ee969e174"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e5b3869fb6e326076348d51cf99c860"><td class="memItemLeft" align="right" valign="top"><a id="a2e5b3869fb6e326076348d51cf99c860"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#a2e5b3869fb6e326076348d51cf99c860">sample_count_limit</a></td></tr>
<tr class="memdesc:a2e5b3869fb6e326076348d51cf99c860"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of samples to aggregate per recording entry. <br /></td></tr>
<tr class="separator:a2e5b3869fb6e326076348d51cf99c860"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a97f21dc7fccaac8071bcd29894bccb"><td class="memItemLeft" align="right" valign="top"><a id="a9a97f21dc7fccaac8071bcd29894bccb"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#a9a97f21dc7fccaac8071bcd29894bccb">recording_flags</a></td></tr>
<tr class="memdesc:a9a97f21dc7fccaac8071bcd29894bccb"><td class="mdescLeft">&#160;</td><td class="mdescRight">General recording flags. (Unused by this code.) <br /></td></tr>
<tr class="separator:a9a97f21dc7fccaac8071bcd29894bccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fc08148ff67bfbada9f7bc8eb34891e"><td class="memItemLeft" align="right" valign="top"><a id="a5fc08148ff67bfbada9f7bc8eb34891e"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="chip__power__monitor_8c.html#a5fc08148ff67bfbada9f7bc8eb34891e">sample_frequency</a></td></tr>
<tr class="memdesc:a5fc08148ff67bfbada9f7bc8eb34891e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The frequency with which we sample the execution state of all cores. <br /></td></tr>
<tr class="separator:a5fc08148ff67bfbada9f7bc8eb34891e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The implementation of the Chip Power Monitor. </p>
<p>The purpose of this application is to monitor the activity of the other CPU cores on the chip on which it runs. It does this using the SpiNNaker System Controller, enabling it to run with just the overhead due to using a core; it does <em>not</em> change the individual performance of the other cores on the chip. </p>

<p class="definition">Definition in file <a class="el" href="chip__power__monitor_8c_source.html">chip_power_monitor.c</a>.</p>
</div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structsample__params" id="structsample__params"></a>
<h2 class="memtitle"><span class="permalink"><a href="#structsample__params">&#9670;&nbsp;</a></span>sample_params</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct sample_params</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Describes the format of the configuration region. </p>

<p class="definition">Definition at line <a class="el" href="chip__power__monitor_8c_source.html#l00048">48</a> of file <a class="el" href="chip__power__monitor_8c_source.html">chip_power_monitor.c</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="a9bbe5a37fa3ee3e049d627ed389a35e7"></a>uint32_t</td>
<td class="fieldname">
count_limit</td>
<td class="fielddoc">
The number of samples to aggregate per recording entry. </td></tr>
<tr><td class="fieldtype">
<a id="ab058bda1443a66747f357cda4c8e7bce"></a>uint32_t</td>
<td class="fieldname">
frequency</td>
<td class="fielddoc">
The fundamental sampling frequency. </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a74de69e4e2f14ada863f47e7f6656404"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74de69e4e2f14ada863f47e7f6656404">&#9670;&nbsp;</a></span>NUM_RANDOM_BITS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUM_RANDOM_BITS&#160;&#160;&#160;12</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The number of bits of randomness used to break up sampling periodicity errors. </p>

<p class="definition">Definition at line <a class="el" href="chip__power__monitor_8c_source.html#l00038">38</a> of file <a class="el" href="chip__power__monitor_8c_source.html">chip_power_monitor.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a726ca809ffd3d67ab4b8476646f26635"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a726ca809ffd3d67ab4b8476646f26635">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The IDs of each DSG region used. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a726ca809ffd3d67ab4b8476646f26635a57cc238145ec1361c72c327674c0d754"></a>SYSTEM&#160;</td><td class="fielddoc"><p>The system data region ID. </p>
</td></tr>
<tr><td class="fieldname"><a id="a726ca809ffd3d67ab4b8476646f26635a702582f7f825ca83bdb076b15b4c0fc2"></a>CONFIG&#160;</td><td class="fielddoc"><p>The configuration region ID. </p>
</td></tr>
<tr><td class="fieldname"><a id="a726ca809ffd3d67ab4b8476646f26635a875fadf1437508cebb97bb5c3445cbdc"></a>RECORDING&#160;</td><td class="fielddoc"><p>The recorded data region ID. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="chip__power__monitor_8c_source.html#l00041">41</a> of file <a class="el" href="chip__power__monitor_8c_source.html">chip_power_monitor.c</a>.</p>

</div>
</div>
<a id="a0411cd49bb5b71852cecd93bcbf0ca2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0411cd49bb5b71852cecd93bcbf0ca2d">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>values for the priority for each callback </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a0411cd49bb5b71852cecd93bcbf0ca2da17ba9bae1b8d7e8d6c12d46ec58e0769"></a>TIMER&#160;</td><td class="fielddoc"><p>The timer callback is highest priority. </p>
</td></tr>
<tr><td class="fieldname"><a id="a0411cd49bb5b71852cecd93bcbf0ca2dad645defae8408de2415f3dc417f69773"></a>SDP&#160;</td><td class="fielddoc"><p>Responding to communications from host is next highest. </p>
</td></tr>
<tr><td class="fieldname"><a id="a0411cd49bb5b71852cecd93bcbf0ca2da6537a62f6f155792bb9a320ee2ec4d68"></a>DMA&#160;</td><td class="fielddoc"><p>DMA processing is lowest priority. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="chip__power__monitor_8c_source.html#l00061">61</a> of file <a class="el" href="chip__power__monitor_8c_source.html">chip_power_monitor.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a766cca800c4544225b024ca3f36932aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a766cca800c4544225b024ca3f36932aa">&#9670;&nbsp;</a></span>get_sample()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t get_sample </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read which cores on the chip are asleep right now. </p>
<dl class="section return"><dt>Returns</dt><dd>A word (with 18 relevant bits in the low bits of the word) where a bit is set when a core is asleep and waiting for events, and clear when the core is active.</dd></dl>
<p>Note that this accesses into the SpiNNaker System Controller hardware (see Data Sheet, section 14, register 25). </p>

<p class="definition">Definition at line <a class="el" href="chip__power__monitor_8c_source.html#l00094">94</a> of file <a class="el" href="chip__power__monitor_8c_source.html">chip_power_monitor.c</a>.</p>

</div>
</div>
<a id="a2a1da13c908079b1273a3abca2e45b09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a1da13c908079b1273a3abca2e45b09">&#9670;&nbsp;</a></span>get_random_busy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t get_random_busy </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Computes a random value used to break up chance periodicities in sampling. </p>
<p>In range 0 to 4095. </p><dl class="section return"><dt>Returns</dt><dd>The number of times a busy loop must run. </dd></dl>

<p class="definition">Definition at line <a class="el" href="chip__power__monitor_8c_source.html#l00102">102</a> of file <a class="el" href="chip__power__monitor_8c_source.html">chip_power_monitor.c</a>.</p>

</div>
</div>
<a id="ac2489f1213913b87b4987a4004582513"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2489f1213913b87b4987a4004582513">&#9670;&nbsp;</a></span>count_core_states()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void count_core_states </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Accumulate a count of how active each core on the current chip is. The counter for the core is incremented if the core is active. </p>
<p>Uses <a class="el" href="chip__power__monitor_8c.html#a766cca800c4544225b024ca3f36932aa" title="Read which cores on the chip are asleep right now.">get_sample()</a> to obtain the state of the cores. </p>

<p class="definition">Definition at line <a class="el" href="chip__power__monitor_8c_source.html#l00139">139</a> of file <a class="el" href="chip__power__monitor_8c_source.html">chip_power_monitor.c</a>.</p>

</div>
</div>
<a id="a0654afe09e3f4da82ba08eded260c07d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0654afe09e3f4da82ba08eded260c07d">&#9670;&nbsp;</a></span>sample_in_slot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sample_in_slot </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>unused0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="http://spinnakermanchester.github.io/spinnaker_tools/spinnaker_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&#160;</td>
          <td class="paramname"><em>unused1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called to actually record a sample. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">unused0</td><td>unused </td></tr>
    <tr><td class="paramname">unused1</td><td>unused </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="chip__power__monitor_8c_source.html#l00152">152</a> of file <a class="el" href="chip__power__monitor_8c_source.html">chip_power_monitor.c</a>.</p>

</div>
</div>
<a id="a36c5c4a96b95d6ac1e48c8a0af1cf253"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36c5c4a96b95d6ac1e48c8a0af1cf253">&#9670;&nbsp;</a></span>read_parameters()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool read_parameters </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="chip__power__monitor_8c.html#structsample__params">sample_params</a> *&#160;</td>
          <td class="paramname"><em>sample_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads the configuration of the application out of the configuration region. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname"><a class="el" href="chip__power__monitor_8c.html#structsample__params" title="Describes the format of the configuration region.">sample_params</a></td><td>Pointer to the configuration region. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the read was successful. (Does not currently fail.) </dd></dl>

<p class="definition">Definition at line <a class="el" href="chip__power__monitor_8c_source.html#l00192">192</a> of file <a class="el" href="chip__power__monitor_8c_source.html">chip_power_monitor.c</a>.</p>

</div>
</div>
<a id="a03a8e4045b51680cc94b4359837fa796"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03a8e4045b51680cc94b4359837fa796">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool initialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialises the program. </p>
<dl class="section return"><dt>Returns</dt><dd>True if initialisation succeeded, false if it failed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="chip__power__monitor_8c_source.html#l00202">202</a> of file <a class="el" href="chip__power__monitor_8c_source.html">chip_power_monitor.c</a>.</p>

</div>
</div>
<a id="aa14f4f1d4c84183b7bf7108bf930a23c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa14f4f1d4c84183b7bf7108bf930a23c">&#9670;&nbsp;</a></span>c_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void c_main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The application entry point. </p>
<p>Initialises the application state, installs all required callbacks, and runs the "simulation" loop until told to terminate. </p>

<p class="definition">Definition at line <a class="el" href="chip__power__monitor_8c_source.html#l00232">232</a> of file <a class="el" href="chip__power__monitor_8c_source.html">chip_power_monitor.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ac981a0e40fa249cb85edc8dfe1e70d6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac981a0e40fa249cb85edc8dfe1e70d6b">&#9670;&nbsp;</a></span>RECORDING_CHANNEL_ID</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t RECORDING_CHANNEL_ID = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The recording channel we use. </p>
<p>Only one recording channel is used by this application. </p>

<p class="definition">Definition at line <a class="el" href="chip__power__monitor_8c_source.html#l00058">58</a> of file <a class="el" href="chip__power__monitor_8c_source.html">chip_power_monitor.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
